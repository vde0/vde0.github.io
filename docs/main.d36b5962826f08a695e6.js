(()=>{"use strict";var __webpack_modules__={98:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   N: () => (/* binding */ Session),\n/* harmony export */   t: () => (/* binding */ SESSION_EVENTS)\n/* harmony export */ });\n/* harmony import */ var _Connection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5788);\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4391);\n/* harmony import */ var _Profile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3011);\n/* harmony import */ var _Signal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(188);\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8349);\n/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1295);\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8175);\n/* harmony import */ var _lib_webrtc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(3396);\n\n\n\n\n\n\n\n\n// === EVENT SYSTEM ===\nconst chest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_4__/* .ListenerChest */ .q9();\nconst SESSION_EVENTS = {\n    NEXT_TARGET: 'nexttarget',\n};\n// === DATA ===\nlet destroyChatPeerBridge;\n// === API ===\nlet targetId = null;\nlet target = null;\nlet connection = null;\n(0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__/* .addDebug */ .H0)('target', targetId);\nconst next = function () {\n    connection?.close();\n    targetId = null;\n    connection = null;\n    // Emit\n    chest.exec('nexttarget', { targetId, target, connection });\n    _Signal__WEBPACK_IMPORTED_MODULE_3__/* .Signal */ .H.exec('relaytarget', { target: _Profile__WEBPACK_IMPORTED_MODULE_2__/* .Profile */ .W.id });\n    // Listen\n    _Signal__WEBPACK_IMPORTED_MODULE_3__/* .Signal */ .H.once('accepttarget', ({ target: userId, offer }) => {\n        targetId = userId;\n        target = new _User__WEBPACK_IMPORTED_MODULE_5__/* .User */ .K(targetId);\n        const media = _Profile__WEBPACK_IMPORTED_MODULE_2__/* .Profile */ .W.user.getMedia();\n        if (!media)\n            throw Error('Client Media is not found');\n        connection = new _Connection__WEBPACK_IMPORTED_MODULE_0__/* .Connection */ .N({ target: targetId, offer }, media);\n        _Profile__WEBPACK_IMPORTED_MODULE_2__/* .Profile */ .W.room.addUser(target);\n        connection.getPeer().on(_lib_webrtc__WEBPACK_IMPORTED_MODULE_7__/* .PEER_EVENTS */ .rE.MEDIA, ({ media }) => target?.setMedia(media));\n        destroyChatPeerBridge = (0,_helpers__WEBPACK_IMPORTED_MODULE_1__/* .chatPeerBridge */ .kI)({\n            clientId: _Profile__WEBPACK_IMPORTED_MODULE_2__/* .Profile */ .W.id,\n            target: targetId,\n            chat: _Profile__WEBPACK_IMPORTED_MODULE_2__/* .Profile */ .W.room.chat,\n            peer: connection.getPeer(),\n        });\n        (0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__/* .listen */ .KT)(connection, {\n            [_Connection__WEBPACK_IMPORTED_MODULE_0__/* .CONNECTION_EVENTS */ .J.STATE_UPDATED]: ({ state }) => {\n                if (!target)\n                    throw Error(\"'target' in not found\");\n                console.log('CONNECTION STATE', state);\n                if (state === 'closed') {\n                    destroyChatPeerBridge();\n                }\n                if (state === 'connected') {\n                    target.setMedia;\n                }\n            },\n            [_Connection__WEBPACK_IMPORTED_MODULE_0__/* .CONNECTION_EVENTS */ .J.PEER_UPDATER]: ({ peer }) => {\n                if (!targetId)\n                    throw Error(\"'targetId' in not found\");\n                if (!connection)\n                    throw Error(\"'connection' in not found\");\n                destroyChatPeerBridge();\n                destroyChatPeerBridge = (0,_helpers__WEBPACK_IMPORTED_MODULE_1__/* .chatPeerBridge */ .kI)({\n                    clientId: _Profile__WEBPACK_IMPORTED_MODULE_2__/* .Profile */ .W.id,\n                    target: targetId,\n                    chat: _Profile__WEBPACK_IMPORTED_MODULE_2__/* .Profile */ .W.room.chat,\n                    peer,\n                });\n                connection.getPeer().on(_lib_webrtc__WEBPACK_IMPORTED_MODULE_7__/* .PEER_EVENTS */ .rE.MEDIA, ({ media }) => target?.setMedia(media));\n            },\n        });\n        connection.connect();\n        (0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__/* .addDebug */ .H0)('target', targetId);\n        chest.exec('nexttarget', { targetId, target, connection });\n    });\n};\nconst Session = {\n    ...chest,\n    get targetId() {\n        return targetId;\n    },\n    get target() {\n        return target;\n    },\n    get connection() {\n        return connection;\n    },\n    next,\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTZEO0FBQ2xCO0FBQ1A7QUFDRjtBQUNrQjtBQUN0QjtBQUNnQjtBQUNKO0FBQzFDO0FBQ0Esa0JBQWtCLHdFQUFhO0FBQ3hCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4QkFBOEI7QUFDN0QsSUFBSSxvREFBTSx1QkFBdUIsUUFBUSxzREFBTyxLQUFLO0FBQ3JEO0FBQ0EsSUFBSSxvREFBTSx5QkFBeUIsdUJBQXVCO0FBQzFEO0FBQ0EscUJBQXFCLGdEQUFJO0FBQ3pCLHNCQUFzQixzREFBTztBQUM3QjtBQUNBO0FBQ0EseUJBQXlCLDREQUFVLEdBQUcseUJBQXlCO0FBQy9ELFFBQVEsc0RBQU87QUFDZixnQ0FBZ0MsOERBQVcsV0FBVyxPQUFPO0FBQzdELGdDQUFnQyxrRUFBYztBQUM5QyxzQkFBc0Isc0RBQU87QUFDN0I7QUFDQSxrQkFBa0Isc0RBQU87QUFDekI7QUFDQSxTQUFTO0FBQ1QsUUFBUSw0REFBTTtBQUNkLGFBQWEsbUVBQWlCLG9CQUFvQixPQUFPO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixhQUFhLG1FQUFpQixtQkFBbUIsTUFBTTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGtFQUFjO0FBQ3RELDhCQUE4QixzREFBTztBQUNyQztBQUNBLDBCQUEwQixzREFBTztBQUNqQztBQUNBLGlCQUFpQjtBQUNqQix3Q0FBd0MsOERBQVcsV0FBVyxPQUFPO0FBQ3JFLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCLG1DQUFtQyw4QkFBOEI7QUFDakUsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9lbnRpdGllcy9TZXNzaW9uLnRzPzVmNDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29ubmVjdGlvbiwgQ09OTkVDVElPTl9FVkVOVFMgfSBmcm9tICcuL0Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgY2hhdFBlZXJCcmlkZ2UgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgUHJvZmlsZSB9IGZyb20gJy4vUHJvZmlsZSc7XG5pbXBvcnQgeyBTaWduYWwgfSBmcm9tICcuL1NpZ25hbCc7XG5pbXBvcnQgeyBMaXN0ZW5lckNoZXN0IH0gZnJvbSAnQGxpYi9wcHJpbnRlci10b29scyc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi9Vc2VyJztcbmltcG9ydCB7IGFkZERlYnVnLCBsaXN0ZW4gfSBmcm9tICdAbGliL3V0aWxzJztcbmltcG9ydCB7IFBFRVJfRVZFTlRTIH0gZnJvbSAnQGxpYi93ZWJydGMnO1xuLy8gPT09IEVWRU5UIFNZU1RFTSA9PT1cbmNvbnN0IGNoZXN0ID0gbmV3IExpc3RlbmVyQ2hlc3QoKTtcbmV4cG9ydCBjb25zdCBTRVNTSU9OX0VWRU5UUyA9IHtcbiAgICBORVhUX1RBUkdFVDogJ25leHR0YXJnZXQnLFxufTtcbi8vID09PSBEQVRBID09PVxubGV0IGRlc3Ryb3lDaGF0UGVlckJyaWRnZTtcbi8vID09PSBBUEkgPT09XG5sZXQgdGFyZ2V0SWQgPSBudWxsO1xubGV0IHRhcmdldCA9IG51bGw7XG5sZXQgY29ubmVjdGlvbiA9IG51bGw7XG5hZGREZWJ1ZygndGFyZ2V0JywgdGFyZ2V0SWQpO1xuY29uc3QgbmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25uZWN0aW9uPy5jbG9zZSgpO1xuICAgIHRhcmdldElkID0gbnVsbDtcbiAgICBjb25uZWN0aW9uID0gbnVsbDtcbiAgICAvLyBFbWl0XG4gICAgY2hlc3QuZXhlYygnbmV4dHRhcmdldCcsIHsgdGFyZ2V0SWQsIHRhcmdldCwgY29ubmVjdGlvbiB9KTtcbiAgICBTaWduYWwuZXhlYygncmVsYXl0YXJnZXQnLCB7IHRhcmdldDogUHJvZmlsZS5pZCB9KTtcbiAgICAvLyBMaXN0ZW5cbiAgICBTaWduYWwub25jZSgnYWNjZXB0dGFyZ2V0JywgKHsgdGFyZ2V0OiB1c2VySWQsIG9mZmVyIH0pID0+IHtcbiAgICAgICAgdGFyZ2V0SWQgPSB1c2VySWQ7XG4gICAgICAgIHRhcmdldCA9IG5ldyBVc2VyKHRhcmdldElkKTtcbiAgICAgICAgY29uc3QgbWVkaWEgPSBQcm9maWxlLnVzZXIuZ2V0TWVkaWEoKTtcbiAgICAgICAgaWYgKCFtZWRpYSlcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdDbGllbnQgTWVkaWEgaXMgbm90IGZvdW5kJyk7XG4gICAgICAgIGNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbih7IHRhcmdldDogdGFyZ2V0SWQsIG9mZmVyIH0sIG1lZGlhKTtcbiAgICAgICAgUHJvZmlsZS5yb29tLmFkZFVzZXIodGFyZ2V0KTtcbiAgICAgICAgY29ubmVjdGlvbi5nZXRQZWVyKCkub24oUEVFUl9FVkVOVFMuTUVESUEsICh7IG1lZGlhIH0pID0+IHRhcmdldD8uc2V0TWVkaWEobWVkaWEpKTtcbiAgICAgICAgZGVzdHJveUNoYXRQZWVyQnJpZGdlID0gY2hhdFBlZXJCcmlkZ2Uoe1xuICAgICAgICAgICAgY2xpZW50SWQ6IFByb2ZpbGUuaWQsXG4gICAgICAgICAgICB0YXJnZXQ6IHRhcmdldElkLFxuICAgICAgICAgICAgY2hhdDogUHJvZmlsZS5yb29tLmNoYXQsXG4gICAgICAgICAgICBwZWVyOiBjb25uZWN0aW9uLmdldFBlZXIoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGxpc3Rlbihjb25uZWN0aW9uLCB7XG4gICAgICAgICAgICBbQ09OTkVDVElPTl9FVkVOVFMuU1RBVEVfVVBEQVRFRF06ICh7IHN0YXRlIH0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCIndGFyZ2V0JyBpbiBub3QgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NPTk5FQ1RJT04gU1RBVEUnLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICAgICAgICAgICAgICBkZXN0cm95Q2hhdFBlZXJCcmlkZ2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0TWVkaWE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtDT05ORUNUSU9OX0VWRU5UUy5QRUVSX1VQREFURVJdOiAoeyBwZWVyIH0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldElkKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIid0YXJnZXRJZCcgaW4gbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCInY29ubmVjdGlvbicgaW4gbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIGRlc3Ryb3lDaGF0UGVlckJyaWRnZSgpO1xuICAgICAgICAgICAgICAgIGRlc3Ryb3lDaGF0UGVlckJyaWRnZSA9IGNoYXRQZWVyQnJpZGdlKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6IFByb2ZpbGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgIGNoYXQ6IFByb2ZpbGUucm9vbS5jaGF0LFxuICAgICAgICAgICAgICAgICAgICBwZWVyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZ2V0UGVlcigpLm9uKFBFRVJfRVZFTlRTLk1FRElBLCAoeyBtZWRpYSB9KSA9PiB0YXJnZXQ/LnNldE1lZGlhKG1lZGlhKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGFkZERlYnVnKCd0YXJnZXQnLCB0YXJnZXRJZCk7XG4gICAgICAgIGNoZXN0LmV4ZWMoJ25leHR0YXJnZXQnLCB7IHRhcmdldElkLCB0YXJnZXQsIGNvbm5lY3Rpb24gfSk7XG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IFNlc3Npb24gPSB7XG4gICAgLi4uY2hlc3QsXG4gICAgZ2V0IHRhcmdldElkKCkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0SWQ7XG4gICAgfSxcbiAgICBnZXQgdGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0sXG4gICAgZ2V0IGNvbm5lY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgIH0sXG4gICAgbmV4dCxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///98\n")},188:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   H: () => (/* binding */ Signal)\n/* harmony export */ });\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8349);\n\nconst Signal = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__/* .ListenerChest */ .q9();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBb0Q7QUFDN0MsbUJBQW1CLHdFQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvZW50aXRpZXMvU2lnbmFsLnRzPzkzNTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTGlzdGVuZXJDaGVzdCB9IGZyb20gJ0BsaWIvcHByaW50ZXItdG9vbHMnO1xuZXhwb3J0IGNvbnN0IFNpZ25hbCA9IG5ldyBMaXN0ZW5lckNoZXN0KCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///188\n")},783:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   W: () => (/* binding */ Room),\n/* harmony export */   w: () => (/* binding */ ROOM_EVENTS)\n/* harmony export */ });\n/* harmony import */ var _Chat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1582);\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8349);\n\n\n// == EVENT SYSTEM ==\nconst ROOM_EVENTS = {\n    ADD_USER: 'adduser',\n    DEL_USER: 'deluser',\n};\nObject.freeze(ROOM_EVENTS);\nconst Room = function () {\n    const chest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_1__/* .ListenerChest */ .q9();\n    const chat = new _Chat__WEBPACK_IMPORTED_MODULE_0__/* .Chat */ .ry();\n    const userMap = new Map();\n    const addUser = function (user) {\n        const userId = user.getId();\n        if (userMap.has(userId))\n            return;\n        userMap.set(userId, user);\n        chest.exec(ROOM_EVENTS.ADD_USER, { userId, user });\n    };\n    const delUser = function (user) {\n        const userId = user.getId();\n        const result = userMap.delete(userId);\n        result && chest.exec(ROOM_EVENTS.DEL_USER, { userId, user });\n        return result;\n    };\n    const hasUser = function (user) {\n        return userMap.has(user.getId());\n    };\n    const getUserById = function (userId) {\n        return userMap.get(userId);\n    };\n    const getUserIdList = function () {\n        return [...userMap.keys()];\n    };\n    return {\n        ...chest,\n        chat,\n        addUser,\n        delUser,\n        hasUser,\n        getUserById,\n        getUserIdList,\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzgzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QjtBQUNzQjtBQUNwRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHNCQUFzQix3RUFBYTtBQUNuQyxxQkFBcUIsaURBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGNBQWM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsY0FBYztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9lbnRpdGllcy9Sb29tLnRzPzcwZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhdCB9IGZyb20gJy4vQ2hhdCc7XG5pbXBvcnQgeyBMaXN0ZW5lckNoZXN0IH0gZnJvbSAnQGxpYi9wcHJpbnRlci10b29scyc7XG4vLyA9PSBFVkVOVCBTWVNURU0gPT1cbmV4cG9ydCBjb25zdCBST09NX0VWRU5UUyA9IHtcbiAgICBBRERfVVNFUjogJ2FkZHVzZXInLFxuICAgIERFTF9VU0VSOiAnZGVsdXNlcicsXG59O1xuT2JqZWN0LmZyZWV6ZShST09NX0VWRU5UUyk7XG5leHBvcnQgY29uc3QgUm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjaGVzdCA9IG5ldyBMaXN0ZW5lckNoZXN0KCk7XG4gICAgY29uc3QgY2hhdCA9IG5ldyBDaGF0KCk7XG4gICAgY29uc3QgdXNlck1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBhZGRVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgY29uc3QgdXNlcklkID0gdXNlci5nZXRJZCgpO1xuICAgICAgICBpZiAodXNlck1hcC5oYXModXNlcklkKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdXNlck1hcC5zZXQodXNlcklkLCB1c2VyKTtcbiAgICAgICAgY2hlc3QuZXhlYyhST09NX0VWRU5UUy5BRERfVVNFUiwgeyB1c2VySWQsIHVzZXIgfSk7XG4gICAgfTtcbiAgICBjb25zdCBkZWxVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgY29uc3QgdXNlcklkID0gdXNlci5nZXRJZCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB1c2VyTWFwLmRlbGV0ZSh1c2VySWQpO1xuICAgICAgICByZXN1bHQgJiYgY2hlc3QuZXhlYyhST09NX0VWRU5UUy5ERUxfVVNFUiwgeyB1c2VySWQsIHVzZXIgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBjb25zdCBoYXNVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJNYXAuaGFzKHVzZXIuZ2V0SWQoKSk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRVc2VyQnlJZCA9IGZ1bmN0aW9uICh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJNYXAuZ2V0KHVzZXJJZCk7XG4gICAgfTtcbiAgICBjb25zdCBnZXRVc2VySWRMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gWy4uLnVzZXJNYXAua2V5cygpXTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNoZXN0LFxuICAgICAgICBjaGF0LFxuICAgICAgICBhZGRVc2VyLFxuICAgICAgICBkZWxVc2VyLFxuICAgICAgICBoYXNVc2VyLFxuICAgICAgICBnZXRVc2VyQnlJZCxcbiAgICAgICAgZ2V0VXNlcklkTGlzdCxcbiAgICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///783\n")},1295:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ USER_EVENTS),\n/* harmony export */   K: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8349);\n\n// === EVENT SYSTEM ===\nconst USER_EVENTS = {\n    MEDIA: 'media',\n};\nObject.freeze(USER_EVENTS);\nconst User = function (userId) {\n    let privateMedia = null;\n    const chest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__/* .ListenerChest */ .q9();\n    return {\n        ...chest,\n        getId() {\n            return userId;\n        },\n        setMedia(media) {\n            privateMedia = media;\n            chest.exec('media', { media, userId });\n        },\n        getMedia() {\n            return privateMedia;\n        },\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI5NS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvRDtBQUNwRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHNCQUFzQix3RUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esa0NBQWtDLGVBQWU7QUFDakQsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2VudGl0aWVzL1VzZXIudHM/MDU2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMaXN0ZW5lckNoZXN0IH0gZnJvbSAnQGxpYi9wcHJpbnRlci10b29scyc7XG4vLyA9PT0gRVZFTlQgU1lTVEVNID09PVxuZXhwb3J0IGNvbnN0IFVTRVJfRVZFTlRTID0ge1xuICAgIE1FRElBOiAnbWVkaWEnLFxufTtcbk9iamVjdC5mcmVlemUoVVNFUl9FVkVOVFMpO1xuZXhwb3J0IGNvbnN0IFVzZXIgPSBmdW5jdGlvbiAodXNlcklkKSB7XG4gICAgbGV0IHByaXZhdGVNZWRpYSA9IG51bGw7XG4gICAgY29uc3QgY2hlc3QgPSBuZXcgTGlzdGVuZXJDaGVzdCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNoZXN0LFxuICAgICAgICBnZXRJZCgpIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VySWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldE1lZGlhKG1lZGlhKSB7XG4gICAgICAgICAgICBwcml2YXRlTWVkaWEgPSBtZWRpYTtcbiAgICAgICAgICAgIGNoZXN0LmV4ZWMoJ21lZGlhJywgeyBtZWRpYSwgdXNlcklkIH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRNZWRpYSgpIHtcbiAgICAgICAgICAgIHJldHVybiBwcml2YXRlTWVkaWE7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1295\n")},1582:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   N8: () => (/* binding */ CHAT_EVENTS),\n/* harmony export */   ry: () => (/* binding */ Chat)\n/* harmony export */ });\n/* unused harmony exports checkChatterType, checkMsgType */\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8349);\n\nconst CHAT_EVENTS = {\n    ADD: 'add',\n    DELETE: 'delete',\n    CLEAR: 'clear',\n};\nObject.freeze(CHAT_EVENTS);\nconst Chat = function () {\n    // === STORE ===\n    const msgMap = new Map();\n    let thisChat;\n    let firstMsgId = -1;\n    let lastMsgId = -1;\n    const listenerChest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__/* .ListenerChest */ .q9();\n    // === FUNCS 1 LVL ===\n    const make = (text, userId) => ({\n        text,\n        userId,\n        read: false,\n        toString() {\n            return text;\n        },\n    });\n    const length = () => msgMap.size;\n    const has = function (msgId) {\n        return msgMap.has(msgId);\n    };\n    const get = function (msgId) {\n        return msgMap.get(msgId) ?? null;\n    };\n    const add = function (userId, text) {\n        checkChatterType(userId);\n        checkMsgType(text);\n        const item = make(text, userId);\n        msgMap.set(++lastMsgId, item);\n        if (firstMsgId === -1)\n            firstMsgId = lastMsgId;\n        listenerChest.exec(CHAT_EVENTS.ADD, { item });\n        return lastMsgId;\n    };\n    const remove = function (msgId) {\n        if (typeof msgId !== 'number')\n            throw TypeError('msgId must be number.');\n        if (msgId === firstMsgId)\n            firstMsgId = findMsgByCount(firstMsgId, 1);\n        if (msgId === lastMsgId)\n            lastMsgId = findMsgByCount(lastMsgId, -1);\n        const item = msgMap.get(msgId);\n        const result = msgMap.delete(msgId);\n        if (length() === 0) {\n            firstMsgId = -1;\n            lastMsgId = -1;\n        }\n        item && listenerChest.exec(CHAT_EVENTS.DELETE, { item });\n        return result;\n    };\n    const read = function (msgId) {\n        if (!msgMap.has(msgId) || msgMap.get(msgId)['read'])\n            return false;\n        msgMap.get(msgId)['read'] = true;\n        return true;\n    };\n    const clear = function () {\n        msgMap.clear();\n        listenerChest.exec(CHAT_EVENTS.CLEAR);\n        firstMsgId = -1;\n        lastMsgId = -1;\n    };\n    // === ITERATORS ===\n    function* msgIdIterator(start, quant) {\n        if (!has(start))\n            return;\n        const msgArr = Array.from(msgMap.keys());\n        const changer = quant > -1 ? +1 : -1;\n        let curIndex = msgArr.find((msgId) => msgId === start);\n        let count = Math.abs(quant);\n        if (typeof curIndex === 'undefined')\n            return;\n        while (count > 0 && curIndex >= 0 && curIndex <= msgArr.length - 1) {\n            yield msgArr[curIndex];\n            curIndex += changer;\n            count--;\n        }\n    }\n    function* msgItemIterator(start, quant) {\n        if (!has(start))\n            return;\n        const iterator1lvl = msgIdIterator(start, quant);\n        while (true) {\n            const state = iterator1lvl.next();\n            if (state.done)\n                break;\n            yield get(state.value);\n        }\n    }\n    // === FUNCS 2 LVL ===\n    const findMsgByCount = (start, count) => {\n        if (!checkStartArg(start))\n            return -1;\n        let result = -1;\n        for (let msgId of msgIdIterator(start, count))\n            result = msgId;\n        return result;\n    };\n    const forEach = (callback, start = firstMsgId, quant = length()) => {\n        checkStartArg(start);\n        for (let msgId of msgIdIterator(start, quant)) {\n            callback(get(msgId), msgId, thisChat);\n        }\n    };\n    const map = (callback, start = firstMsgId, quant = length()) => {\n        if (!checkStartArg(start))\n            return [];\n        const result = [];\n        forEach((...args) => result.push(callback(...args)), start, quant);\n        return result;\n    };\n    // === HELPERS ===\n    function checkStartArg(start) {\n        if (!has(start))\n            return false;\n        return true;\n    }\n    // === RESULT INSTANCE ===\n    const instance = {\n        ...listenerChest,\n        add,\n        delete: remove,\n        read,\n        clear,\n        has,\n        get,\n        getAll() {\n            return map((msgItem) => msgItem);\n        },\n        head(quant) {\n            return map((msgItem) => msgItem, firstMsgId, quant);\n        },\n        tail(quant) {\n            return map((msgItem) => msgItem, findMsgByCount(lastMsgId, -quant), quant);\n        },\n        get length() {\n            return length();\n        },\n        forEach(callback) {\n            forEach(callback);\n        },\n        map(callback) {\n            return map(callback);\n        },\n        [Symbol.iterator]() {\n            return msgItemIterator(firstMsgId, length());\n        },\n    };\n    Object.freeze(instance);\n    thisChat = instance;\n    return instance;\n};\n// === HELPERS ===\nfunction checkChatterType(userId) {\n    if (typeof userId !== 'string' && typeof userId !== 'symbol')\n        throw TypeError('userId must be string.');\n}\nfunction checkMsgType(msg) {\n    if (typeof msg !== 'string')\n        throw TypeError('msg must be string.');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU4Mi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDN0M7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHdFQUFhO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLE1BQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELE1BQU07QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvZW50aXRpZXMvQ2hhdC50cz9lNzc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExpc3RlbmVyQ2hlc3QgfSBmcm9tICdAbGliL3BwcmludGVyLXRvb2xzJztcbmV4cG9ydCBjb25zdCBDSEFUX0VWRU5UUyA9IHtcbiAgICBBREQ6ICdhZGQnLFxuICAgIERFTEVURTogJ2RlbGV0ZScsXG4gICAgQ0xFQVI6ICdjbGVhcicsXG59O1xuT2JqZWN0LmZyZWV6ZShDSEFUX0VWRU5UUyk7XG5leHBvcnQgY29uc3QgQ2hhdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyA9PT0gU1RPUkUgPT09XG4gICAgY29uc3QgbXNnTWFwID0gbmV3IE1hcCgpO1xuICAgIGxldCB0aGlzQ2hhdDtcbiAgICBsZXQgZmlyc3RNc2dJZCA9IC0xO1xuICAgIGxldCBsYXN0TXNnSWQgPSAtMTtcbiAgICBjb25zdCBsaXN0ZW5lckNoZXN0ID0gbmV3IExpc3RlbmVyQ2hlc3QoKTtcbiAgICAvLyA9PT0gRlVOQ1MgMSBMVkwgPT09XG4gICAgY29uc3QgbWFrZSA9ICh0ZXh0LCB1c2VySWQpID0+ICh7XG4gICAgICAgIHRleHQsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgcmVhZDogZmFsc2UsXG4gICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3QgbGVuZ3RoID0gKCkgPT4gbXNnTWFwLnNpemU7XG4gICAgY29uc3QgaGFzID0gZnVuY3Rpb24gKG1zZ0lkKSB7XG4gICAgICAgIHJldHVybiBtc2dNYXAuaGFzKG1zZ0lkKTtcbiAgICB9O1xuICAgIGNvbnN0IGdldCA9IGZ1bmN0aW9uIChtc2dJZCkge1xuICAgICAgICByZXR1cm4gbXNnTWFwLmdldChtc2dJZCkgPz8gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IGFkZCA9IGZ1bmN0aW9uICh1c2VySWQsIHRleHQpIHtcbiAgICAgICAgY2hlY2tDaGF0dGVyVHlwZSh1c2VySWQpO1xuICAgICAgICBjaGVja01zZ1R5cGUodGV4dCk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBtYWtlKHRleHQsIHVzZXJJZCk7XG4gICAgICAgIG1zZ01hcC5zZXQoKytsYXN0TXNnSWQsIGl0ZW0pO1xuICAgICAgICBpZiAoZmlyc3RNc2dJZCA9PT0gLTEpXG4gICAgICAgICAgICBmaXJzdE1zZ0lkID0gbGFzdE1zZ0lkO1xuICAgICAgICBsaXN0ZW5lckNoZXN0LmV4ZWMoQ0hBVF9FVkVOVFMuQURELCB7IGl0ZW0gfSk7XG4gICAgICAgIHJldHVybiBsYXN0TXNnSWQ7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmUgPSBmdW5jdGlvbiAobXNnSWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtc2dJZCAhPT0gJ251bWJlcicpXG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ21zZ0lkIG11c3QgYmUgbnVtYmVyLicpO1xuICAgICAgICBpZiAobXNnSWQgPT09IGZpcnN0TXNnSWQpXG4gICAgICAgICAgICBmaXJzdE1zZ0lkID0gZmluZE1zZ0J5Q291bnQoZmlyc3RNc2dJZCwgMSk7XG4gICAgICAgIGlmIChtc2dJZCA9PT0gbGFzdE1zZ0lkKVxuICAgICAgICAgICAgbGFzdE1zZ0lkID0gZmluZE1zZ0J5Q291bnQobGFzdE1zZ0lkLCAtMSk7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBtc2dNYXAuZ2V0KG1zZ0lkKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbXNnTWFwLmRlbGV0ZShtc2dJZCk7XG4gICAgICAgIGlmIChsZW5ndGgoKSA9PT0gMCkge1xuICAgICAgICAgICAgZmlyc3RNc2dJZCA9IC0xO1xuICAgICAgICAgICAgbGFzdE1zZ0lkID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaXRlbSAmJiBsaXN0ZW5lckNoZXN0LmV4ZWMoQ0hBVF9FVkVOVFMuREVMRVRFLCB7IGl0ZW0gfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBjb25zdCByZWFkID0gZnVuY3Rpb24gKG1zZ0lkKSB7XG4gICAgICAgIGlmICghbXNnTWFwLmhhcyhtc2dJZCkgfHwgbXNnTWFwLmdldChtc2dJZClbJ3JlYWQnXSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbXNnTWFwLmdldChtc2dJZClbJ3JlYWQnXSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1zZ01hcC5jbGVhcigpO1xuICAgICAgICBsaXN0ZW5lckNoZXN0LmV4ZWMoQ0hBVF9FVkVOVFMuQ0xFQVIpO1xuICAgICAgICBmaXJzdE1zZ0lkID0gLTE7XG4gICAgICAgIGxhc3RNc2dJZCA9IC0xO1xuICAgIH07XG4gICAgLy8gPT09IElURVJBVE9SUyA9PT1cbiAgICBmdW5jdGlvbiogbXNnSWRJdGVyYXRvcihzdGFydCwgcXVhbnQpIHtcbiAgICAgICAgaWYgKCFoYXMoc3RhcnQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBtc2dBcnIgPSBBcnJheS5mcm9tKG1zZ01hcC5rZXlzKCkpO1xuICAgICAgICBjb25zdCBjaGFuZ2VyID0gcXVhbnQgPiAtMSA/ICsxIDogLTE7XG4gICAgICAgIGxldCBjdXJJbmRleCA9IG1zZ0Fyci5maW5kKChtc2dJZCkgPT4gbXNnSWQgPT09IHN0YXJ0KTtcbiAgICAgICAgbGV0IGNvdW50ID0gTWF0aC5hYnMocXVhbnQpO1xuICAgICAgICBpZiAodHlwZW9mIGN1ckluZGV4ID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgd2hpbGUgKGNvdW50ID4gMCAmJiBjdXJJbmRleCA+PSAwICYmIGN1ckluZGV4IDw9IG1zZ0Fyci5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICB5aWVsZCBtc2dBcnJbY3VySW5kZXhdO1xuICAgICAgICAgICAgY3VySW5kZXggKz0gY2hhbmdlcjtcbiAgICAgICAgICAgIGNvdW50LS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24qIG1zZ0l0ZW1JdGVyYXRvcihzdGFydCwgcXVhbnQpIHtcbiAgICAgICAgaWYgKCFoYXMoc3RhcnQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpdGVyYXRvcjFsdmwgPSBtc2dJZEl0ZXJhdG9yKHN0YXJ0LCBxdWFudCk7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGl0ZXJhdG9yMWx2bC5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoc3RhdGUuZG9uZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHlpZWxkIGdldChzdGF0ZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gPT09IEZVTkNTIDIgTFZMID09PVxuICAgIGNvbnN0IGZpbmRNc2dCeUNvdW50ID0gKHN0YXJ0LCBjb3VudCkgPT4ge1xuICAgICAgICBpZiAoIWNoZWNrU3RhcnRBcmcoc3RhcnQpKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBsZXQgcmVzdWx0ID0gLTE7XG4gICAgICAgIGZvciAobGV0IG1zZ0lkIG9mIG1zZ0lkSXRlcmF0b3Ioc3RhcnQsIGNvdW50KSlcbiAgICAgICAgICAgIHJlc3VsdCA9IG1zZ0lkO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgY29uc3QgZm9yRWFjaCA9IChjYWxsYmFjaywgc3RhcnQgPSBmaXJzdE1zZ0lkLCBxdWFudCA9IGxlbmd0aCgpKSA9PiB7XG4gICAgICAgIGNoZWNrU3RhcnRBcmcoc3RhcnQpO1xuICAgICAgICBmb3IgKGxldCBtc2dJZCBvZiBtc2dJZEl0ZXJhdG9yKHN0YXJ0LCBxdWFudCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGdldChtc2dJZCksIG1zZ0lkLCB0aGlzQ2hhdCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1hcCA9IChjYWxsYmFjaywgc3RhcnQgPSBmaXJzdE1zZ0lkLCBxdWFudCA9IGxlbmd0aCgpKSA9PiB7XG4gICAgICAgIGlmICghY2hlY2tTdGFydEFyZyhzdGFydCkpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3JFYWNoKCguLi5hcmdzKSA9PiByZXN1bHQucHVzaChjYWxsYmFjayguLi5hcmdzKSksIHN0YXJ0LCBxdWFudCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvLyA9PT0gSEVMUEVSUyA9PT1cbiAgICBmdW5jdGlvbiBjaGVja1N0YXJ0QXJnKHN0YXJ0KSB7XG4gICAgICAgIGlmICghaGFzKHN0YXJ0KSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vID09PSBSRVNVTFQgSU5TVEFOQ0UgPT09XG4gICAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgICAgIC4uLmxpc3RlbmVyQ2hlc3QsXG4gICAgICAgIGFkZCxcbiAgICAgICAgZGVsZXRlOiByZW1vdmUsXG4gICAgICAgIHJlYWQsXG4gICAgICAgIGNsZWFyLFxuICAgICAgICBoYXMsXG4gICAgICAgIGdldCxcbiAgICAgICAgZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hcCgobXNnSXRlbSkgPT4gbXNnSXRlbSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhlYWQocXVhbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXAoKG1zZ0l0ZW0pID0+IG1zZ0l0ZW0sIGZpcnN0TXNnSWQsIHF1YW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgdGFpbChxdWFudCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hcCgobXNnSXRlbSkgPT4gbXNnSXRlbSwgZmluZE1zZ0J5Q291bnQobGFzdE1zZ0lkLCAtcXVhbnQpLCBxdWFudCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gbGVuZ3RoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZvckVhY2goY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGZvckVhY2goY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICBtYXAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBtYXAoY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiBtc2dJdGVtSXRlcmF0b3IoZmlyc3RNc2dJZCwgbGVuZ3RoKCkpO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgT2JqZWN0LmZyZWV6ZShpbnN0YW5jZSk7XG4gICAgdGhpc0NoYXQgPSBpbnN0YW5jZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG59O1xuLy8gPT09IEhFTFBFUlMgPT09XG5leHBvcnQgZnVuY3Rpb24gY2hlY2tDaGF0dGVyVHlwZSh1c2VySWQpIHtcbiAgICBpZiAodHlwZW9mIHVzZXJJZCAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHVzZXJJZCAhPT0gJ3N5bWJvbCcpXG4gICAgICAgIHRocm93IFR5cGVFcnJvcigndXNlcklkIG11c3QgYmUgc3RyaW5nLicpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTXNnVHlwZShtc2cpIHtcbiAgICBpZiAodHlwZW9mIG1zZyAhPT0gJ3N0cmluZycpXG4gICAgICAgIHRocm93IFR5cGVFcnJvcignbXNnIG11c3QgYmUgc3RyaW5nLicpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1582\n")},1978:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OS: () => (/* binding */ whenLocalMedia),\n/* harmony export */   Ps: () => (/* binding */ requestLocalMedia)\n/* harmony export */ });\n/* unused harmony export getLocalMedia */\nconst handlers = new Set();\nlet localMedia;\n// === HELPERS ===\nconst execHandlers = (stream) => {\n    for (let h of handlers)\n        h(stream);\n    handlers.clear();\n};\n// === PUBLIC API ===\nconst whenLocalMedia = (handler) => {\n    if (!localMedia) {\n        handlers.add(handler);\n        return;\n    }\n    handler(localMedia);\n};\nconst getLocalMedia = () => localMedia;\nconst requestLocalMedia = () => {\n    navigator.mediaDevices\n        .getUserMedia({\n        video: {\n            frameRate: {\n                ideal: 10,\n                max: 15,\n            },\n            width: { ideal: 1280 },\n            height: { ideal: 720 },\n            aspectRatio: { ideal: 16 / 9 },\n            facingMode: 'user',\n        },\n        audio: true,\n    })\n        .then((stream) => {\n        localMedia = stream;\n        execHandlers(localMedia);\n    })\n        .catch((err) => {\n        localMedia = null;\n        console.error('Error getting local media stream:', err);\n        execHandlers(localMedia);\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk3OC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixxQkFBcUIsYUFBYTtBQUNsQyxzQkFBc0IsWUFBWTtBQUNsQywyQkFBMkIsZUFBZTtBQUMxQztBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9hcGkvbG9jYWxNZWRpYS50cz9hNzBlIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGhhbmRsZXJzID0gbmV3IFNldCgpO1xubGV0IGxvY2FsTWVkaWE7XG4vLyA9PT0gSEVMUEVSUyA9PT1cbmNvbnN0IGV4ZWNIYW5kbGVycyA9IChzdHJlYW0pID0+IHtcbiAgICBmb3IgKGxldCBoIG9mIGhhbmRsZXJzKVxuICAgICAgICBoKHN0cmVhbSk7XG4gICAgaGFuZGxlcnMuY2xlYXIoKTtcbn07XG4vLyA9PT0gUFVCTElDIEFQSSA9PT1cbmV4cG9ydCBjb25zdCB3aGVuTG9jYWxNZWRpYSA9IChoYW5kbGVyKSA9PiB7XG4gICAgaWYgKCFsb2NhbE1lZGlhKSB7XG4gICAgICAgIGhhbmRsZXJzLmFkZChoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVyKGxvY2FsTWVkaWEpO1xufTtcbmV4cG9ydCBjb25zdCBnZXRMb2NhbE1lZGlhID0gKCkgPT4gbG9jYWxNZWRpYTtcbmV4cG9ydCBjb25zdCByZXF1ZXN0TG9jYWxNZWRpYSA9ICgpID0+IHtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzXG4gICAgICAgIC5nZXRVc2VyTWVkaWEoe1xuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgZnJhbWVSYXRlOiB7XG4gICAgICAgICAgICAgICAgaWRlYWw6IDEwLFxuICAgICAgICAgICAgICAgIG1heDogMTUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgd2lkdGg6IHsgaWRlYWw6IDEyODAgfSxcbiAgICAgICAgICAgIGhlaWdodDogeyBpZGVhbDogNzIwIH0sXG4gICAgICAgICAgICBhc3BlY3RSYXRpbzogeyBpZGVhbDogMTYgLyA5IH0sXG4gICAgICAgICAgICBmYWNpbmdNb2RlOiAndXNlcicsXG4gICAgICAgIH0sXG4gICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgIH0pXG4gICAgICAgIC50aGVuKChzdHJlYW0pID0+IHtcbiAgICAgICAgbG9jYWxNZWRpYSA9IHN0cmVhbTtcbiAgICAgICAgZXhlY0hhbmRsZXJzKGxvY2FsTWVkaWEpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGxvY2FsTWVkaWEgPSBudWxsO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGxvY2FsIG1lZGlhIHN0cmVhbTonLCBlcnIpO1xuICAgICAgICBleGVjSGFuZGxlcnMobG9jYWxNZWRpYSk7XG4gICAgfSk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1978\n")},1984:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src_App)\n});\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(4848);\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(6540);\n// EXTERNAL MODULE: ./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js\nvar emotion_react_jsx_runtime_browser_esm = __webpack_require__(2445);\n// EXTERNAL MODULE: ./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\nvar emotion_react_browser_esm = __webpack_require__(7437);\n// EXTERNAL MODULE: ./src/entities/Chat.ts\nvar Chat = __webpack_require__(1582);\n// EXTERNAL MODULE: ./src/entities/Connection.ts\nvar Connection = __webpack_require__(5788);\n// EXTERNAL MODULE: ./src/entities/Profile.ts\nvar entities_Profile = __webpack_require__(3011);\n// EXTERNAL MODULE: ./src/entities/Room.ts\nvar Room = __webpack_require__(783);\n// EXTERNAL MODULE: ./src/entities/Session.ts\nvar entities_Session = __webpack_require__(98);\n// EXTERNAL MODULE: ./src/entities/Signal.ts\nvar Signal = __webpack_require__(188);\n// EXTERNAL MODULE: ./src/entities/User.ts\nvar User = __webpack_require__(1295);\n;// ./src/entities/index.ts\n\n\n\n\n\n\n\n\n\n// EXTERNAL MODULE: ./src/lib/utils/index.ts + 3 modules\nvar utils = __webpack_require__(8175);\n// EXTERNAL MODULE: ./src/services/intents.ts\nvar intents = __webpack_require__(6986);\n;// ./src/store/ChatProvider.tsx\n\n\n\n\n// Context obj\nconst ChatContext = (0,react.createContext)(null);\n// Provider obj\nconst ChatProvider = ({ children }) => {\n    const write = (0,react.useState)('');\n    const [unreadCount, setUnread] = (0,react.useState)(0);\n    const [readFlag, read] = (0,react.useState)(false);\n    const chat = useChat();\n    const clientId = useClientId();\n    (0,react.useEffect)(() => {\n        const sendMessageHandler = function () {\n            chat.add(clientId, write[0]);\n            write[1]('');\n        };\n        intents/* intentChest */.w3.on(intents/* INTENT_ACTIONS */.b_.SEND_MESSAGE, sendMessageHandler);\n        return () => intents/* intentChest */.w3.off(intents/* INTENT_ACTIONS */.b_.SEND_MESSAGE, sendMessageHandler);\n    }, [chat, clientId, write[0]]);\n    (0,react.useEffect)(() => {\n        setUnread(0);\n    }, [chat]);\n    (0,react.useEffect)(() => {\n        if (readFlag)\n            setUnread(0);\n    }, [readFlag]);\n    (0,react.useEffect)(() => {\n        if (!chat)\n            return;\n        const addMsgHandler = () => {\n            !readFlag && setUnread(unreadCount + 1);\n        };\n        chat.on('add', addMsgHandler);\n        return () => chat.off('add', addMsgHandler);\n    }, [unreadCount, chat, readFlag]);\n    return ((0,jsx_runtime.jsx)(ChatContext.Provider, { value: { write, unread: [unreadCount, read] }, children: children }));\n};\n/* harmony default export */ const store_ChatProvider = (ChatProvider);\n\n\n;// ./src/store/index.ts\n\n\n;// ./src/hooks/chatHooks.ts\n\n\n\n\n\n// PROVIDER HOOKS\nconst useWrite = () => {\n    return getChatContext()['write'];\n};\nconst useUnread = () => {\n    return getChatContext()['unread'];\n};\n// ROOM\nconst useRoom = () => {\n    const [room, setRoom] = (0,react.useState)(entities_Profile/* Profile */.W.room);\n    (0,react.useEffect)(() => {\n        const roomUpdatedHandler = function ({ room }) {\n            console.log('UPDATE ROOM AT HOOK', room);\n            setRoom(room);\n        };\n        entities_Profile/* Profile */.W.on(entities_Profile/* PROFILE_EVENTS */.U.UPDATE_ROOM, roomUpdatedHandler);\n        return () => entities_Profile/* Profile */.W.off(entities_Profile/* PROFILE_EVENTS */.U.UPDATE_ROOM, roomUpdatedHandler);\n    }, []);\n    return room;\n};\n// CHAT\nconst useChat = () => useRoom().chat;\nconst useChatFeed = () => {\n    const FEED_COUNT = 100;\n    const chat = useChat();\n    const [feed, setFeed] = (0,react.useState)(getFeed());\n    (0,utils/* addDebug */.H0)('feed', feed);\n    // === HELPERS ===\n    function getFeed() {\n        return chat.tail(FEED_COUNT);\n    }\n    (0,react.useEffect)(() => {\n        setFeed(getFeed());\n        const update = () => setFeed(getFeed());\n        (0,utils/* listen */.KT)(chat, {\n            [Chat/* CHAT_EVENTS */.N8.ADD]: update,\n            [Chat/* CHAT_EVENTS */.N8.DELETE]: update,\n            [Chat/* CHAT_EVENTS */.N8.CLEAR]: update,\n        });\n        return () => (0,utils/* unlisten */.Bo)(chat, {\n            [Chat/* CHAT_EVENTS */.N8.ADD]: update,\n            [Chat/* CHAT_EVENTS */.N8.DELETE]: update,\n            [Chat/* CHAT_EVENTS */.N8.CLEAR]: update,\n        });\n    }, [chat]);\n    return feed;\n};\n// CLIENT\nconst useClientId = () => {\n    (0,react.useEffect)(() => { });\n    return entities_Profile/* Profile */.W.id;\n};\nconst useClient = () => {\n    useEffect(() => { });\n    return Profile.user;\n};\n// TARGET\nconst useTargetId = () => {\n    const [targetIdState, setTargetIdState] = (0,react.useState)(entities_Session/* Session */.N.targetId);\n    (0,react.useEffect)(() => {\n        const nextTargetHandler = function ({ targetId }) {\n            setTargetIdState(targetId);\n        };\n        entities_Session/* Session */.N.on(entities_Session/* SESSION_EVENTS */.t.NEXT_TARGET, nextTargetHandler);\n        return () => entities_Session/* Session */.N.off(entities_Session/* SESSION_EVENTS */.t.NEXT_TARGET, nextTargetHandler);\n    }, []);\n    return targetIdState;\n};\nconst useTarget = () => {\n    const [targetState, setTargetState] = useState(Session.target);\n    useEffect(() => {\n        const nextTargetHandler = function ({ target }) {\n            setTargetState(target);\n        };\n        Session.on(SESSION_EVENTS.NEXT_TARGET, nextTargetHandler);\n        return () => Session.off(SESSION_EVENTS.NEXT_TARGET, nextTargetHandler);\n    }, []);\n    return targetState;\n};\n// GENERAL USER\nconst useUser = (id) => {\n    const room = useRoom();\n    const [user, setUser] = (0,react.useState)(getUser());\n    function getUser() {\n        if (id === null)\n            return;\n        return room.getUserById(id);\n    }\n    (0,react.useEffect)(() => {\n        setUser(getUser());\n        if (id === null)\n            return;\n        const updateUserHandler = function ({ userId, user }) {\n            if (userId !== id)\n                return;\n            setUser(user);\n        };\n        (0,utils/* listen */.KT)(room, {\n            [Room/* ROOM_EVENTS */.w.ADD_USER]: updateUserHandler,\n            [Room/* ROOM_EVENTS */.w.DEL_USER]: updateUserHandler,\n        });\n        return () => (0,utils/* unlisten */.Bo)(room, {\n            [Room/* ROOM_EVENTS */.w.ADD_USER]: updateUserHandler,\n            [Room/* ROOM_EVENTS */.w.DEL_USER]: updateUserHandler,\n        });\n    }, [room, id]);\n    return user;\n};\nconst useUserMedia = (userId) => {\n    const user = useUser(userId);\n    const [userMedia, setUserMedia] = (0,react.useState)(user?.getMedia() ?? null);\n    // Update Media\n    (0,react.useEffect)(() => {\n        console.log('UPDATE USER', user);\n        console.log('IS CLIENT', userId === entities_Profile/* Profile */.W.id);\n        console.log('IS TARGET', userId === entities_Session/* Session */.N.targetId);\n        setUserMedia(user ? user.getMedia() : null);\n        if (!user)\n            return;\n        const update = ({ userId: id, media }) => {\n            console.log('UPDATE USER MEDIA');\n            if (userId !== id)\n                return;\n            setUserMedia(media);\n        };\n        console.log('ON UPDATE MEDIA LISTENER');\n        user.on(User/* USER_EVENTS */.A.MEDIA, update);\n        return () => {\n            console.log('OFF UPDATE MEDIA LISTENER');\n            user.off(User/* USER_EVENTS */.A.MEDIA, update);\n        };\n    }, [user]);\n    return userMedia;\n};\nconst useClientMedia = () => {\n    const clientId = useClientId();\n    return useUserMedia(clientId);\n};\nconst useTargetMedia = () => {\n    const targetId = useTargetId();\n    return useUserMedia(targetId);\n};\n// === HELPERS ===\nfunction getChatContext(hookName) {\n    // === SUCCESS ===\n    const context = (0,react.useContext)(ChatContext);\n    if (context)\n        return context;\n    // === FAIL ===\n    let errMsg = '';\n    if (hookName)\n        errMsg = `${hookName} must be used within a ChatProvider`;\n    else\n        errMsg = 'useContext(ChatContext) should be called within the ChatProvider';\n    throw new Error(errMsg);\n}\n\n;// ./src/hooks/connectHooks.ts\n\n\n\nconst useConnection = () => {\n    const [connection, setConnection] = (0,react.useState)(entities_Session/* Session */.N.connection);\n    (0,react.useEffect)(() => {\n        const nextTargetHandler = function ({ connection }) {\n            setConnection(connection);\n        };\n        entities_Session/* Session */.N.on(entities_Session/* SESSION_EVENTS */.t.NEXT_TARGET, nextTargetHandler);\n        return () => entities_Session/* Session */.N.off(entities_Session/* SESSION_EVENTS */.t.NEXT_TARGET, nextTargetHandler);\n    }, []);\n    return connection;\n};\nconst useConnectionState = () => {\n    const connection = useConnection();\n    const [connectionState, setConnectionState] = (0,react.useState)(connection?.getState() ?? null);\n    (0,react.useEffect)(() => {\n        if (!connection)\n            return;\n        setConnectionState(connection.getState());\n        const stateUpdatedHandler = ({ state }) => {\n            setConnectionState(state);\n        };\n        connection.on(Connection/* CONNECTION_EVENTS */.J.STATE_UPDATED, stateUpdatedHandler);\n        return () => connection.off(Connection/* CONNECTION_EVENTS */.J.STATE_UPDATED, stateUpdatedHandler);\n    }, [connection]);\n    return connectionState;\n};\n\n// EXTERNAL MODULE: ./src/services/appAccessor.ts\nvar appAccessor = __webpack_require__(9605);\n;// ./src/hooks/useAppAccessor.ts\n\n\nconst { getAccess, when, set } = appAccessor/* appAcessor */.Qf;\nconst useAppAccessor = () => {\n    const [access, setAccess] = (0,react.useState)(getAccess());\n    (0,react.useEffect)(() => {\n        when(() => setAccess(getAccess()));\n    }, []);\n    return [access, set, when];\n};\n\n// EXTERNAL MODULE: ./node_modules/@vkruglikov/react-telegram-web-app/lib/react-telegram-web-app.modern.js\nvar react_telegram_web_app_modern = __webpack_require__(3584);\n;// ./src/hooks/useChangedHeight.ts\n\n\n\nconst webApp = (0,utils/* getWebApp */.C3)();\nif (!webApp)\n    throw Error('Undefined WebApp');\nconst getChangedHeight = defineChangedHeight(() => webApp.viewportHeight);\nconst useChangedHeight = (getCH = getChangedHeight) => {\n    const webApp = useWebApp();\n    if (!webApp)\n        throw Error('webApp was undefined');\n    const [changedHeight, setChangedHeight] = useState(getCH());\n    useLayoutEffect(() => {\n        function vpChangedHandler({ isStateStable }) {\n            if (!isStateStable)\n                return;\n            setChangedHeight(getCH());\n        }\n        webApp.onEvent('viewportChanged', vpChangedHandler);\n        return () => webApp.offEvent('viewportChanged', vpChangedHandler);\n    }, [webApp, getCH]);\n    return changedHeight;\n};\nfunction defineChangedHeight(getHeight) {\n    let changedHeight = 0;\n    let savedHeight = getHeight();\n    const getChangedHeight = () => {\n        const curHeight = getHeight();\n        changedHeight = savedHeight - curHeight;\n        savedHeight = curHeight;\n        //\n        return changedHeight;\n    };\n    return getChangedHeight;\n}\n\n;// ./src/hooks/useIsMobile.ts\n\n\n\nconst useIsMobile = () => {\n    const platform = usePlatform();\n    const [isMobile, setIsMobile] = (0,react.useState)(checkMobile(platform));\n    (0,react.useLayoutEffect)(() => {\n        setIsMobile(checkMobile(platform));\n    }, [platform]);\n    return isMobile;\n};\nfunction checkMobile(p) {\n    return p !== 'tdesktop' && p !== 'unknown';\n}\n(0,utils/* addDebug */.H0)('checkMobile', () => checkMobile(window.debug?.getPlatform()));\n\n// EXTERNAL MODULE: ./src/api/localMedia.ts\nvar localMedia = __webpack_require__(1978);\n;// ./src/hooks/useLocalMedia.ts\n\n\nconst useLocalMedia = () => {\n    const [localMedia, setLocalMedia] = useState(getLocalMedia());\n    useEffect(() => {\n        whenLocalMedia((media) => setLocalMedia(media));\n    }, []);\n    return localMedia;\n};\n\n;// ./src/hooks/useMaxHeight.ts\n\n\n\nconst useMaxHeight_webApp = (0,utils/* getWebApp */.C3)();\nif (!useMaxHeight_webApp)\n    throw Error('Undefined WebApp.');\nconst getMaxHeight = defineMaxHeight(() => useMaxHeight_webApp.viewportHeight);\nconst useMaxHeight = (getMX = getMaxHeight) => {\n    const webApp = (0,react_telegram_web_app_modern/* useWebApp */.nH)();\n    if (!webApp)\n        throw Error('webApp was undefined');\n    const [maxHeight, setMaxHeight] = (0,react.useState)(getMX());\n    (0,react.useEffect)(() => {\n        const vpChangedHandler = ({ isStateStable }) => {\n            if (!isStateStable)\n                return;\n            (0,utils/* addDebug */.H0)('maxHeight', getMX());\n            setMaxHeight(getMX());\n        };\n        webApp.onEvent('viewportChanged', vpChangedHandler);\n        return () => webApp.offEvent('viewportChanged', vpChangedHandler);\n    }, [webApp]);\n    return maxHeight;\n};\n// === HELPERS ===\nfunction defineMaxHeight(getHeight) {\n    let maxHeight = getHeight();\n    const getMaxHeight = () => {\n        const curHeight = getHeight();\n        maxHeight = curHeight > maxHeight ? curHeight : maxHeight;\n        //\n        return maxHeight;\n    };\n    return getMaxHeight;\n}\n\n;// ./src/hooks/useMobileKeyboard.ts\n\n\n\n\n\nconst MK_COEF = 0.95;\nconst useMobileKeyboard = () => {\n    const wapp = (0,react_telegram_web_app_modern/* useWebApp */.nH)();\n    const maxHeight = useMaxHeight();\n    const isMobile = useIsMobile();\n    //\n    const [mkb, setMkb] = (0,react.useState)(isMobile ? checkMobileKeyboard(wapp, maxHeight) : false);\n    (0,react.useEffect)(() => {\n        const vpChangedHandler = function () {\n            setMkb(isMobile ? checkMobileKeyboard(this, maxHeight) : false);\n        };\n        wapp.onEvent('viewportChanged', vpChangedHandler);\n        return () => wapp.offEvent('viewportChanged', vpChangedHandler);\n    }, [wapp, maxHeight, isMobile]);\n    return mkb;\n};\nfunction checkMobileKeyboard(webApp, maxHeight) {\n    if (!webApp) {\n        console.error('webApp is null or undefined');\n        return false;\n    }\n    return webApp.viewportHeight / maxHeight <= MK_COEF;\n}\n(0,utils/* addDebug */.H0)('checkMK', () => checkMobileKeyboard((0,utils/* getWebApp */.C3)(), window.debug?.maxHeight));\n\n;// ./src/hooks/usePlatform.ts\n\n\nconst chestOfUpdate = { updateSet: new Set(), updateMap: new Map() };\nconst [getPlatformVal, setPlatformVal] = definePlatform((0,utils/* getWebApp */.C3)(), chestOfUpdate);\nif (!window.debug)\n    window.debug = {};\n(0,utils/* addDebug */.H0)('setPlatform', setPlatformVal);\n(0,utils/* addDebug */.H0)('getPlatform', getPlatformVal);\nconst usePlatform = (getPl = getPlatformVal, chest = chestOfUpdate) => {\n    const [platform, setPlatform] = (0,react.useState)(getPl());\n    const [updater, update] = (0,react.useState)(false);\n    (0,react.useLayoutEffect)(() => {\n        chest.updateSet.add(update);\n        chest.updateMap.set(update, updater);\n        return () => {\n            chest.updateSet.delete(update);\n            chest.updateMap.delete(update);\n        };\n    }, []);\n    (0,react.useLayoutEffect)(() => {\n        setPlatform(getPl());\n    }, [updater]);\n    return platform;\n};\nfunction definePlatform(webApp, { updateSet, updateMap }) {\n    if (!webApp)\n        console.error('webApp arg is null');\n    let platform = webApp?.platform ?? 'unknown';\n    const getPlatform = () => {\n        return platform;\n    };\n    const setPlatform = (nextPlatform) => {\n        platform = nextPlatform;\n        updateSet.forEach((update) => update(!updateMap.get(update)));\n    };\n    return [getPlatform, setPlatform];\n}\n\n;// ./src/hooks/useResizeEl.ts\n\nconst useResizeEl = (el) => {\n    const [resize, setResize] = (0,react.useState)({ height: 0, width: 0 });\n    const rectRef = (0,react.useRef)(el?.getBoundingClientRect() ?? null);\n    const elRef = (0,react.useRef)(el);\n    const observerRef = (0,react.useRef)(new ResizeObserver((entries) => {\n        if (entries[0].target !== elRef.current)\n            throw Error(\"Incorrect 'el' of useResizeEl.\");\n        const curRect = entries[0].contentRect;\n        if (!rectRef.current || rectRef.current.height === undefined) {\n            rectRef.current = curRect;\n            console.log('INIT SAVED RECT', rectRef.current);\n            return;\n        }\n        setResize({\n            height: curRect.height - rectRef.current.height,\n            width: curRect.width - rectRef.current.width,\n        });\n        rectRef.current = curRect;\n    }));\n    const setEl = (0,react.useCallback)((el) => {\n        elRef.current && observerRef.current.unobserve(elRef.current);\n        observerRef.current.observe(el);\n        elRef.current = el;\n        rectRef.current = el.getBoundingClientRect();\n    }, []);\n    (0,react.useEffect)(() => {\n        el && setEl(el);\n        return () => observerRef.current.disconnect();\n    }, []);\n    return [resize, setEl];\n};\n\n;// ./src/hooks/useStart.ts\n\n\nconst useStart = (startAppHandler) => {\n    (0,react.useEffect)(() => {\n        intents/* intentChest */.w3.on(intents/* INTENT_ACTIONS */.b_.START_APP, startAppHandler);\n        return () => intents/* intentChest */.w3.off(intents/* INTENT_ACTIONS */.b_.START_APP, startAppHandler);\n    }, []);\n};\n\n;// ./src/hooks/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./src/components/DisplayBox.tsx\n\n/** @jsxImportSource @emotion/react */\n\n\nconst DisplayBox = ({ children, className }) => {\n    const maxHeight = useMaxHeight();\n    return ((0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"div\", { className: `\n                w-full\n                mx-auto\n                ${className}\n            `, css: (0,emotion_react_browser_esm/* css */.AH) `\n\t\t\t\theight: ${maxHeight / 3}px;\n\t\t\t`, children: children }));\n};\n/* harmony default export */ const components_DisplayBox = (DisplayBox);\n\n;// ./src/components/Btn.tsx\n\n\n// react component\nconst Btn = ({ className, children, type = 'button', disabled, ...props }) => ((0,jsx_runtime.jsx)(\"div\", { className: `touch-manipulation transition-opacity active:opacity-70\n        ${className ?? ''}\n        ${disabled ? 'opacity-50' : ''}\n    `, children: (0,jsx_runtime.jsx)(\"button\", { ...props, type: type, disabled: disabled, className: `w-full h-full py-3 px-2 text-center flex items-center justify-center gap-4 select-none disabled:pointer-events-none`, children: children }) }));\nconst SubmitBtn = (0,utils/* bindProps */.Ku)(Btn, { type: 'submit' });\nconst ResetBtn = (0,utils/* bindProps */.Ku)(Btn, { type: 'reset' });\n/* harmony default export */ const components_Btn = (Btn);\n\n\n;// ./src/assets/icon/add_user.svg\nconst add_user_namespaceObject = __webpack_require__.p + \"160d545ec9c7db5630b1.svg\";\n;// ./src/assets/icon/arrow_to_right.svg\nconst arrow_to_right_namespaceObject = __webpack_require__.p + \"a9294066a44751e9c75a.svg\";\n;// ./src/assets/icon/dialogue.svg\nconst dialogue_namespaceObject = __webpack_require__.p + \"2f1c0cb7b97a1eee54dc.svg\";\n;// ./src/containers/Controller.tsx\n\n\n\n\n\n\n\nconst MOBILE_HANDLER = 'onTouchEnd';\nconst DESKTOP_HANDLER = 'onClick';\nconst Controller = ({ onTextChat, onAddUser, onNext }) => {\n    const isMobile = useIsMobile();\n    const [unread] = useUnread();\n    const onTurn = (0,react.useMemo)(() => (isMobile ? MOBILE_HANDLER : DESKTOP_HANDLER), [isMobile]);\n    const connectionState = useConnectionState();\n    return ((0,jsx_runtime.jsxs)(\"section\", { className: \"\\n            flex items-stretch justify-between gap-3\\n            absolute bottom-0\\n            box-content w-full h-15 py-4\\n        \", children: [(0,jsx_runtime.jsxs)(components_Btn, { disabled: connectionState !== 'connected', className: \"bg-gray flex-grow-1 rounded-xl relative\", [onTurn]: onTextChat, children: [(0,jsx_runtime.jsx)(\"div\", { hidden: unread <= 0, className: \"absolute right-0 top-0 translate-x-[30%] translate-y-[-30%] bg-red rounded-full p-4\", children: (0,jsx_runtime.jsx)(\"span\", { className: \"\\n                        absolute top-0 left-0 w-full h-full\\n                        flex items-center justify-center\\n                        font-bold text-lg text-white\\n                    \", children: unread }) }), (0,jsx_runtime.jsx)(\"img\", { draggable: false, className: \"block pointer-events-none\", src: dialogue_namespaceObject })] }), (0,jsx_runtime.jsx)(components_Btn, { disabled: true, className: \"bg-gray flex-grow-1 rounded-xl\", [onTurn]: onAddUser, children: (0,jsx_runtime.jsx)(\"img\", { draggable: false, className: \"block pointer-events-none\", src: add_user_namespaceObject }) }), (0,jsx_runtime.jsxs)(components_Btn, { disabled: connectionState !== 'connected', className: \"bg-light-blue flex-grow-3 rounded-xl\", [onTurn]: onNext, children: [(0,jsx_runtime.jsx)(\"span\", { className: \"text-2xl font-bold\", children: \"NEXT\" }), (0,jsx_runtime.jsx)(\"img\", { draggable: false, className: \"pointer-events-none\", src: arrow_to_right_namespaceObject })] })] }));\n};\n/* harmony default export */ const containers_Controller = (Controller);\n\n;// ./src/assets/img/empty_video.png\nconst empty_video_namespaceObject = __webpack_require__.p + \"7de99beedc66e316f810.png\";\n;// ./src/components/Video.tsx\n\n\nconst Video = (0,react.forwardRef)(({ className, children, hidden = false, show = true, mirror = false, ...props }, ref) => {\n    const videoClassName = className ?? '';\n    const videoRef = (0,react.useRef)(null);\n    // === REF DEFINE ===\n    (0,react.useEffect)(() => {\n        if (!videoRef.current)\n            throw Error(\"'Video' component has not rendered at DOM.\");\n        if (!ref)\n            return;\n        if (typeof ref === 'function') {\n            ref(videoRef.current);\n        }\n        else {\n            ref.current = videoRef.current;\n        }\n        return () => {\n            if (typeof ref === 'function') {\n                ref(null);\n            }\n            else {\n                ref.current = null;\n            }\n        };\n    }, []);\n    return ((0,jsx_runtime.jsxs)(\"section\", { hidden: hidden, className: 'relative aspect-video overflow-clip w-full h-full', children: [(0,jsx_runtime.jsx)(\"video\", { ...props, ref: videoRef, className: `${videoClassName}\n                    ${mirror ? 'scale-x-[-1]' : ''}\n                    aspect-video w-full\n                    object-cover [object-position:center_center] block\n                ` }), !show && children] }));\n});\n/* harmony default export */ const components_Video = (Video);\n\n;// ./src/containers/VideoStream.tsx\n\n\n\n\n\n\n\nconst VideoStream = ({ className, remote, hidden = false }) => {\n    const videoChatClassName = className ?? '';\n    const useMedia = remote ? useTargetMedia : useClientMedia;\n    const video = (0,react.useRef)(null);\n    const connectionState = useConnectionState();\n    const [show, setShow] = (0,react.useState)(false);\n    const media = useMedia();\n    const [, setAccessFlag] = useAppAccessor();\n    // General effect\n    (0,react.useEffect)(() => {\n        if (!video.current)\n            return;\n        video.current.getAttribute('id') &&\n            (0,utils/* addDebug */.H0)(video.current.getAttribute('id'), video.current);\n        // === HANDLERS ===\n        const pauseHandler = (evt) => {\n            evt.target?.load();\n            evt.target?.play();\n        };\n        // === ADD LISTENERS ===\n        video.current.onpause = pauseHandler;\n        return () => {\n            // === REMOVE LISTENERS ===\n            if (video.current)\n                video.current.onpause = null;\n        };\n    }, []);\n    // Rules for playing or pausing local video\n    (0,react.useEffect)(() => {\n        if (remote)\n            return;\n        if (!video.current)\n            return;\n        // whenLocalMedia(() => {\n        // \tconsole.log('PLAY LOCAL MEDIA');\n        // \tvideo.current?.play();\n        // });\n        video.current.onplaying = () => setShow(true);\n        video.current.onwaiting = () => setShow(false);\n        video.current.onended = () => setShow(false);\n        video.current.onstalled = () => setShow(false);\n        return () => {\n            if (!video.current)\n                return;\n            video.current.onplaying = () => setShow(true);\n            video.current.onwaiting = () => setShow(false);\n            video.current.onended = () => setShow(false);\n            video.current.onstalled = () => setShow(false);\n        };\n    }, [remote]);\n    // Play remote video when user turn START and set appropriate APP FLAG\n    useStart(() => {\n        // if (!remote) return;\n        if (!video.current?.paused)\n            return;\n        console.log('START APP');\n        video.current.play();\n        setAccessFlag(appAccessor/* ACC_FLAGS */.sW.PLAY_REMOTE_VIDEO);\n    });\n    // Update media\n    (0,react.useEffect)(() => {\n        if (!video.current)\n            return;\n        video.current.srcObject = media;\n    }, [media]);\n    // if REMOTE and only CONNECTED: show = true\n    (0,react.useEffect)(() => {\n        if (!remote)\n            return;\n        if (connectionState === 'connected')\n            setShow(true);\n        else\n            setShow(false);\n    }, [connectionState, remote]);\n    return ((0,jsx_runtime.jsx)(\"section\", { hidden: hidden, className: videoChatClassName + ' relative w-full h-full rounded-xl flex items-center overflow-clip', children: (0,jsx_runtime.jsx)(components_Video, { show: show, autoPlay: true, ref: video, playsInline: true, muted: !remote, id: remote ? 'remoteVideo' : 'localVideo', className: \"scale-x-[-1] aspect-video w-full h-full object-fit [object-position:center_center] block\", children: (0,jsx_runtime.jsx)(\"div\", { className: \"absolute top-0 bottom-0 left-0 right-0 bg-cloud\", children: (0,jsx_runtime.jsx)(\"img\", { src: empty_video_namespaceObject, className: \"pointer-events-none block top-0 bottom-0 left-0 right-0 absolute m-auto\" }) }) }) }));\n};\n/* harmony default export */ const containers_VideoStream = (VideoStream);\n\n;// ./src/components/MessageBlock.tsx\n\nconst MessageBlock = ({ sender, text, direction }) => ((0,jsx_runtime.jsxs)(\"section\", { className: `mb-2 p-2 rounded-2xl w-2/3 relative\n        ${direction === 'left'\n        ? 'bg-gray rounded-bl-none left-2'\n        : 'bg-light-blue rounded-br-none right-2 ml-auto'}`, children: [(0,jsx_runtime.jsx)(\"span\", { className: `block font-semibold ${direction === 'left' ? 'text-light-blue' : 'text-orange'}`, children: sender }), (0,jsx_runtime.jsx)(\"p\", { className: \"text-white\", children: text }), (0,jsx_runtime.jsx)(\"div\", { className: `\n            absolute w-0 h-0 bottom-0\n            border-t-transparent border-3\n            ${direction === 'left'\n                ? 'border-gray border-l-transparent right-full'\n                : 'border-light-blue border-r-transparent left-full'}\n        ` })] }));\n/* harmony default export */ const components_MessageBlock = (MessageBlock);\n\n;// ./src/components/MessageList.tsx\n\n\n\n\nconst MessageList = (0,react.forwardRef)(({ history }, ref) => {\n    const listRef = (0,react.useRef)(null);\n    const client = useClientId();\n    (0,react.useEffect)(() => {\n        if (ref) {\n            if (typeof ref === 'function')\n                ref(listRef.current);\n            else\n                ref.current = listRef.current;\n        }\n    }, []);\n    return ((0,jsx_runtime.jsx)(\"ul\", { ref: listRef, className: \"px-2\", children: history.map((sMsgItem, index) => {\n            const [sender, direction] = sMsgItem.userId === client\n                ? ['', 'right']\n                : ['', 'left'];\n            return ((0,jsx_runtime.jsx)(\"li\", { className: `${index === history.length - 1 ? 'mb-0' : 'mb-2'}`, children: (0,jsx_runtime.jsx)(components_MessageBlock, { sender: sender, text: sMsgItem.text, direction: direction }, index) }));\n        }) }));\n});\n/* harmony default export */ const components_MessageList = (MessageList);\n\n;// ./src/components/MessageInput.tsx\n\n\nconst MessageInput = (0,react.forwardRef)(({ className, ...props }, inputRef) => {\n    return ((0,jsx_runtime.jsx)(\"textarea\", { ...props, ref: inputRef, style: { resize: 'none' }, className: `p-2 text-xl outline-0 bg-gray text-white rounded-xl border border-light-blue ${className}` }));\n});\n/* harmony default export */ const components_MessageInput = (MessageInput);\n\n;// ./src/assets/icon/send.svg\nconst send_namespaceObject = __webpack_require__.p + \"68f7d6e54858f12f4fc6.svg\";\n;// ./src/containers/MessageForm.tsx\n\n\n\n\n\n\nconst MessageForm = ({ className, onPush }) => {\n    const pending = false;\n    //\n    const isMobileKeyboard = useMobileKeyboard();\n    const [write, setWrite] = useWrite();\n    const [pos, setPos] = (0,react.useState)('block');\n    const inputRef = (0,react.useRef)(null);\n    const [blur, setBlur] = (0,react.useState)(true);\n    const asyncFocusInput = () => {\n        setTimeout(() => {\n            inputRef.current?.setAttribute('readonly', 'true');\n            inputRef.current?.focus();\n            inputRef.current?.removeAttribute('readonly');\n        });\n    };\n    const typeHandler = (0,react.useCallback)(function (evt) {\n        setWrite(evt.target?.value);\n    }, []);\n    //\n    const submitHandler = (0,react.useCallback)(function (evt) {\n        evt.preventDefault();\n        isMobileKeyboard ? inputRef.current?.focus() : asyncFocusInput();\n        if (write === '')\n            return;\n        onPush?.(write);\n        setWrite('');\n    }, [write, isMobileKeyboard, onPush]);\n    (0,react.useEffect)(() => {\n        inputRef.current.onblur = () => setBlur(true);\n        inputRef.current.onfocus = () => setBlur(false);\n    }, []);\n    (0,react.useEffect)(() => {\n        if (!blur)\n            return;\n        asyncFocusInput();\n    }, [blur]);\n    (0,react.useLayoutEffect)(() => {\n        setPos(isMobileKeyboard ? 'absolute' : 'block');\n    }, [isMobileKeyboard]);\n    return ((0,jsx_runtime.jsxs)(\"form\", { className: `${className}\n            ${pos} z-1\n            w-full h-15 mx-auto\n            box-border pb-1 pt-2\n            flex flex-row gap-1 bottom-0`, action: \"\", children: [(0,jsx_runtime.jsx)(components_MessageInput, { ref: inputRef, disabled: pending, className: \"grow\", onChange: typeHandler, value: write }), (0,jsx_runtime.jsx)(SubmitBtn, { disabled: pending, onClick: submitHandler, className: \"bg-gray rounded-lg shrink-0 w-10\", children: (0,jsx_runtime.jsx)(\"img\", { draggable: false, src: send_namespaceObject, className: \"block h-full scale-200 relative right-1 pointer-events-none\" }) })] }));\n};\n/* harmony default export */ const containers_MessageForm = (MessageForm);\n\n;// ./src/containers/GraphicChat.tsx\n\n\n\n\n\n\nconst GraphicChat = ({ className, hidden = false }) => {\n    const feed = useChatFeed();\n    const listRef = (0,react.useRef)(null);\n    const [resizeList, setList] = useResizeEl();\n    // === HELPERS ===\n    function scrollY({ top = listRef.current?.scrollHeight, behavior = 'instant' }, by = false) {\n        if (hidden || !top)\n            return;\n        listRef.current?.[by ? 'scrollBy' : 'scrollTo']({ top, behavior });\n    }\n    (0,react.useEffect)(() => {\n        setList(listRef.current);\n    }, []);\n    (0,react.useLayoutEffect)(() => scrollY({ behavior: 'smooth' }), [feed]);\n    (0,react.useLayoutEffect)(() => scrollY({ behavior: 'instant' }), [hidden]);\n    (0,react.useLayoutEffect)(() => {\n        if (resizeList.height > 0)\n            return;\n        console.log('SCROLL BY CHANGED HEIGHT', resizeList);\n        scrollY({ behavior: 'instant', top: -resizeList.height }, true);\n    }, [resizeList]);\n    return ((0,jsx_runtime.jsxs)(\"article\", { hidden: hidden, className: `h-full w-full flex flex-col ${className}`, children: [(0,jsx_runtime.jsx)(\"section\", { ref: listRef, className: \"overflow-y-scroll grow-1 shrink-1\", children: (0,jsx_runtime.jsx)(components_MessageList, { history: feed }) }), (0,jsx_runtime.jsx)(\"section\", { className: \"shrink-0 h-15 box-border\", children: !hidden && ((0,jsx_runtime.jsx)(containers_MessageForm, { className: \"mt-auto shrink-0\", onPush: () => intents/* DO_INTENT */.lZ[intents/* INTENT_ACTIONS */.b_.SEND_MESSAGE]() })) })] }));\n};\n/* harmony default export */ const containers_GraphicChat = (GraphicChat);\n\n;// ./src/containers/Main.tsx\n\n/** @jsxImportSource @emotion/react */\n\n\n\n\n\n\n\n\n\n\n\n\nconst Main = () => {\n    const webApp = (0,react_telegram_web_app_modern/* useWebApp */.nH)();\n    const connection = useConnection();\n    const connectionState = useConnectionState();\n    const keyboardStatus = useMobileKeyboard();\n    const [, read] = useUnread();\n    const platform = usePlatform();\n    const [access] = useAppAccessor();\n    const [isTextChatShown, setIsTextChatShown] = (0,react.useState)(false);\n    const [modal, setModal] = (0,react.useState)(0);\n    const mainCss = (0,emotion_react_browser_esm/* css */.AH) `\n\t\ttop: ${platform !== 'unknown' ? 'var(--tg-content-safe-area-inset-top)' : 0};\n\t\tbottom: ${platform !== 'unknown' ? 'var(--tg-content-safe-area-inset-bottom)' : 0};\n\n\t\tmax-height: var(--tg-viewport-stable-height);\n\t\toverflow: clip;\n\t`;\n    useStart(() => {\n        setModal(-1);\n        (0,localMedia/* whenLocalMedia */.OS)(() => setModal(1));\n    });\n    (0,react.useLayoutEffect)(() => {\n        if (connectionState !== 'connected')\n            setIsTextChatShown(false);\n    }, [connectionState]);\n    (0,react.useEffect)(() => {\n        if (isTextChatShown)\n            read(true);\n        else\n            read(false);\n    }, [isTextChatShown]);\n    return ((0,emotion_react_jsx_runtime_browser_esm/* jsxs */.FD)(emotion_react_jsx_runtime_browser_esm/* Fragment */.FK, { children: [(0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"div\", { className: `w-full fixed px-3 md:px-8 box-border`, css: mainCss, children: (0,emotion_react_jsx_runtime_browser_esm/* jsxs */.FD)(\"section\", { className: \"\\n            container max-w-xl h-full\\n            relative mx-auto text-white\\n            flex flex-col\\n        \", children: [(0,emotion_react_jsx_runtime_browser_esm/* jsxs */.FD)(\"section\", { className: `grow flex flex-col gap-10 pt-8 ${keyboardStatus ? 'pb-0' : 'pb-8'} absolute top-0 bottom-0 w-full`, children: [(0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(components_DisplayBox, { className: \"flex items-center overflow-hidden shrink-0\", children: (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(containers_VideoStream, { remote: true }) }), (0,emotion_react_jsx_runtime_browser_esm/* jsxs */.FD)(components_DisplayBox, { className: \"flex items-center overflow-hidden\", children: [(0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(containers_GraphicChat, { hidden: !isTextChatShown }), (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(containers_VideoStream, { remote: false, hidden: isTextChatShown })] })] }), (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"div\", { style: { display: keyboardStatus ? 'none' : 'block' }, className: \"shrink-0 h-24\", children: (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(containers_Controller, { onNext: () => {\n                                    if (connectionState !== 'connected')\n                                        return;\n                                    if (!connection)\n                                        throw Error('`connection` is null or undefined');\n                                    connection.close();\n                                }, onTextChat: () => {\n                                    setIsTextChatShown(!isTextChatShown);\n                                } }) })] }) }), (0,emotion_react_jsx_runtime_browser_esm/* jsxs */.FD)(\"div\", { hidden: access, className: \"fixed w-full h-full bg-white/30 flex justify-center items-center flex-col\", children: [(0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"section\", { hidden: modal !== 0, className: \"bg-gray text-white rounded-2xl p-4 h-[50%] w-[90%]\", children: (0,emotion_react_jsx_runtime_browser_esm/* jsxs */.FD)(\"section\", { className: \"w-full h-full flex flex-col justify-center\", children: [(0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"p\", { className: \"mb-2 mt-auto text-xl\", children: \"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C \\u0432 \\u0447\\u0430\\u0442-\\u0440\\u0443\\u043B\\u0435\\u0442\\u043A\\u0443! \\u0427\\u0442\\u043E\\u0431\\u044B \\u043D\\u0430\\u0447\\u0430\\u0442\\u044C, \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C\\\" \\u0438 \\u0440\\u0430\\u0437\\u0440\\u0435\\u0448\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044E \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F \\u043A \\u0412\\u0430\\u0448\\u0438\\u043C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u0441\\u043A\\u0438\\u043C \\u043C\\u0435\\u0434\\u0438\\u0430\" }), (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(components_Btn, { onClick: () => intents/* DO_INTENT */.lZ[intents/* INTENT_ACTIONS */.b_.START_APP](), className: \"border-2 border-white rounded-2xl mt-auto\", children: (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"span\", { className: \"font-bold uppercase\", children: \"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C\" }) })] }) }), (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"section\", { hidden: modal !== 1, className: \"bg-gray text-white rounded-2xl p-4 h-[50%] w-[90%]\", children: (0,emotion_react_jsx_runtime_browser_esm/* jsxs */.FD)(\"section\", { className: \"w-full h-full flex flex-col justify-center\", children: [(0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"p\", { className: \"mb-2 text-xl\", children: \"\\u041F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0435 \\u0441\\u043C\\u043E\\u0433\\u043B\\u043E \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F \\u043A \\u0412\\u0430\\u0448\\u0438\\u043C \\u043A\\u0430\\u043C\\u0435\\u0440\\u0435 \\u0438 \\u043C\\u0438\\u043A\\u0440\\u043E\\u0444\\u043E\\u043D\\u0443, \\u0443\\u0432\\u044B.\" }), (0,emotion_react_jsx_runtime_browser_esm/* jsx */.Y)(\"p\", { className: \"mb-2 text-xl\", children: \"\\u0427\\u0442\\u043E\\u0431\\u044B \\u043F\\u043E\\u043F\\u0440\\u043E\\u0431\\u043E\\u0432\\u0430\\u0442\\u044C \\u0435\\u0449\\u0451 \\u0440\\u0430\\u0437, \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443.\" })] }) })] })] }));\n};\n/* harmony default export */ const containers_Main = (Main);\n\n;// ./src/App.tsx\n\n\n\n\n\nconst MemoMain = react.memo(containers_Main);\nconst MemoChatProvider = react.memo(store_ChatProvider);\nconst App = () => ((0,jsx_runtime.jsx)(react_telegram_web_app_modern/* WebAppProvider */.n3, { children: (0,jsx_runtime.jsx)(MemoChatProvider, { children: (0,jsx_runtime.jsx)(MemoMain, {}) }) }));\n/* harmony default export */ const src_App = (App);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a1QsSUFBSSxHQUFHLElBQUksSUFBSTtBQUNwd0U7QUFDQSxzREFBZSxJQUFJLEVBQUM7OztBQ3ZENEI7QUFDdEI7QUFDVztBQUNVO0FBQ3FCO0FBQ3BFLGlCQUFpQixVQUFVLENBQUMsZUFBSTtBQUNoQyx5QkFBeUIsVUFBVSxDQUFDLGtCQUFZO0FBQ2hELG1CQUFtQixtQkFBSSxDQUFDLG9EQUFjLElBQUksVUFBVSxtQkFBSSxxQkFBcUIsVUFBVSxtQkFBSSxhQUFhLEdBQUcsR0FBRztBQUM5Ryw4Q0FBZSxHQUFHLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9lbnRpdGllcy9pbmRleC50cz80MjA5Iiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL3N0b3JlL0NoYXRQcm92aWRlci50c3g/NjlmNSIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9zdG9yZS9pbmRleC50cz83YTFhIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2hvb2tzL2NoYXRIb29rcy50cz84MTEzIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2hvb2tzL2Nvbm5lY3RIb29rcy50cz82NGVkIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2hvb2tzL3VzZUFwcEFjY2Vzc29yLnRzP2RhNWEiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvaG9va3MvdXNlQ2hhbmdlZEhlaWdodC50cz9lOTI4Iiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2hvb2tzL3VzZUlzTW9iaWxlLnRzPzJhOGIiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvaG9va3MvdXNlTG9jYWxNZWRpYS50cz9jNmQ3Iiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2hvb2tzL3VzZU1heEhlaWdodC50cz9iNjZlIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2hvb2tzL3VzZU1vYmlsZUtleWJvYXJkLnRzPzg3YjAiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvaG9va3MvdXNlUGxhdGZvcm0udHM/ZThhYyIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9ob29rcy91c2VSZXNpemVFbC50cz85ZDdhIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2hvb2tzL3VzZVN0YXJ0LnRzPzlkNmYiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvaG9va3MvaW5kZXgudHM/YzAyZiIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9jb21wb25lbnRzL0Rpc3BsYXlCb3gudHN4PzYxODAiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvY29tcG9uZW50cy9CdG4udHN4PzlmY2YiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvY29udGFpbmVycy9Db250cm9sbGVyLnRzeD8xYTZiIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2NvbXBvbmVudHMvVmlkZW8udHN4PzUwMGYiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvY29udGFpbmVycy9WaWRlb1N0cmVhbS50c3g/MTA1OCIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9jb21wb25lbnRzL01lc3NhZ2VCbG9jay50c3g/MWMyOSIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9jb21wb25lbnRzL01lc3NhZ2VMaXN0LnRzeD85MDFkIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2NvbXBvbmVudHMvTWVzc2FnZUlucHV0LnRzeD83ZDRmIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2NvbnRhaW5lcnMvTWVzc2FnZUZvcm0udHN4P2ZkZjciLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvY29udGFpbmVycy9HcmFwaGljQ2hhdC50c3g/NGEyYiIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9jb250YWluZXJzL01haW4udHN4P2M2MjUiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvQXBwLnRzeD8wNzcxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vQ2hhdCc7XG5leHBvcnQgKiBmcm9tICcuL0Nvbm5lY3Rpb24nO1xuZXhwb3J0ICogZnJvbSAnLi9QZWVyRW50aXR5JztcbmV4cG9ydCAqIGZyb20gJy4vUHJvZmlsZSc7XG5leHBvcnQgKiBmcm9tICcuL1Jvb20nO1xuZXhwb3J0ICogZnJvbSAnLi9TZXNzaW9uJztcbmV4cG9ydCAqIGZyb20gJy4vU2lnbmFsJztcbmV4cG9ydCAqIGZyb20gJy4vVXNlcic7XG4iLCJpbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgdXNlQ2hhdCwgdXNlQ2xpZW50SWQgfSBmcm9tICdAaG9va3MnO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IElOVEVOVF9BQ1RJT05TLCBpbnRlbnRDaGVzdCB9IGZyb20gJ0BzZXJ2aWNlcy9pbnRlbnRzJztcbi8vIENvbnRleHQgb2JqXG5jb25zdCBDaGF0Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCk7XG4vLyBQcm92aWRlciBvYmpcbmNvbnN0IENoYXRQcm92aWRlciA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgICBjb25zdCB3cml0ZSA9IHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbdW5yZWFkQ291bnQsIHNldFVucmVhZF0gPSB1c2VTdGF0ZSgwKTtcbiAgICBjb25zdCBbcmVhZEZsYWcsIHJlYWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGNoYXQgPSB1c2VDaGF0KCk7XG4gICAgY29uc3QgY2xpZW50SWQgPSB1c2VDbGllbnRJZCgpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbmRNZXNzYWdlSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNoYXQuYWRkKGNsaWVudElkLCB3cml0ZVswXSk7XG4gICAgICAgICAgICB3cml0ZVsxXSgnJyk7XG4gICAgICAgIH07XG4gICAgICAgIGludGVudENoZXN0Lm9uKElOVEVOVF9BQ1RJT05TLlNFTkRfTUVTU0FHRSwgc2VuZE1lc3NhZ2VIYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGludGVudENoZXN0Lm9mZihJTlRFTlRfQUNUSU9OUy5TRU5EX01FU1NBR0UsIHNlbmRNZXNzYWdlSGFuZGxlcik7XG4gICAgfSwgW2NoYXQsIGNsaWVudElkLCB3cml0ZVswXV0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldFVucmVhZCgwKTtcbiAgICB9LCBbY2hhdF0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChyZWFkRmxhZylcbiAgICAgICAgICAgIHNldFVucmVhZCgwKTtcbiAgICB9LCBbcmVhZEZsYWddKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNoYXQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGFkZE1zZ0hhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAhcmVhZEZsYWcgJiYgc2V0VW5yZWFkKHVucmVhZENvdW50ICsgMSk7XG4gICAgICAgIH07XG4gICAgICAgIGNoYXQub24oJ2FkZCcsIGFkZE1zZ0hhbmRsZXIpO1xuICAgICAgICByZXR1cm4gKCkgPT4gY2hhdC5vZmYoJ2FkZCcsIGFkZE1zZ0hhbmRsZXIpO1xuICAgIH0sIFt1bnJlYWRDb3VudCwgY2hhdCwgcmVhZEZsYWddKTtcbiAgICByZXR1cm4gKF9qc3goQ2hhdENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgd3JpdGUsIHVucmVhZDogW3VucmVhZENvdW50LCByZWFkXSB9LCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IENoYXRQcm92aWRlcjtcbmV4cG9ydCB7IENoYXRDb250ZXh0IH07XG4iLCJleHBvcnQgKiBmcm9tICcuL0NoYXRQcm92aWRlcic7XG4iLCJpbXBvcnQgeyBDSEFUX0VWRU5UUywgU2Vzc2lvbiwgVVNFUl9FVkVOVFMsIFNFU1NJT05fRVZFTlRTLCBQcm9maWxlLCBQUk9GSUxFX0VWRU5UUywgfSBmcm9tICdAZW50aXRpZXMnO1xuaW1wb3J0IHsgYWRkRGVidWcsIGxpc3RlbiwgdW5saXN0ZW4gfSBmcm9tICdAbGliL3V0aWxzJztcbmltcG9ydCB7IENoYXRDb250ZXh0IH0gZnJvbSAnQHN0b3JlJztcbmltcG9ydCB7IHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBST09NX0VWRU5UUyB9IGZyb20gJ0BlbnRpdGllcy9Sb29tJztcbi8vIFBST1ZJREVSIEhPT0tTXG5leHBvcnQgY29uc3QgdXNlV3JpdGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGdldENoYXRDb250ZXh0KClbJ3dyaXRlJ107XG59O1xuZXhwb3J0IGNvbnN0IHVzZVVucmVhZCA9ICgpID0+IHtcbiAgICByZXR1cm4gZ2V0Q2hhdENvbnRleHQoKVsndW5yZWFkJ107XG59O1xuLy8gUk9PTVxuZXhwb3J0IGNvbnN0IHVzZVJvb20gPSAoKSA9PiB7XG4gICAgY29uc3QgW3Jvb20sIHNldFJvb21dID0gdXNlU3RhdGUoUHJvZmlsZS5yb29tKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCByb29tVXBkYXRlZEhhbmRsZXIgPSBmdW5jdGlvbiAoeyByb29tIH0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVUERBVEUgUk9PTSBBVCBIT09LJywgcm9vbSk7XG4gICAgICAgICAgICBzZXRSb29tKHJvb20pO1xuICAgICAgICB9O1xuICAgICAgICBQcm9maWxlLm9uKFBST0ZJTEVfRVZFTlRTLlVQREFURV9ST09NLCByb29tVXBkYXRlZEhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gKCkgPT4gUHJvZmlsZS5vZmYoUFJPRklMRV9FVkVOVFMuVVBEQVRFX1JPT00sIHJvb21VcGRhdGVkSGFuZGxlcik7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiByb29tO1xufTtcbi8vIENIQVRcbmV4cG9ydCBjb25zdCB1c2VDaGF0ID0gKCkgPT4gdXNlUm9vbSgpLmNoYXQ7XG5leHBvcnQgY29uc3QgdXNlQ2hhdEZlZWQgPSAoKSA9PiB7XG4gICAgY29uc3QgRkVFRF9DT1VOVCA9IDEwMDtcbiAgICBjb25zdCBjaGF0ID0gdXNlQ2hhdCgpO1xuICAgIGNvbnN0IFtmZWVkLCBzZXRGZWVkXSA9IHVzZVN0YXRlKGdldEZlZWQoKSk7XG4gICAgYWRkRGVidWcoJ2ZlZWQnLCBmZWVkKTtcbiAgICAvLyA9PT0gSEVMUEVSUyA9PT1cbiAgICBmdW5jdGlvbiBnZXRGZWVkKCkge1xuICAgICAgICByZXR1cm4gY2hhdC50YWlsKEZFRURfQ09VTlQpO1xuICAgIH1cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRGZWVkKGdldEZlZWQoKSk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHNldEZlZWQoZ2V0RmVlZCgpKTtcbiAgICAgICAgbGlzdGVuKGNoYXQsIHtcbiAgICAgICAgICAgIFtDSEFUX0VWRU5UUy5BRERdOiB1cGRhdGUsXG4gICAgICAgICAgICBbQ0hBVF9FVkVOVFMuREVMRVRFXTogdXBkYXRlLFxuICAgICAgICAgICAgW0NIQVRfRVZFTlRTLkNMRUFSXTogdXBkYXRlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHVubGlzdGVuKGNoYXQsIHtcbiAgICAgICAgICAgIFtDSEFUX0VWRU5UUy5BRERdOiB1cGRhdGUsXG4gICAgICAgICAgICBbQ0hBVF9FVkVOVFMuREVMRVRFXTogdXBkYXRlLFxuICAgICAgICAgICAgW0NIQVRfRVZFTlRTLkNMRUFSXTogdXBkYXRlLFxuICAgICAgICB9KTtcbiAgICB9LCBbY2hhdF0pO1xuICAgIHJldHVybiBmZWVkO1xufTtcbi8vIENMSUVOVFxuZXhwb3J0IGNvbnN0IHVzZUNsaWVudElkID0gKCkgPT4ge1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBQcm9maWxlLmlkO1xufTtcbmV4cG9ydCBjb25zdCB1c2VDbGllbnQgPSAoKSA9PiB7XG4gICAgdXNlRWZmZWN0KCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIFByb2ZpbGUudXNlcjtcbn07XG4vLyBUQVJHRVRcbmV4cG9ydCBjb25zdCB1c2VUYXJnZXRJZCA9ICgpID0+IHtcbiAgICBjb25zdCBbdGFyZ2V0SWRTdGF0ZSwgc2V0VGFyZ2V0SWRTdGF0ZV0gPSB1c2VTdGF0ZShTZXNzaW9uLnRhcmdldElkKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXh0VGFyZ2V0SGFuZGxlciA9IGZ1bmN0aW9uICh7IHRhcmdldElkIH0pIHtcbiAgICAgICAgICAgIHNldFRhcmdldElkU3RhdGUodGFyZ2V0SWQpO1xuICAgICAgICB9O1xuICAgICAgICBTZXNzaW9uLm9uKFNFU1NJT05fRVZFTlRTLk5FWFRfVEFSR0VULCBuZXh0VGFyZ2V0SGFuZGxlcik7XG4gICAgICAgIHJldHVybiAoKSA9PiBTZXNzaW9uLm9mZihTRVNTSU9OX0VWRU5UUy5ORVhUX1RBUkdFVCwgbmV4dFRhcmdldEhhbmRsZXIpO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gdGFyZ2V0SWRTdGF0ZTtcbn07XG5leHBvcnQgY29uc3QgdXNlVGFyZ2V0ID0gKCkgPT4ge1xuICAgIGNvbnN0IFt0YXJnZXRTdGF0ZSwgc2V0VGFyZ2V0U3RhdGVdID0gdXNlU3RhdGUoU2Vzc2lvbi50YXJnZXQpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHRUYXJnZXRIYW5kbGVyID0gZnVuY3Rpb24gKHsgdGFyZ2V0IH0pIHtcbiAgICAgICAgICAgIHNldFRhcmdldFN0YXRlKHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgICAgIFNlc3Npb24ub24oU0VTU0lPTl9FVkVOVFMuTkVYVF9UQVJHRVQsIG5leHRUYXJnZXRIYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IFNlc3Npb24ub2ZmKFNFU1NJT05fRVZFTlRTLk5FWFRfVEFSR0VULCBuZXh0VGFyZ2V0SGFuZGxlcik7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB0YXJnZXRTdGF0ZTtcbn07XG4vLyBHRU5FUkFMIFVTRVJcbmV4cG9ydCBjb25zdCB1c2VVc2VyID0gKGlkKSA9PiB7XG4gICAgY29uc3Qgcm9vbSA9IHVzZVJvb20oKTtcbiAgICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZShnZXRVc2VyKCkpO1xuICAgIGZ1bmN0aW9uIGdldFVzZXIoKSB7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHJvb20uZ2V0VXNlckJ5SWQoaWQpO1xuICAgIH1cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRVc2VyKGdldFVzZXIoKSk7XG4gICAgICAgIGlmIChpZCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdXBkYXRlVXNlckhhbmRsZXIgPSBmdW5jdGlvbiAoeyB1c2VySWQsIHVzZXIgfSkge1xuICAgICAgICAgICAgaWYgKHVzZXJJZCAhPT0gaWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc2V0VXNlcih1c2VyKTtcbiAgICAgICAgfTtcbiAgICAgICAgbGlzdGVuKHJvb20sIHtcbiAgICAgICAgICAgIFtST09NX0VWRU5UUy5BRERfVVNFUl06IHVwZGF0ZVVzZXJIYW5kbGVyLFxuICAgICAgICAgICAgW1JPT01fRVZFTlRTLkRFTF9VU0VSXTogdXBkYXRlVXNlckhhbmRsZXIsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKCkgPT4gdW5saXN0ZW4ocm9vbSwge1xuICAgICAgICAgICAgW1JPT01fRVZFTlRTLkFERF9VU0VSXTogdXBkYXRlVXNlckhhbmRsZXIsXG4gICAgICAgICAgICBbUk9PTV9FVkVOVFMuREVMX1VTRVJdOiB1cGRhdGVVc2VySGFuZGxlcixcbiAgICAgICAgfSk7XG4gICAgfSwgW3Jvb20sIGlkXSk7XG4gICAgcmV0dXJuIHVzZXI7XG59O1xuZXhwb3J0IGNvbnN0IHVzZVVzZXJNZWRpYSA9ICh1c2VySWQpID0+IHtcbiAgICBjb25zdCB1c2VyID0gdXNlVXNlcih1c2VySWQpO1xuICAgIGNvbnN0IFt1c2VyTWVkaWEsIHNldFVzZXJNZWRpYV0gPSB1c2VTdGF0ZSh1c2VyPy5nZXRNZWRpYSgpID8/IG51bGwpO1xuICAgIC8vIFVwZGF0ZSBNZWRpYVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVUERBVEUgVVNFUicsIHVzZXIpO1xuICAgICAgICBjb25zb2xlLmxvZygnSVMgQ0xJRU5UJywgdXNlcklkID09PSBQcm9maWxlLmlkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0lTIFRBUkdFVCcsIHVzZXJJZCA9PT0gU2Vzc2lvbi50YXJnZXRJZCk7XG4gICAgICAgIHNldFVzZXJNZWRpYSh1c2VyID8gdXNlci5nZXRNZWRpYSgpIDogbnVsbCk7XG4gICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdXBkYXRlID0gKHsgdXNlcklkOiBpZCwgbWVkaWEgfSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VQREFURSBVU0VSIE1FRElBJyk7XG4gICAgICAgICAgICBpZiAodXNlcklkICE9PSBpZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzZXRVc2VyTWVkaWEobWVkaWEpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZygnT04gVVBEQVRFIE1FRElBIExJU1RFTkVSJyk7XG4gICAgICAgIHVzZXIub24oVVNFUl9FVkVOVFMuTUVESUEsIHVwZGF0ZSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnT0ZGIFVQREFURSBNRURJQSBMSVNURU5FUicpO1xuICAgICAgICAgICAgdXNlci5vZmYoVVNFUl9FVkVOVFMuTUVESUEsIHVwZGF0ZSk7XG4gICAgICAgIH07XG4gICAgfSwgW3VzZXJdKTtcbiAgICByZXR1cm4gdXNlck1lZGlhO1xufTtcbmV4cG9ydCBjb25zdCB1c2VDbGllbnRNZWRpYSA9ICgpID0+IHtcbiAgICBjb25zdCBjbGllbnRJZCA9IHVzZUNsaWVudElkKCk7XG4gICAgcmV0dXJuIHVzZVVzZXJNZWRpYShjbGllbnRJZCk7XG59O1xuZXhwb3J0IGNvbnN0IHVzZVRhcmdldE1lZGlhID0gKCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldElkID0gdXNlVGFyZ2V0SWQoKTtcbiAgICByZXR1cm4gdXNlVXNlck1lZGlhKHRhcmdldElkKTtcbn07XG4vLyA9PT0gSEVMUEVSUyA9PT1cbmZ1bmN0aW9uIGdldENoYXRDb250ZXh0KGhvb2tOYW1lKSB7XG4gICAgLy8gPT09IFNVQ0NFU1MgPT09XG4gICAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoQ2hhdENvbnRleHQpO1xuICAgIGlmIChjb250ZXh0KVxuICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICAvLyA9PT0gRkFJTCA9PT1cbiAgICBsZXQgZXJyTXNnID0gJyc7XG4gICAgaWYgKGhvb2tOYW1lKVxuICAgICAgICBlcnJNc2cgPSBgJHtob29rTmFtZX0gbXVzdCBiZSB1c2VkIHdpdGhpbiBhIENoYXRQcm92aWRlcmA7XG4gICAgZWxzZVxuICAgICAgICBlcnJNc2cgPSAndXNlQ29udGV4dChDaGF0Q29udGV4dCkgc2hvdWxkIGJlIGNhbGxlZCB3aXRoaW4gdGhlIENoYXRQcm92aWRlcic7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG59XG4iLCJpbXBvcnQgeyBDT05ORUNUSU9OX0VWRU5UUywgfSBmcm9tICdAZW50aXRpZXMvQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBTZXNzaW9uLCBTRVNTSU9OX0VWRU5UUyB9IGZyb20gJ0BlbnRpdGllcy9TZXNzaW9uJztcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgY29uc3QgdXNlQ29ubmVjdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBbY29ubmVjdGlvbiwgc2V0Q29ubmVjdGlvbl0gPSB1c2VTdGF0ZShTZXNzaW9uLmNvbm5lY3Rpb24pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHRUYXJnZXRIYW5kbGVyID0gZnVuY3Rpb24gKHsgY29ubmVjdGlvbiB9KSB7XG4gICAgICAgICAgICBzZXRDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBTZXNzaW9uLm9uKFNFU1NJT05fRVZFTlRTLk5FWFRfVEFSR0VULCBuZXh0VGFyZ2V0SGFuZGxlcik7XG4gICAgICAgIHJldHVybiAoKSA9PiBTZXNzaW9uLm9mZihTRVNTSU9OX0VWRU5UUy5ORVhUX1RBUkdFVCwgbmV4dFRhcmdldEhhbmRsZXIpO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gY29ubmVjdGlvbjtcbn07XG5leHBvcnQgY29uc3QgdXNlQ29ubmVjdGlvblN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB1c2VDb25uZWN0aW9uKCk7XG4gICAgY29uc3QgW2Nvbm5lY3Rpb25TdGF0ZSwgc2V0Q29ubmVjdGlvblN0YXRlXSA9IHVzZVN0YXRlKGNvbm5lY3Rpb24/LmdldFN0YXRlKCkgPz8gbnVsbCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZXRDb25uZWN0aW9uU3RhdGUoY29ubmVjdGlvbi5nZXRTdGF0ZSgpKTtcbiAgICAgICAgY29uc3Qgc3RhdGVVcGRhdGVkSGFuZGxlciA9ICh7IHN0YXRlIH0pID0+IHtcbiAgICAgICAgICAgIHNldENvbm5lY3Rpb25TdGF0ZShzdGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbm5lY3Rpb24ub24oQ09OTkVDVElPTl9FVkVOVFMuU1RBVEVfVVBEQVRFRCwgc3RhdGVVcGRhdGVkSGFuZGxlcik7XG4gICAgICAgIHJldHVybiAoKSA9PiBjb25uZWN0aW9uLm9mZihDT05ORUNUSU9OX0VWRU5UUy5TVEFURV9VUERBVEVELCBzdGF0ZVVwZGF0ZWRIYW5kbGVyKTtcbiAgICB9LCBbY29ubmVjdGlvbl0pO1xuICAgIHJldHVybiBjb25uZWN0aW9uU3RhdGU7XG59O1xuIiwiaW1wb3J0IHsgYXBwQWNlc3NvciB9IGZyb20gJ0BzZXJ2aWNlcy9hcHBBY2Nlc3Nvcic7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuY29uc3QgeyBnZXRBY2Nlc3MsIHdoZW4sIHNldCB9ID0gYXBwQWNlc3NvcjtcbmV4cG9ydCBjb25zdCB1c2VBcHBBY2Nlc3NvciA9ICgpID0+IHtcbiAgICBjb25zdCBbYWNjZXNzLCBzZXRBY2Nlc3NdID0gdXNlU3RhdGUoZ2V0QWNjZXNzKCkpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHdoZW4oKCkgPT4gc2V0QWNjZXNzKGdldEFjY2VzcygpKSk7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBbYWNjZXNzLCBzZXQsIHdoZW5dO1xufTtcbiIsImltcG9ydCB7IHVzZVdlYkFwcCB9IGZyb20gJ0B2a3J1Z2xpa292L3JlYWN0LXRlbGVncmFtLXdlYi1hcHAnO1xuaW1wb3J0IHsgdXNlTGF5b3V0RWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldFdlYkFwcCB9IGZyb20gJ0B1dGlscyc7XG5jb25zdCB3ZWJBcHAgPSBnZXRXZWJBcHAoKTtcbmlmICghd2ViQXBwKVxuICAgIHRocm93IEVycm9yKCdVbmRlZmluZWQgV2ViQXBwJyk7XG5jb25zdCBnZXRDaGFuZ2VkSGVpZ2h0ID0gZGVmaW5lQ2hhbmdlZEhlaWdodCgoKSA9PiB3ZWJBcHAudmlld3BvcnRIZWlnaHQpO1xuZXhwb3J0IGNvbnN0IHVzZUNoYW5nZWRIZWlnaHQgPSAoZ2V0Q0ggPSBnZXRDaGFuZ2VkSGVpZ2h0KSA9PiB7XG4gICAgY29uc3Qgd2ViQXBwID0gdXNlV2ViQXBwKCk7XG4gICAgaWYgKCF3ZWJBcHApXG4gICAgICAgIHRocm93IEVycm9yKCd3ZWJBcHAgd2FzIHVuZGVmaW5lZCcpO1xuICAgIGNvbnN0IFtjaGFuZ2VkSGVpZ2h0LCBzZXRDaGFuZ2VkSGVpZ2h0XSA9IHVzZVN0YXRlKGdldENIKCkpO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGZ1bmN0aW9uIHZwQ2hhbmdlZEhhbmRsZXIoeyBpc1N0YXRlU3RhYmxlIH0pIHtcbiAgICAgICAgICAgIGlmICghaXNTdGF0ZVN0YWJsZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzZXRDaGFuZ2VkSGVpZ2h0KGdldENIKCkpO1xuICAgICAgICB9XG4gICAgICAgIHdlYkFwcC5vbkV2ZW50KCd2aWV3cG9ydENoYW5nZWQnLCB2cENoYW5nZWRIYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHdlYkFwcC5vZmZFdmVudCgndmlld3BvcnRDaGFuZ2VkJywgdnBDaGFuZ2VkSGFuZGxlcik7XG4gICAgfSwgW3dlYkFwcCwgZ2V0Q0hdKTtcbiAgICByZXR1cm4gY2hhbmdlZEhlaWdodDtcbn07XG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lQ2hhbmdlZEhlaWdodChnZXRIZWlnaHQpIHtcbiAgICBsZXQgY2hhbmdlZEhlaWdodCA9IDA7XG4gICAgbGV0IHNhdmVkSGVpZ2h0ID0gZ2V0SGVpZ2h0KCk7XG4gICAgY29uc3QgZ2V0Q2hhbmdlZEhlaWdodCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VySGVpZ2h0ID0gZ2V0SGVpZ2h0KCk7XG4gICAgICAgIGNoYW5nZWRIZWlnaHQgPSBzYXZlZEhlaWdodCAtIGN1ckhlaWdodDtcbiAgICAgICAgc2F2ZWRIZWlnaHQgPSBjdXJIZWlnaHQ7XG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybiBjaGFuZ2VkSGVpZ2h0O1xuICAgIH07XG4gICAgcmV0dXJuIGdldENoYW5nZWRIZWlnaHQ7XG59XG4iLCJpbXBvcnQgeyB1c2VMYXlvdXRFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUGxhdGZvcm0gfSBmcm9tICdAaG9va3MnO1xuaW1wb3J0IHsgYWRkRGVidWcgfSBmcm9tICdAdXRpbHMnO1xuZXhwb3J0IGNvbnN0IHVzZUlzTW9iaWxlID0gKCkgPT4ge1xuICAgIGNvbnN0IHBsYXRmb3JtID0gdXNlUGxhdGZvcm0oKTtcbiAgICBjb25zdCBbaXNNb2JpbGUsIHNldElzTW9iaWxlXSA9IHVzZVN0YXRlKGNoZWNrTW9iaWxlKHBsYXRmb3JtKSk7XG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0SXNNb2JpbGUoY2hlY2tNb2JpbGUocGxhdGZvcm0pKTtcbiAgICB9LCBbcGxhdGZvcm1dKTtcbiAgICByZXR1cm4gaXNNb2JpbGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTW9iaWxlKHApIHtcbiAgICByZXR1cm4gcCAhPT0gJ3RkZXNrdG9wJyAmJiBwICE9PSAndW5rbm93bic7XG59XG5hZGREZWJ1ZygnY2hlY2tNb2JpbGUnLCAoKSA9PiBjaGVja01vYmlsZSh3aW5kb3cuZGVidWc/LmdldFBsYXRmb3JtKCkpKTtcbiIsImltcG9ydCB7IGdldExvY2FsTWVkaWEsIHdoZW5Mb2NhbE1lZGlhIH0gZnJvbSAnQGFwaS9sb2NhbE1lZGlhJztcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgY29uc3QgdXNlTG9jYWxNZWRpYSA9ICgpID0+IHtcbiAgICBjb25zdCBbbG9jYWxNZWRpYSwgc2V0TG9jYWxNZWRpYV0gPSB1c2VTdGF0ZShnZXRMb2NhbE1lZGlhKCkpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHdoZW5Mb2NhbE1lZGlhKChtZWRpYSkgPT4gc2V0TG9jYWxNZWRpYShtZWRpYSkpO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gbG9jYWxNZWRpYTtcbn07XG4iLCJpbXBvcnQgeyB1c2VXZWJBcHAgfSBmcm9tICdAdmtydWdsaWtvdi9yZWFjdC10ZWxlZ3JhbS13ZWItYXBwJztcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBhZGREZWJ1ZywgZ2V0V2ViQXBwIH0gZnJvbSAnQHV0aWxzJztcbmNvbnN0IHdlYkFwcCA9IGdldFdlYkFwcCgpO1xuaWYgKCF3ZWJBcHApXG4gICAgdGhyb3cgRXJyb3IoJ1VuZGVmaW5lZCBXZWJBcHAuJyk7XG5jb25zdCBnZXRNYXhIZWlnaHQgPSBkZWZpbmVNYXhIZWlnaHQoKCkgPT4gd2ViQXBwLnZpZXdwb3J0SGVpZ2h0KTtcbmV4cG9ydCBjb25zdCB1c2VNYXhIZWlnaHQgPSAoZ2V0TVggPSBnZXRNYXhIZWlnaHQpID0+IHtcbiAgICBjb25zdCB3ZWJBcHAgPSB1c2VXZWJBcHAoKTtcbiAgICBpZiAoIXdlYkFwcClcbiAgICAgICAgdGhyb3cgRXJyb3IoJ3dlYkFwcCB3YXMgdW5kZWZpbmVkJyk7XG4gICAgY29uc3QgW21heEhlaWdodCwgc2V0TWF4SGVpZ2h0XSA9IHVzZVN0YXRlKGdldE1YKCkpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZwQ2hhbmdlZEhhbmRsZXIgPSAoeyBpc1N0YXRlU3RhYmxlIH0pID0+IHtcbiAgICAgICAgICAgIGlmICghaXNTdGF0ZVN0YWJsZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBhZGREZWJ1ZygnbWF4SGVpZ2h0JywgZ2V0TVgoKSk7XG4gICAgICAgICAgICBzZXRNYXhIZWlnaHQoZ2V0TVgoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHdlYkFwcC5vbkV2ZW50KCd2aWV3cG9ydENoYW5nZWQnLCB2cENoYW5nZWRIYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHdlYkFwcC5vZmZFdmVudCgndmlld3BvcnRDaGFuZ2VkJywgdnBDaGFuZ2VkSGFuZGxlcik7XG4gICAgfSwgW3dlYkFwcF0pO1xuICAgIHJldHVybiBtYXhIZWlnaHQ7XG59O1xuLy8gPT09IEhFTFBFUlMgPT09XG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lTWF4SGVpZ2h0KGdldEhlaWdodCkge1xuICAgIGxldCBtYXhIZWlnaHQgPSBnZXRIZWlnaHQoKTtcbiAgICBjb25zdCBnZXRNYXhIZWlnaHQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1ckhlaWdodCA9IGdldEhlaWdodCgpO1xuICAgICAgICBtYXhIZWlnaHQgPSBjdXJIZWlnaHQgPiBtYXhIZWlnaHQgPyBjdXJIZWlnaHQgOiBtYXhIZWlnaHQ7XG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybiBtYXhIZWlnaHQ7XG4gICAgfTtcbiAgICByZXR1cm4gZ2V0TWF4SGVpZ2h0O1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZU1heEhlaWdodCB9IGZyb20gJy4vdXNlTWF4SGVpZ2h0JztcbmltcG9ydCB7IHVzZVdlYkFwcCB9IGZyb20gJ0B2a3J1Z2xpa292L3JlYWN0LXRlbGVncmFtLXdlYi1hcHAnO1xuaW1wb3J0IHsgdXNlSXNNb2JpbGUgfSBmcm9tICcuL3VzZUlzTW9iaWxlJztcbmltcG9ydCB7IGFkZERlYnVnLCBnZXRXZWJBcHAgfSBmcm9tICdAdXRpbHMnO1xuY29uc3QgTUtfQ09FRiA9IDAuOTU7XG5leHBvcnQgY29uc3QgdXNlTW9iaWxlS2V5Ym9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3Qgd2FwcCA9IHVzZVdlYkFwcCgpO1xuICAgIGNvbnN0IG1heEhlaWdodCA9IHVzZU1heEhlaWdodCgpO1xuICAgIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKTtcbiAgICAvL1xuICAgIGNvbnN0IFtta2IsIHNldE1rYl0gPSB1c2VTdGF0ZShpc01vYmlsZSA/IGNoZWNrTW9iaWxlS2V5Ym9hcmQod2FwcCwgbWF4SGVpZ2h0KSA6IGZhbHNlKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCB2cENoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0TWtiKGlzTW9iaWxlID8gY2hlY2tNb2JpbGVLZXlib2FyZCh0aGlzLCBtYXhIZWlnaHQpIDogZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICB3YXBwLm9uRXZlbnQoJ3ZpZXdwb3J0Q2hhbmdlZCcsIHZwQ2hhbmdlZEhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gKCkgPT4gd2FwcC5vZmZFdmVudCgndmlld3BvcnRDaGFuZ2VkJywgdnBDaGFuZ2VkSGFuZGxlcik7XG4gICAgfSwgW3dhcHAsIG1heEhlaWdodCwgaXNNb2JpbGVdKTtcbiAgICByZXR1cm4gbWtiO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjaGVja01vYmlsZUtleWJvYXJkKHdlYkFwcCwgbWF4SGVpZ2h0KSB7XG4gICAgaWYgKCF3ZWJBcHApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignd2ViQXBwIGlzIG51bGwgb3IgdW5kZWZpbmVkJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHdlYkFwcC52aWV3cG9ydEhlaWdodCAvIG1heEhlaWdodCA8PSBNS19DT0VGO1xufVxuYWRkRGVidWcoJ2NoZWNrTUsnLCAoKSA9PiBjaGVja01vYmlsZUtleWJvYXJkKGdldFdlYkFwcCgpLCB3aW5kb3cuZGVidWc/Lm1heEhlaWdodCkpO1xuIiwiaW1wb3J0IHsgYWRkRGVidWcsIGdldFdlYkFwcCB9IGZyb20gJ0B1dGlscyc7XG5pbXBvcnQgeyB1c2VMYXlvdXRFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuY29uc3QgY2hlc3RPZlVwZGF0ZSA9IHsgdXBkYXRlU2V0OiBuZXcgU2V0KCksIHVwZGF0ZU1hcDogbmV3IE1hcCgpIH07XG5jb25zdCBbZ2V0UGxhdGZvcm1WYWwsIHNldFBsYXRmb3JtVmFsXSA9IGRlZmluZVBsYXRmb3JtKGdldFdlYkFwcCgpLCBjaGVzdE9mVXBkYXRlKTtcbmlmICghd2luZG93LmRlYnVnKVxuICAgIHdpbmRvdy5kZWJ1ZyA9IHt9O1xuYWRkRGVidWcoJ3NldFBsYXRmb3JtJywgc2V0UGxhdGZvcm1WYWwpO1xuYWRkRGVidWcoJ2dldFBsYXRmb3JtJywgZ2V0UGxhdGZvcm1WYWwpO1xuZXhwb3J0IGNvbnN0IHVzZVBsYXRmb3JtID0gKGdldFBsID0gZ2V0UGxhdGZvcm1WYWwsIGNoZXN0ID0gY2hlc3RPZlVwZGF0ZSkgPT4ge1xuICAgIGNvbnN0IFtwbGF0Zm9ybSwgc2V0UGxhdGZvcm1dID0gdXNlU3RhdGUoZ2V0UGwoKSk7XG4gICAgY29uc3QgW3VwZGF0ZXIsIHVwZGF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgY2hlc3QudXBkYXRlU2V0LmFkZCh1cGRhdGUpO1xuICAgICAgICBjaGVzdC51cGRhdGVNYXAuc2V0KHVwZGF0ZSwgdXBkYXRlcik7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjaGVzdC51cGRhdGVTZXQuZGVsZXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICBjaGVzdC51cGRhdGVNYXAuZGVsZXRlKHVwZGF0ZSk7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldFBsYXRmb3JtKGdldFBsKCkpO1xuICAgIH0sIFt1cGRhdGVyXSk7XG4gICAgcmV0dXJuIHBsYXRmb3JtO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVQbGF0Zm9ybSh3ZWJBcHAsIHsgdXBkYXRlU2V0LCB1cGRhdGVNYXAgfSkge1xuICAgIGlmICghd2ViQXBwKVxuICAgICAgICBjb25zb2xlLmVycm9yKCd3ZWJBcHAgYXJnIGlzIG51bGwnKTtcbiAgICBsZXQgcGxhdGZvcm0gPSB3ZWJBcHA/LnBsYXRmb3JtID8/ICd1bmtub3duJztcbiAgICBjb25zdCBnZXRQbGF0Zm9ybSA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHBsYXRmb3JtO1xuICAgIH07XG4gICAgY29uc3Qgc2V0UGxhdGZvcm0gPSAobmV4dFBsYXRmb3JtKSA9PiB7XG4gICAgICAgIHBsYXRmb3JtID0gbmV4dFBsYXRmb3JtO1xuICAgICAgICB1cGRhdGVTZXQuZm9yRWFjaCgodXBkYXRlKSA9PiB1cGRhdGUoIXVwZGF0ZU1hcC5nZXQodXBkYXRlKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFtnZXRQbGF0Zm9ybSwgc2V0UGxhdGZvcm1dO1xufVxuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBjb25zdCB1c2VSZXNpemVFbCA9IChlbCkgPT4ge1xuICAgIGNvbnN0IFtyZXNpemUsIHNldFJlc2l6ZV0gPSB1c2VTdGF0ZSh7IGhlaWdodDogMCwgd2lkdGg6IDAgfSk7XG4gICAgY29uc3QgcmVjdFJlZiA9IHVzZVJlZihlbD8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgPz8gbnVsbCk7XG4gICAgY29uc3QgZWxSZWYgPSB1c2VSZWYoZWwpO1xuICAgIGNvbnN0IG9ic2VydmVyUmVmID0gdXNlUmVmKG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICBpZiAoZW50cmllc1swXS50YXJnZXQgIT09IGVsUmVmLmN1cnJlbnQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkluY29ycmVjdCAnZWwnIG9mIHVzZVJlc2l6ZUVsLlwiKTtcbiAgICAgICAgY29uc3QgY3VyUmVjdCA9IGVudHJpZXNbMF0uY29udGVudFJlY3Q7XG4gICAgICAgIGlmICghcmVjdFJlZi5jdXJyZW50IHx8IHJlY3RSZWYuY3VycmVudC5oZWlnaHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVjdFJlZi5jdXJyZW50ID0gY3VyUmVjdDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJTklUIFNBVkVEIFJFQ1QnLCByZWN0UmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFJlc2l6ZSh7XG4gICAgICAgICAgICBoZWlnaHQ6IGN1clJlY3QuaGVpZ2h0IC0gcmVjdFJlZi5jdXJyZW50LmhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoOiBjdXJSZWN0LndpZHRoIC0gcmVjdFJlZi5jdXJyZW50LndpZHRoLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVjdFJlZi5jdXJyZW50ID0gY3VyUmVjdDtcbiAgICB9KSk7XG4gICAgY29uc3Qgc2V0RWwgPSB1c2VDYWxsYmFjaygoZWwpID0+IHtcbiAgICAgICAgZWxSZWYuY3VycmVudCAmJiBvYnNlcnZlclJlZi5jdXJyZW50LnVub2JzZXJ2ZShlbFJlZi5jdXJyZW50KTtcbiAgICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudC5vYnNlcnZlKGVsKTtcbiAgICAgICAgZWxSZWYuY3VycmVudCA9IGVsO1xuICAgICAgICByZWN0UmVmLmN1cnJlbnQgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9LCBbXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZWwgJiYgc2V0RWwoZWwpO1xuICAgICAgICByZXR1cm4gKCkgPT4gb2JzZXJ2ZXJSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBbcmVzaXplLCBzZXRFbF07XG59O1xuIiwiaW1wb3J0IHsgaW50ZW50Q2hlc3QsIElOVEVOVF9BQ1RJT05TIH0gZnJvbSAnQHNlcnZpY2VzL2ludGVudHMnO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGNvbnN0IHVzZVN0YXJ0ID0gKHN0YXJ0QXBwSGFuZGxlcikgPT4ge1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGludGVudENoZXN0Lm9uKElOVEVOVF9BQ1RJT05TLlNUQVJUX0FQUCwgc3RhcnRBcHBIYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGludGVudENoZXN0Lm9mZihJTlRFTlRfQUNUSU9OUy5TVEFSVF9BUFAsIHN0YXJ0QXBwSGFuZGxlcik7XG4gICAgfSwgW10pO1xufTtcbiIsImV4cG9ydCAqIGZyb20gJy4vY2hhdEhvb2tzJztcbmV4cG9ydCAqIGZyb20gJy4vY29ubmVjdEhvb2tzJztcbmV4cG9ydCAqIGZyb20gJy4vdXNlQXBwQWNjZXNzb3InO1xuZXhwb3J0ICogZnJvbSAnLi91c2VDaGFuZ2VkSGVpZ2h0JztcbmV4cG9ydCAqIGZyb20gJy4vdXNlSXNNb2JpbGUnO1xuZXhwb3J0ICogZnJvbSAnLi91c2VMb2NhbE1lZGlhJztcbmV4cG9ydCAqIGZyb20gJy4vdXNlTWF4SGVpZ2h0JztcbmV4cG9ydCAqIGZyb20gJy4vdXNlTW9iaWxlS2V5Ym9hcmQnO1xuZXhwb3J0ICogZnJvbSAnLi91c2VQbGF0Zm9ybSc7XG5leHBvcnQgKiBmcm9tICcuL3VzZVJlc2l6ZUVsJztcbmV4cG9ydCAqIGZyb20gJy4vdXNlU3RhcnQnO1xuIiwiaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwiQGVtb3Rpb24vcmVhY3QvanN4LXJ1bnRpbWVcIjtcbi8qKiBAanN4SW1wb3J0U291cmNlIEBlbW90aW9uL3JlYWN0ICovXG5pbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgeyB1c2VNYXhIZWlnaHQgfSBmcm9tICdAaG9va3MnO1xuY29uc3QgRGlzcGxheUJveCA9ICh7IGNoaWxkcmVuLCBjbGFzc05hbWUgfSkgPT4ge1xuICAgIGNvbnN0IG1heEhlaWdodCA9IHVzZU1heEhlaWdodCgpO1xuICAgIHJldHVybiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogYFxuICAgICAgICAgICAgICAgIHctZnVsbFxuICAgICAgICAgICAgICAgIG14LWF1dG9cbiAgICAgICAgICAgICAgICAke2NsYXNzTmFtZX1cbiAgICAgICAgICAgIGAsIGNzczogY3NzIGBcblx0XHRcdFx0aGVpZ2h0OiAke21heEhlaWdodCAvIDN9cHg7XG5cdFx0XHRgLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IERpc3BsYXlCb3g7XG4iLCJpbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgYmluZFByb3BzIH0gZnJvbSAnQHV0aWxzJztcbi8vIHJlYWN0IGNvbXBvbmVudFxuY29uc3QgQnRuID0gKHsgY2xhc3NOYW1lLCBjaGlsZHJlbiwgdHlwZSA9ICdidXR0b24nLCBkaXNhYmxlZCwgLi4ucHJvcHMgfSkgPT4gKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGB0b3VjaC1tYW5pcHVsYXRpb24gdHJhbnNpdGlvbi1vcGFjaXR5IGFjdGl2ZTpvcGFjaXR5LTcwXG4gICAgICAgICR7Y2xhc3NOYW1lID8/ICcnfVxuICAgICAgICAke2Rpc2FibGVkID8gJ29wYWNpdHktNTAnIDogJyd9XG4gICAgYCwgY2hpbGRyZW46IF9qc3goXCJidXR0b25cIiwgeyAuLi5wcm9wcywgdHlwZTogdHlwZSwgZGlzYWJsZWQ6IGRpc2FibGVkLCBjbGFzc05hbWU6IGB3LWZ1bGwgaC1mdWxsIHB5LTMgcHgtMiB0ZXh0LWNlbnRlciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtNCBzZWxlY3Qtbm9uZSBkaXNhYmxlZDpwb2ludGVyLWV2ZW50cy1ub25lYCwgY2hpbGRyZW46IGNoaWxkcmVuIH0pIH0pKTtcbmNvbnN0IFN1Ym1pdEJ0biA9IGJpbmRQcm9wcyhCdG4sIHsgdHlwZTogJ3N1Ym1pdCcgfSk7XG5jb25zdCBSZXNldEJ0biA9IGJpbmRQcm9wcyhCdG4sIHsgdHlwZTogJ3Jlc2V0JyB9KTtcbmV4cG9ydCBkZWZhdWx0IEJ0bjtcbmV4cG9ydCB7IFN1Ym1pdEJ0biwgUmVzZXRCdG4gfTtcbiIsImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgQnRuIGZyb20gJy4uL2NvbXBvbmVudHMvQnRuJztcbmltcG9ydCB7IHVzZUlzTW9iaWxlLCB1c2VDb25uZWN0aW9uU3RhdGUsIHVzZVVucmVhZCB9IGZyb20gJ0Bob29rcyc7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGFkZF91c2VyIGZyb20gJy4uL2Fzc2V0cy9pY29uL2FkZF91c2VyLnN2Zyc7XG5pbXBvcnQgYXJyb3dfdG9fcmlnaHQgZnJvbSAnLi4vYXNzZXRzL2ljb24vYXJyb3dfdG9fcmlnaHQuc3ZnJztcbmltcG9ydCBkaWFsb2d1ZSBmcm9tICcuLi9hc3NldHMvaWNvbi9kaWFsb2d1ZS5zdmcnO1xuY29uc3QgTU9CSUxFX0hBTkRMRVIgPSAnb25Ub3VjaEVuZCc7XG5jb25zdCBERVNLVE9QX0hBTkRMRVIgPSAnb25DbGljayc7XG5jb25zdCBDb250cm9sbGVyID0gKHsgb25UZXh0Q2hhdCwgb25BZGRVc2VyLCBvbk5leHQgfSkgPT4ge1xuICAgIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKTtcbiAgICBjb25zdCBbdW5yZWFkXSA9IHVzZVVucmVhZCgpO1xuICAgIGNvbnN0IG9uVHVybiA9IHVzZU1lbW8oKCkgPT4gKGlzTW9iaWxlID8gTU9CSUxFX0hBTkRMRVIgOiBERVNLVE9QX0hBTkRMRVIpLCBbaXNNb2JpbGVdKTtcbiAgICBjb25zdCBjb25uZWN0aW9uU3RhdGUgPSB1c2VDb25uZWN0aW9uU3RhdGUoKTtcbiAgICByZXR1cm4gKF9qc3hzKFwic2VjdGlvblwiLCB7IGNsYXNzTmFtZTogXCJcXG4gICAgICAgICAgICBmbGV4IGl0ZW1zLXN0cmV0Y2gganVzdGlmeS1iZXR3ZWVuIGdhcC0zXFxuICAgICAgICAgICAgYWJzb2x1dGUgYm90dG9tLTBcXG4gICAgICAgICAgICBib3gtY29udGVudCB3LWZ1bGwgaC0xNSBweS00XFxuICAgICAgICBcIiwgY2hpbGRyZW46IFtfanN4cyhCdG4sIHsgZGlzYWJsZWQ6IGNvbm5lY3Rpb25TdGF0ZSAhPT0gJ2Nvbm5lY3RlZCcsIGNsYXNzTmFtZTogXCJiZy1ncmF5IGZsZXgtZ3Jvdy0xIHJvdW5kZWQteGwgcmVsYXRpdmVcIiwgW29uVHVybl06IG9uVGV4dENoYXQsIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGhpZGRlbjogdW5yZWFkIDw9IDAsIGNsYXNzTmFtZTogXCJhYnNvbHV0ZSByaWdodC0wIHRvcC0wIHRyYW5zbGF0ZS14LVszMCVdIHRyYW5zbGF0ZS15LVstMzAlXSBiZy1yZWQgcm91bmRlZC1mdWxsIHAtNFwiLCBjaGlsZHJlbjogX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgYWJzb2x1dGUgdG9wLTAgbGVmdC0wIHctZnVsbCBoLWZ1bGxcXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtd2hpdGVcXG4gICAgICAgICAgICAgICAgICAgIFwiLCBjaGlsZHJlbjogdW5yZWFkIH0pIH0pLCBfanN4KFwiaW1nXCIsIHsgZHJhZ2dhYmxlOiBmYWxzZSwgY2xhc3NOYW1lOiBcImJsb2NrIHBvaW50ZXItZXZlbnRzLW5vbmVcIiwgc3JjOiBkaWFsb2d1ZSB9KV0gfSksIF9qc3goQnRuLCB7IGRpc2FibGVkOiB0cnVlLCBjbGFzc05hbWU6IFwiYmctZ3JheSBmbGV4LWdyb3ctMSByb3VuZGVkLXhsXCIsIFtvblR1cm5dOiBvbkFkZFVzZXIsIGNoaWxkcmVuOiBfanN4KFwiaW1nXCIsIHsgZHJhZ2dhYmxlOiBmYWxzZSwgY2xhc3NOYW1lOiBcImJsb2NrIHBvaW50ZXItZXZlbnRzLW5vbmVcIiwgc3JjOiBhZGRfdXNlciB9KSB9KSwgX2pzeHMoQnRuLCB7IGRpc2FibGVkOiBjb25uZWN0aW9uU3RhdGUgIT09ICdjb25uZWN0ZWQnLCBjbGFzc05hbWU6IFwiYmctbGlnaHQtYmx1ZSBmbGV4LWdyb3ctMyByb3VuZGVkLXhsXCIsIFtvblR1cm5dOiBvbk5leHQsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC0yeGwgZm9udC1ib2xkXCIsIGNoaWxkcmVuOiBcIk5FWFRcIiB9KSwgX2pzeChcImltZ1wiLCB7IGRyYWdnYWJsZTogZmFsc2UsIGNsYXNzTmFtZTogXCJwb2ludGVyLWV2ZW50cy1ub25lXCIsIHNyYzogYXJyb3dfdG9fcmlnaHQgfSldIH0pXSB9KSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgQ29udHJvbGxlcjtcbiIsImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyBmb3J3YXJkUmVmLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmNvbnN0IFZpZGVvID0gZm9yd2FyZFJlZigoeyBjbGFzc05hbWUsIGNoaWxkcmVuLCBoaWRkZW4gPSBmYWxzZSwgc2hvdyA9IHRydWUsIG1pcnJvciA9IGZhbHNlLCAuLi5wcm9wcyB9LCByZWYpID0+IHtcbiAgICBjb25zdCB2aWRlb0NsYXNzTmFtZSA9IGNsYXNzTmFtZSA/PyAnJztcbiAgICBjb25zdCB2aWRlb1JlZiA9IHVzZVJlZihudWxsKTtcbiAgICAvLyA9PT0gUkVGIERFRklORSA9PT1cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXZpZGVvUmVmLmN1cnJlbnQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIidWaWRlbycgY29tcG9uZW50IGhhcyBub3QgcmVuZGVyZWQgYXQgRE9NLlwiKTtcbiAgICAgICAgaWYgKCFyZWYpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZWYodmlkZW9SZWYuY3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWYuY3VycmVudCA9IHZpZGVvUmVmLmN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmVmKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gKF9qc3hzKFwic2VjdGlvblwiLCB7IGhpZGRlbjogaGlkZGVuLCBjbGFzc05hbWU6ICdyZWxhdGl2ZSBhc3BlY3QtdmlkZW8gb3ZlcmZsb3ctY2xpcCB3LWZ1bGwgaC1mdWxsJywgY2hpbGRyZW46IFtfanN4KFwidmlkZW9cIiwgeyAuLi5wcm9wcywgcmVmOiB2aWRlb1JlZiwgY2xhc3NOYW1lOiBgJHt2aWRlb0NsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgJHttaXJyb3IgPyAnc2NhbGUteC1bLTFdJyA6ICcnfVxuICAgICAgICAgICAgICAgICAgICBhc3BlY3QtdmlkZW8gdy1mdWxsXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC1jb3ZlciBbb2JqZWN0LXBvc2l0aW9uOmNlbnRlcl9jZW50ZXJdIGJsb2NrXG4gICAgICAgICAgICAgICAgYCB9KSwgIXNob3cgJiYgY2hpbGRyZW5dIH0pKTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgVmlkZW87XG4iLCJpbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgdXNlQXBwQWNjZXNzb3IsIHVzZUNsaWVudE1lZGlhLCB1c2VDb25uZWN0aW9uU3RhdGUsIHVzZVRhcmdldE1lZGlhLCB1c2VTdGFydCwgfSBmcm9tICdAaG9va3MnO1xuaW1wb3J0IHsgYWRkRGVidWcgfSBmcm9tICdAbGliL3V0aWxzJztcbmltcG9ydCB7IEFDQ19GTEFHUyB9IGZyb20gJ0BzZXJ2aWNlcy9hcHBBY2Nlc3Nvcic7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZW1wdHlfdmlkZW8gZnJvbSAnLi4vYXNzZXRzL2ltZy9lbXB0eV92aWRlby5wbmcnO1xuaW1wb3J0IFZpZGVvIGZyb20gJ0Bjb21wb25lbnRzL1ZpZGVvJztcbmNvbnN0IFZpZGVvU3RyZWFtID0gKHsgY2xhc3NOYW1lLCByZW1vdGUsIGhpZGRlbiA9IGZhbHNlIH0pID0+IHtcbiAgICBjb25zdCB2aWRlb0NoYXRDbGFzc05hbWUgPSBjbGFzc05hbWUgPz8gJyc7XG4gICAgY29uc3QgdXNlTWVkaWEgPSByZW1vdGUgPyB1c2VUYXJnZXRNZWRpYSA6IHVzZUNsaWVudE1lZGlhO1xuICAgIGNvbnN0IHZpZGVvID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb25TdGF0ZSA9IHVzZUNvbm5lY3Rpb25TdGF0ZSgpO1xuICAgIGNvbnN0IFtzaG93LCBzZXRTaG93XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBtZWRpYSA9IHVzZU1lZGlhKCk7XG4gICAgY29uc3QgWywgc2V0QWNjZXNzRmxhZ10gPSB1c2VBcHBBY2Nlc3NvcigpO1xuICAgIC8vIEdlbmVyYWwgZWZmZWN0XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCF2aWRlby5jdXJyZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2aWRlby5jdXJyZW50LmdldEF0dHJpYnV0ZSgnaWQnKSAmJlxuICAgICAgICAgICAgYWRkRGVidWcodmlkZW8uY3VycmVudC5nZXRBdHRyaWJ1dGUoJ2lkJyksIHZpZGVvLmN1cnJlbnQpO1xuICAgICAgICAvLyA9PT0gSEFORExFUlMgPT09XG4gICAgICAgIGNvbnN0IHBhdXNlSGFuZGxlciA9IChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQ/LmxvYWQoKTtcbiAgICAgICAgICAgIGV2dC50YXJnZXQ/LnBsYXkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gPT09IEFERCBMSVNURU5FUlMgPT09XG4gICAgICAgIHZpZGVvLmN1cnJlbnQub25wYXVzZSA9IHBhdXNlSGFuZGxlcjtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIC8vID09PSBSRU1PVkUgTElTVEVORVJTID09PVxuICAgICAgICAgICAgaWYgKHZpZGVvLmN1cnJlbnQpXG4gICAgICAgICAgICAgICAgdmlkZW8uY3VycmVudC5vbnBhdXNlID0gbnVsbDtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgLy8gUnVsZXMgZm9yIHBsYXlpbmcgb3IgcGF1c2luZyBsb2NhbCB2aWRlb1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChyZW1vdGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghdmlkZW8uY3VycmVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gd2hlbkxvY2FsTWVkaWEoKCkgPT4ge1xuICAgICAgICAvLyBcdGNvbnNvbGUubG9nKCdQTEFZIExPQ0FMIE1FRElBJyk7XG4gICAgICAgIC8vIFx0dmlkZW8uY3VycmVudD8ucGxheSgpO1xuICAgICAgICAvLyB9KTtcbiAgICAgICAgdmlkZW8uY3VycmVudC5vbnBsYXlpbmcgPSAoKSA9PiBzZXRTaG93KHRydWUpO1xuICAgICAgICB2aWRlby5jdXJyZW50Lm9ud2FpdGluZyA9ICgpID0+IHNldFNob3coZmFsc2UpO1xuICAgICAgICB2aWRlby5jdXJyZW50Lm9uZW5kZWQgPSAoKSA9PiBzZXRTaG93KGZhbHNlKTtcbiAgICAgICAgdmlkZW8uY3VycmVudC5vbnN0YWxsZWQgPSAoKSA9PiBzZXRTaG93KGZhbHNlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdmlkZW8uY3VycmVudClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2aWRlby5jdXJyZW50Lm9ucGxheWluZyA9ICgpID0+IHNldFNob3codHJ1ZSk7XG4gICAgICAgICAgICB2aWRlby5jdXJyZW50Lm9ud2FpdGluZyA9ICgpID0+IHNldFNob3coZmFsc2UpO1xuICAgICAgICAgICAgdmlkZW8uY3VycmVudC5vbmVuZGVkID0gKCkgPT4gc2V0U2hvdyhmYWxzZSk7XG4gICAgICAgICAgICB2aWRlby5jdXJyZW50Lm9uc3RhbGxlZCA9ICgpID0+IHNldFNob3coZmFsc2UpO1xuICAgICAgICB9O1xuICAgIH0sIFtyZW1vdGVdKTtcbiAgICAvLyBQbGF5IHJlbW90ZSB2aWRlbyB3aGVuIHVzZXIgdHVybiBTVEFSVCBhbmQgc2V0IGFwcHJvcHJpYXRlIEFQUCBGTEFHXG4gICAgdXNlU3RhcnQoKCkgPT4ge1xuICAgICAgICAvLyBpZiAoIXJlbW90ZSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXZpZGVvLmN1cnJlbnQ/LnBhdXNlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2coJ1NUQVJUIEFQUCcpO1xuICAgICAgICB2aWRlby5jdXJyZW50LnBsYXkoKTtcbiAgICAgICAgc2V0QWNjZXNzRmxhZyhBQ0NfRkxBR1MuUExBWV9SRU1PVEVfVklERU8pO1xuICAgIH0pO1xuICAgIC8vIFVwZGF0ZSBtZWRpYVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghdmlkZW8uY3VycmVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmlkZW8uY3VycmVudC5zcmNPYmplY3QgPSBtZWRpYTtcbiAgICB9LCBbbWVkaWFdKTtcbiAgICAvLyBpZiBSRU1PVEUgYW5kIG9ubHkgQ09OTkVDVEVEOiBzaG93ID0gdHJ1ZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghcmVtb3RlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoY29ubmVjdGlvblN0YXRlID09PSAnY29ubmVjdGVkJylcbiAgICAgICAgICAgIHNldFNob3codHJ1ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHNldFNob3coZmFsc2UpO1xuICAgIH0sIFtjb25uZWN0aW9uU3RhdGUsIHJlbW90ZV0pO1xuICAgIHJldHVybiAoX2pzeChcInNlY3Rpb25cIiwgeyBoaWRkZW46IGhpZGRlbiwgY2xhc3NOYW1lOiB2aWRlb0NoYXRDbGFzc05hbWUgKyAnIHJlbGF0aXZlIHctZnVsbCBoLWZ1bGwgcm91bmRlZC14bCBmbGV4IGl0ZW1zLWNlbnRlciBvdmVyZmxvdy1jbGlwJywgY2hpbGRyZW46IF9qc3goVmlkZW8sIHsgc2hvdzogc2hvdywgYXV0b1BsYXk6IHRydWUsIHJlZjogdmlkZW8sIHBsYXlzSW5saW5lOiB0cnVlLCBtdXRlZDogIXJlbW90ZSwgaWQ6IHJlbW90ZSA/ICdyZW1vdGVWaWRlbycgOiAnbG9jYWxWaWRlbycsIGNsYXNzTmFtZTogXCJzY2FsZS14LVstMV0gYXNwZWN0LXZpZGVvIHctZnVsbCBoLWZ1bGwgb2JqZWN0LWZpdCBbb2JqZWN0LXBvc2l0aW9uOmNlbnRlcl9jZW50ZXJdIGJsb2NrXCIsIGNoaWxkcmVuOiBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImFic29sdXRlIHRvcC0wIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wIGJnLWNsb3VkXCIsIGNoaWxkcmVuOiBfanN4KFwiaW1nXCIsIHsgc3JjOiBlbXB0eV92aWRlbywgY2xhc3NOYW1lOiBcInBvaW50ZXItZXZlbnRzLW5vbmUgYmxvY2sgdG9wLTAgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgYWJzb2x1dGUgbS1hdXRvXCIgfSkgfSkgfSkgfSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFZpZGVvU3RyZWFtO1xuIiwiaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmNvbnN0IE1lc3NhZ2VCbG9jayA9ICh7IHNlbmRlciwgdGV4dCwgZGlyZWN0aW9uIH0pID0+IChfanN4cyhcInNlY3Rpb25cIiwgeyBjbGFzc05hbWU6IGBtYi0yIHAtMiByb3VuZGVkLTJ4bCB3LTIvMyByZWxhdGl2ZVxuICAgICAgICAke2RpcmVjdGlvbiA9PT0gJ2xlZnQnXG4gICAgICAgID8gJ2JnLWdyYXkgcm91bmRlZC1ibC1ub25lIGxlZnQtMidcbiAgICAgICAgOiAnYmctbGlnaHQtYmx1ZSByb3VuZGVkLWJyLW5vbmUgcmlnaHQtMiBtbC1hdXRvJ31gLCBjaGlsZHJlbjogW19qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBgYmxvY2sgZm9udC1zZW1pYm9sZCAke2RpcmVjdGlvbiA9PT0gJ2xlZnQnID8gJ3RleHQtbGlnaHQtYmx1ZScgOiAndGV4dC1vcmFuZ2UnfWAsIGNoaWxkcmVuOiBzZW5kZXIgfSksIF9qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtd2hpdGVcIiwgY2hpbGRyZW46IHRleHQgfSksIF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGBcbiAgICAgICAgICAgIGFic29sdXRlIHctMCBoLTAgYm90dG9tLTBcbiAgICAgICAgICAgIGJvcmRlci10LXRyYW5zcGFyZW50IGJvcmRlci0zXG4gICAgICAgICAgICAke2RpcmVjdGlvbiA9PT0gJ2xlZnQnXG4gICAgICAgICAgICAgICAgPyAnYm9yZGVyLWdyYXkgYm9yZGVyLWwtdHJhbnNwYXJlbnQgcmlnaHQtZnVsbCdcbiAgICAgICAgICAgICAgICA6ICdib3JkZXItbGlnaHQtYmx1ZSBib3JkZXItci10cmFuc3BhcmVudCBsZWZ0LWZ1bGwnfVxuICAgICAgICBgIH0pXSB9KSk7XG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlQmxvY2s7XG4iLCJpbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IE1lc3NhZ2VCbG9jayBmcm9tICcuL01lc3NhZ2VCbG9jayc7XG5pbXBvcnQgeyBmb3J3YXJkUmVmLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNsaWVudElkIH0gZnJvbSAnQGhvb2tzJztcbmNvbnN0IE1lc3NhZ2VMaXN0ID0gZm9yd2FyZFJlZigoeyBoaXN0b3J5IH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IGxpc3RSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgY2xpZW50ID0gdXNlQ2xpZW50SWQoKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAocmVmKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICByZWYobGlzdFJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZWYuY3VycmVudCA9IGxpc3RSZWYuY3VycmVudDtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gKF9qc3goXCJ1bFwiLCB7IHJlZjogbGlzdFJlZiwgY2xhc3NOYW1lOiBcInB4LTJcIiwgY2hpbGRyZW46IGhpc3RvcnkubWFwKChzTXNnSXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtzZW5kZXIsIGRpcmVjdGlvbl0gPSBzTXNnSXRlbS51c2VySWQgPT09IGNsaWVudFxuICAgICAgICAgICAgICAgID8gWyfQktGLJywgJ3JpZ2h0J11cbiAgICAgICAgICAgICAgICA6IFsn0KHQvtCx0LXRgdC10LTQvdC40LonLCAnbGVmdCddO1xuICAgICAgICAgICAgcmV0dXJuIChfanN4KFwibGlcIiwgeyBjbGFzc05hbWU6IGAke2luZGV4ID09PSBoaXN0b3J5Lmxlbmd0aCAtIDEgPyAnbWItMCcgOiAnbWItMid9YCwgY2hpbGRyZW46IF9qc3goTWVzc2FnZUJsb2NrLCB7IHNlbmRlcjogc2VuZGVyLCB0ZXh0OiBzTXNnSXRlbS50ZXh0LCBkaXJlY3Rpb246IGRpcmVjdGlvbiB9LCBpbmRleCkgfSkpO1xuICAgICAgICB9KSB9KSk7XG59KTtcbmV4cG9ydCBkZWZhdWx0IE1lc3NhZ2VMaXN0O1xuIiwiaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCc7XG5jb25zdCBNZXNzYWdlSW5wdXQgPSBmb3J3YXJkUmVmKCh7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfSwgaW5wdXRSZWYpID0+IHtcbiAgICByZXR1cm4gKF9qc3goXCJ0ZXh0YXJlYVwiLCB7IC4uLnByb3BzLCByZWY6IGlucHV0UmVmLCBzdHlsZTogeyByZXNpemU6ICdub25lJyB9LCBjbGFzc05hbWU6IGBwLTIgdGV4dC14bCBvdXRsaW5lLTAgYmctZ3JheSB0ZXh0LXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1saWdodC1ibHVlICR7Y2xhc3NOYW1lfWAgfSkpO1xufSk7XG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlSW5wdXQ7XG4iLCJpbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgU3VibWl0QnRuIH0gZnJvbSAnQGNvbXBvbmVudHMvQnRuJztcbmltcG9ydCBNZXNzYWdlSW5wdXQgZnJvbSAnQGNvbXBvbmVudHMvTWVzc2FnZUlucHV0JztcbmltcG9ydCB7IHVzZU1vYmlsZUtleWJvYXJkLCB1c2VXcml0ZSB9IGZyb20gJ0Bob29rcyc7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNlbmQgZnJvbSAnLi4vYXNzZXRzL2ljb24vc2VuZC5zdmcnO1xuY29uc3QgTWVzc2FnZUZvcm0gPSAoeyBjbGFzc05hbWUsIG9uUHVzaCB9KSA9PiB7XG4gICAgY29uc3QgcGVuZGluZyA9IGZhbHNlO1xuICAgIC8vXG4gICAgY29uc3QgaXNNb2JpbGVLZXlib2FyZCA9IHVzZU1vYmlsZUtleWJvYXJkKCk7XG4gICAgY29uc3QgW3dyaXRlLCBzZXRXcml0ZV0gPSB1c2VXcml0ZSgpO1xuICAgIGNvbnN0IFtwb3MsIHNldFBvc10gPSB1c2VTdGF0ZSgnYmxvY2snKTtcbiAgICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCBbYmx1ciwgc2V0Qmx1cl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBhc3luY0ZvY3VzSW5wdXQgPSAoKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRSZWYuY3VycmVudD8uc2V0QXR0cmlidXRlKCdyZWFkb25seScsICd0cnVlJyk7XG4gICAgICAgICAgICBpbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgICAgICAgICAgaW5wdXRSZWYuY3VycmVudD8ucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHR5cGVIYW5kbGVyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBzZXRXcml0ZShldnQudGFyZ2V0Py52YWx1ZSk7XG4gICAgfSwgW10pO1xuICAgIC8vXG4gICAgY29uc3Qgc3VibWl0SGFuZGxlciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlzTW9iaWxlS2V5Ym9hcmQgPyBpbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpIDogYXN5bmNGb2N1c0lucHV0KCk7XG4gICAgICAgIGlmICh3cml0ZSA9PT0gJycpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG9uUHVzaD8uKHdyaXRlKTtcbiAgICAgICAgc2V0V3JpdGUoJycpO1xuICAgIH0sIFt3cml0ZSwgaXNNb2JpbGVLZXlib2FyZCwgb25QdXNoXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaW5wdXRSZWYuY3VycmVudC5vbmJsdXIgPSAoKSA9PiBzZXRCbHVyKHRydWUpO1xuICAgICAgICBpbnB1dFJlZi5jdXJyZW50Lm9uZm9jdXMgPSAoKSA9PiBzZXRCbHVyKGZhbHNlKTtcbiAgICB9LCBbXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFibHVyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBhc3luY0ZvY3VzSW5wdXQoKTtcbiAgICB9LCBbYmx1cl0pO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldFBvcyhpc01vYmlsZUtleWJvYXJkID8gJ2Fic29sdXRlJyA6ICdibG9jaycpO1xuICAgIH0sIFtpc01vYmlsZUtleWJvYXJkXSk7XG4gICAgcmV0dXJuIChfanN4cyhcImZvcm1cIiwgeyBjbGFzc05hbWU6IGAke2NsYXNzTmFtZX1cbiAgICAgICAgICAgICR7cG9zfSB6LTFcbiAgICAgICAgICAgIHctZnVsbCBoLTE1IG14LWF1dG9cbiAgICAgICAgICAgIGJveC1ib3JkZXIgcGItMSBwdC0yXG4gICAgICAgICAgICBmbGV4IGZsZXgtcm93IGdhcC0xIGJvdHRvbS0wYCwgYWN0aW9uOiBcIlwiLCBjaGlsZHJlbjogW19qc3goTWVzc2FnZUlucHV0LCB7IHJlZjogaW5wdXRSZWYsIGRpc2FibGVkOiBwZW5kaW5nLCBjbGFzc05hbWU6IFwiZ3Jvd1wiLCBvbkNoYW5nZTogdHlwZUhhbmRsZXIsIHZhbHVlOiB3cml0ZSB9KSwgX2pzeChTdWJtaXRCdG4sIHsgZGlzYWJsZWQ6IHBlbmRpbmcsIG9uQ2xpY2s6IHN1Ym1pdEhhbmRsZXIsIGNsYXNzTmFtZTogXCJiZy1ncmF5IHJvdW5kZWQtbGcgc2hyaW5rLTAgdy0xMFwiLCBjaGlsZHJlbjogX2pzeChcImltZ1wiLCB7IGRyYWdnYWJsZTogZmFsc2UsIHNyYzogc2VuZCwgY2xhc3NOYW1lOiBcImJsb2NrIGgtZnVsbCBzY2FsZS0yMDAgcmVsYXRpdmUgcmlnaHQtMSBwb2ludGVyLWV2ZW50cy1ub25lXCIgfSkgfSldIH0pKTtcbn07XG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlRm9ybTtcbiIsImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgTWVzc2FnZUxpc3QgZnJvbSAnQGNvbXBvbmVudHMvTWVzc2FnZUxpc3QnO1xuaW1wb3J0IE1lc3NhZ2VGb3JtIGZyb20gJy4vTWVzc2FnZUZvcm0nO1xuaW1wb3J0IHsgdXNlQ2hhdEZlZWQsIHVzZVJlc2l6ZUVsIH0gZnJvbSAnQGhvb2tzJztcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBET19JTlRFTlQsIElOVEVOVF9BQ1RJT05TIH0gZnJvbSAnQHNlcnZpY2VzL2ludGVudHMnO1xuY29uc3QgR3JhcGhpY0NoYXQgPSAoeyBjbGFzc05hbWUsIGhpZGRlbiA9IGZhbHNlIH0pID0+IHtcbiAgICBjb25zdCBmZWVkID0gdXNlQ2hhdEZlZWQoKTtcbiAgICBjb25zdCBsaXN0UmVmID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IFtyZXNpemVMaXN0LCBzZXRMaXN0XSA9IHVzZVJlc2l6ZUVsKCk7XG4gICAgLy8gPT09IEhFTFBFUlMgPT09XG4gICAgZnVuY3Rpb24gc2Nyb2xsWSh7IHRvcCA9IGxpc3RSZWYuY3VycmVudD8uc2Nyb2xsSGVpZ2h0LCBiZWhhdmlvciA9ICdpbnN0YW50JyB9LCBieSA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChoaWRkZW4gfHwgIXRvcClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGlzdFJlZi5jdXJyZW50Py5bYnkgPyAnc2Nyb2xsQnknIDogJ3Njcm9sbFRvJ10oeyB0b3AsIGJlaGF2aW9yIH0pO1xuICAgIH1cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRMaXN0KGxpc3RSZWYuY3VycmVudCk7XG4gICAgfSwgW10pO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiBzY3JvbGxZKHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pLCBbZmVlZF0pO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiBzY3JvbGxZKHsgYmVoYXZpb3I6ICdpbnN0YW50JyB9KSwgW2hpZGRlbl0pO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChyZXNpemVMaXN0LmhlaWdodCA+IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKCdTQ1JPTEwgQlkgQ0hBTkdFRCBIRUlHSFQnLCByZXNpemVMaXN0KTtcbiAgICAgICAgc2Nyb2xsWSh7IGJlaGF2aW9yOiAnaW5zdGFudCcsIHRvcDogLXJlc2l6ZUxpc3QuaGVpZ2h0IH0sIHRydWUpO1xuICAgIH0sIFtyZXNpemVMaXN0XSk7XG4gICAgcmV0dXJuIChfanN4cyhcImFydGljbGVcIiwgeyBoaWRkZW46IGhpZGRlbiwgY2xhc3NOYW1lOiBgaC1mdWxsIHctZnVsbCBmbGV4IGZsZXgtY29sICR7Y2xhc3NOYW1lfWAsIGNoaWxkcmVuOiBbX2pzeChcInNlY3Rpb25cIiwgeyByZWY6IGxpc3RSZWYsIGNsYXNzTmFtZTogXCJvdmVyZmxvdy15LXNjcm9sbCBncm93LTEgc2hyaW5rLTFcIiwgY2hpbGRyZW46IF9qc3goTWVzc2FnZUxpc3QsIHsgaGlzdG9yeTogZmVlZCB9KSB9KSwgX2pzeChcInNlY3Rpb25cIiwgeyBjbGFzc05hbWU6IFwic2hyaW5rLTAgaC0xNSBib3gtYm9yZGVyXCIsIGNoaWxkcmVuOiAhaGlkZGVuICYmIChfanN4KE1lc3NhZ2VGb3JtLCB7IGNsYXNzTmFtZTogXCJtdC1hdXRvIHNocmluay0wXCIsIG9uUHVzaDogKCkgPT4gRE9fSU5URU5UW0lOVEVOVF9BQ1RJT05TLlNFTkRfTUVTU0FHRV0oKSB9KSkgfSldIH0pKTtcbn07XG5leHBvcnQgZGVmYXVsdCBHcmFwaGljQ2hhdDtcbiIsImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzLCBGcmFnbWVudCBhcyBfRnJhZ21lbnQgfSBmcm9tIFwiQGVtb3Rpb24vcmVhY3QvanN4LXJ1bnRpbWVcIjtcbi8qKiBAanN4SW1wb3J0U291cmNlIEBlbW90aW9uL3JlYWN0ICovXG5pbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgRGlzcGxheUJveCBmcm9tICdAY29tcG9uZW50cy9EaXNwbGF5Qm94JztcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJ0Bjb250YWluZXJzL0NvbnRyb2xsZXInO1xuaW1wb3J0IFZpZGVvU3RyZWFtIGZyb20gJy4vVmlkZW9TdHJlYW0nO1xuaW1wb3J0IEdyYXBoaWNDaGF0IGZyb20gJy4vR3JhcGhpY0NoYXQnO1xuaW1wb3J0IHsgdXNlV2ViQXBwIH0gZnJvbSAnQHZrcnVnbGlrb3YvcmVhY3QtdGVsZWdyYW0td2ViLWFwcCc7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZUxheW91dEVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VBcHBBY2Nlc3NvciwgdXNlTW9iaWxlS2V5Ym9hcmQsIHVzZUNvbm5lY3Rpb25TdGF0ZSwgdXNlUGxhdGZvcm0sIHVzZVVucmVhZCwgdXNlQ29ubmVjdGlvbiwgfSBmcm9tICdAaG9va3MnO1xuaW1wb3J0IHsgdXNlU3RhcnQgfSBmcm9tICdob29rcy91c2VTdGFydCc7XG5pbXBvcnQgQnRuIGZyb20gJ0Bjb21wb25lbnRzL0J0bic7XG5pbXBvcnQgeyB3aGVuTG9jYWxNZWRpYSB9IGZyb20gJ0BhcGkvbG9jYWxNZWRpYSc7XG5pbXBvcnQgeyBJTlRFTlRfQUNUSU9OUywgRE9fSU5URU5UIH0gZnJvbSAnQHNlcnZpY2VzL2ludGVudHMnO1xuY29uc3QgTWFpbiA9ICgpID0+IHtcbiAgICBjb25zdCB3ZWJBcHAgPSB1c2VXZWJBcHAoKTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gdXNlQ29ubmVjdGlvbigpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb25TdGF0ZSA9IHVzZUNvbm5lY3Rpb25TdGF0ZSgpO1xuICAgIGNvbnN0IGtleWJvYXJkU3RhdHVzID0gdXNlTW9iaWxlS2V5Ym9hcmQoKTtcbiAgICBjb25zdCBbLCByZWFkXSA9IHVzZVVucmVhZCgpO1xuICAgIGNvbnN0IHBsYXRmb3JtID0gdXNlUGxhdGZvcm0oKTtcbiAgICBjb25zdCBbYWNjZXNzXSA9IHVzZUFwcEFjY2Vzc29yKCk7XG4gICAgY29uc3QgW2lzVGV4dENoYXRTaG93biwgc2V0SXNUZXh0Q2hhdFNob3duXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbbW9kYWwsIHNldE1vZGFsXSA9IHVzZVN0YXRlKDApO1xuICAgIGNvbnN0IG1haW5Dc3MgPSBjc3MgYFxuXHRcdHRvcDogJHtwbGF0Zm9ybSAhPT0gJ3Vua25vd24nID8gJ3ZhcigtLXRnLWNvbnRlbnQtc2FmZS1hcmVhLWluc2V0LXRvcCknIDogMH07XG5cdFx0Ym90dG9tOiAke3BsYXRmb3JtICE9PSAndW5rbm93bicgPyAndmFyKC0tdGctY29udGVudC1zYWZlLWFyZWEtaW5zZXQtYm90dG9tKScgOiAwfTtcblxuXHRcdG1heC1oZWlnaHQ6IHZhcigtLXRnLXZpZXdwb3J0LXN0YWJsZS1oZWlnaHQpO1xuXHRcdG92ZXJmbG93OiBjbGlwO1xuXHRgO1xuICAgIHVzZVN0YXJ0KCgpID0+IHtcbiAgICAgICAgc2V0TW9kYWwoLTEpO1xuICAgICAgICB3aGVuTG9jYWxNZWRpYSgoKSA9PiBzZXRNb2RhbCgxKSk7XG4gICAgfSk7XG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25TdGF0ZSAhPT0gJ2Nvbm5lY3RlZCcpXG4gICAgICAgICAgICBzZXRJc1RleHRDaGF0U2hvd24oZmFsc2UpO1xuICAgIH0sIFtjb25uZWN0aW9uU3RhdGVdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoaXNUZXh0Q2hhdFNob3duKVxuICAgICAgICAgICAgcmVhZCh0cnVlKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmVhZChmYWxzZSk7XG4gICAgfSwgW2lzVGV4dENoYXRTaG93bl0pO1xuICAgIHJldHVybiAoX2pzeHMoX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogYHctZnVsbCBmaXhlZCBweC0zIG1kOnB4LTggYm94LWJvcmRlcmAsIGNzczogbWFpbkNzcywgY2hpbGRyZW46IF9qc3hzKFwic2VjdGlvblwiLCB7IGNsYXNzTmFtZTogXCJcXG4gICAgICAgICAgICBjb250YWluZXIgbWF4LXcteGwgaC1mdWxsXFxuICAgICAgICAgICAgcmVsYXRpdmUgbXgtYXV0byB0ZXh0LXdoaXRlXFxuICAgICAgICAgICAgZmxleCBmbGV4LWNvbFxcbiAgICAgICAgXCIsIGNoaWxkcmVuOiBbX2pzeHMoXCJzZWN0aW9uXCIsIHsgY2xhc3NOYW1lOiBgZ3JvdyBmbGV4IGZsZXgtY29sIGdhcC0xMCBwdC04ICR7a2V5Ym9hcmRTdGF0dXMgPyAncGItMCcgOiAncGItOCd9IGFic29sdXRlIHRvcC0wIGJvdHRvbS0wIHctZnVsbGAsIGNoaWxkcmVuOiBbX2pzeChEaXNwbGF5Qm94LCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBvdmVyZmxvdy1oaWRkZW4gc2hyaW5rLTBcIiwgY2hpbGRyZW46IF9qc3goVmlkZW9TdHJlYW0sIHsgcmVtb3RlOiB0cnVlIH0pIH0pLCBfanN4cyhEaXNwbGF5Qm94LCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIiwgY2hpbGRyZW46IFtfanN4KEdyYXBoaWNDaGF0LCB7IGhpZGRlbjogIWlzVGV4dENoYXRTaG93biB9KSwgX2pzeChWaWRlb1N0cmVhbSwgeyByZW1vdGU6IGZhbHNlLCBoaWRkZW46IGlzVGV4dENoYXRTaG93biB9KV0gfSldIH0pLCBfanN4KFwiZGl2XCIsIHsgc3R5bGU6IHsgZGlzcGxheToga2V5Ym9hcmRTdGF0dXMgPyAnbm9uZScgOiAnYmxvY2snIH0sIGNsYXNzTmFtZTogXCJzaHJpbmstMCBoLTI0XCIsIGNoaWxkcmVuOiBfanN4KENvbnRyb2xsZXIsIHsgb25OZXh0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvblN0YXRlICE9PSAnY29ubmVjdGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2Bjb25uZWN0aW9uYCBpcyBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvblRleHRDaGF0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc1RleHRDaGF0U2hvd24oIWlzVGV4dENoYXRTaG93bik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSkgfSldIH0pIH0pLCBfanN4cyhcImRpdlwiLCB7IGhpZGRlbjogYWNjZXNzLCBjbGFzc05hbWU6IFwiZml4ZWQgdy1mdWxsIGgtZnVsbCBiZy13aGl0ZS8zMCBmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBmbGV4LWNvbFwiLCBjaGlsZHJlbjogW19qc3goXCJzZWN0aW9uXCIsIHsgaGlkZGVuOiBtb2RhbCAhPT0gMCwgY2xhc3NOYW1lOiBcImJnLWdyYXkgdGV4dC13aGl0ZSByb3VuZGVkLTJ4bCBwLTQgaC1bNTAlXSB3LVs5MCVdXCIsIGNoaWxkcmVuOiBfanN4cyhcInNlY3Rpb25cIiwgeyBjbGFzc05hbWU6IFwidy1mdWxsIGgtZnVsbCBmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyXCIsIGNoaWxkcmVuOiBbX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IFwibWItMiBtdC1hdXRvIHRleHQteGxcIiwgY2hpbGRyZW46IFwiXFx1MDQxNFxcdTA0M0VcXHUwNDMxXFx1MDQ0MFxcdTA0M0UgXFx1MDQzRlxcdTA0M0VcXHUwNDM2XFx1MDQzMFxcdTA0M0JcXHUwNDNFXFx1MDQzMlxcdTA0MzBcXHUwNDQyXFx1MDQ0QyBcXHUwNDMyIFxcdTA0NDdcXHUwNDMwXFx1MDQ0Mi1cXHUwNDQwXFx1MDQ0M1xcdTA0M0JcXHUwNDM1XFx1MDQ0MlxcdTA0M0FcXHUwNDQzISBcXHUwNDI3XFx1MDQ0MlxcdTA0M0VcXHUwNDMxXFx1MDQ0QiBcXHUwNDNEXFx1MDQzMFxcdTA0NDdcXHUwNDMwXFx1MDQ0MlxcdTA0NEMsIFxcdTA0M0RcXHUwNDMwXFx1MDQzNlxcdTA0M0NcXHUwNDM4XFx1MDQ0MlxcdTA0MzUgXFx1MDQzQVxcdTA0M0RcXHUwNDNFXFx1MDQzRlxcdTA0M0FcXHUwNDQzIFxcXCJcXHUwNDFEXFx1MDQzMFxcdTA0NDdcXHUwNDMwXFx1MDQ0MlxcdTA0NENcXFwiIFxcdTA0MzggXFx1MDQ0MFxcdTA0MzBcXHUwNDM3XFx1MDQ0MFxcdTA0MzVcXHUwNDQ4XFx1MDQzOFxcdTA0NDJcXHUwNDM1IFxcdTA0M0ZcXHUwNDQwXFx1MDQzOFxcdTA0M0JcXHUwNDNFXFx1MDQzNlxcdTA0MzVcXHUwNDNEXFx1MDQzOFxcdTA0NEUgXFx1MDQzNFxcdTA0M0VcXHUwNDQxXFx1MDQ0MlxcdTA0NDNcXHUwNDNGIFxcdTA0M0EgXFx1MDQxMlxcdTA0MzBcXHUwNDQ4XFx1MDQzOFxcdTA0M0MgXFx1MDQzRlxcdTA0M0VcXHUwNDNCXFx1MDQ0Q1xcdTA0MzdcXHUwNDNFXFx1MDQzMlxcdTA0MzBcXHUwNDQyXFx1MDQzNVxcdTA0M0JcXHUwNDRDXFx1MDQ0MVxcdTA0M0FcXHUwNDM4XFx1MDQzQyBcXHUwNDNDXFx1MDQzNVxcdTA0MzRcXHUwNDM4XFx1MDQzMFwiIH0pLCBfanN4KEJ0biwgeyBvbkNsaWNrOiAoKSA9PiBET19JTlRFTlRbSU5URU5UX0FDVElPTlMuU1RBUlRfQVBQXSgpLCBjbGFzc05hbWU6IFwiYm9yZGVyLTIgYm9yZGVyLXdoaXRlIHJvdW5kZWQtMnhsIG10LWF1dG9cIiwgY2hpbGRyZW46IF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImZvbnQtYm9sZCB1cHBlcmNhc2VcIiwgY2hpbGRyZW46IFwiXFx1MDQxRFxcdTA0MzBcXHUwNDQ3XFx1MDQzMFxcdTA0NDJcXHUwNDRDXCIgfSkgfSldIH0pIH0pLCBfanN4KFwic2VjdGlvblwiLCB7IGhpZGRlbjogbW9kYWwgIT09IDEsIGNsYXNzTmFtZTogXCJiZy1ncmF5IHRleHQtd2hpdGUgcm91bmRlZC0yeGwgcC00IGgtWzUwJV0gdy1bOTAlXVwiLCBjaGlsZHJlbjogX2pzeHMoXCJzZWN0aW9uXCIsIHsgY2xhc3NOYW1lOiBcInctZnVsbCBoLWZ1bGwgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlclwiLCBjaGlsZHJlbjogW19qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcIm1iLTIgdGV4dC14bFwiLCBjaGlsZHJlbjogXCJcXHUwNDFGXFx1MDQ0MFxcdTA0MzhcXHUwNDNCXFx1MDQzRVxcdTA0MzZcXHUwNDM1XFx1MDQzRFxcdTA0MzhcXHUwNDM1IFxcdTA0M0RcXHUwNDM1IFxcdTA0NDFcXHUwNDNDXFx1MDQzRVxcdTA0MzNcXHUwNDNCXFx1MDQzRSBcXHUwNDNGXFx1MDQzRVxcdTA0M0JcXHUwNDQzXFx1MDQ0N1xcdTA0MzhcXHUwNDQyXFx1MDQ0QyBcXHUwNDM0XFx1MDQzRVxcdTA0NDFcXHUwNDQyXFx1MDQ0M1xcdTA0M0YgXFx1MDQzQSBcXHUwNDEyXFx1MDQzMFxcdTA0NDhcXHUwNDM4XFx1MDQzQyBcXHUwNDNBXFx1MDQzMFxcdTA0M0NcXHUwNDM1XFx1MDQ0MFxcdTA0MzUgXFx1MDQzOCBcXHUwNDNDXFx1MDQzOFxcdTA0M0FcXHUwNDQwXFx1MDQzRVxcdTA0NDRcXHUwNDNFXFx1MDQzRFxcdTA0NDMsIFxcdTA0NDNcXHUwNDMyXFx1MDQ0Qi5cIiB9KSwgX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IFwibWItMiB0ZXh0LXhsXCIsIGNoaWxkcmVuOiBcIlxcdTA0MjdcXHUwNDQyXFx1MDQzRVxcdTA0MzFcXHUwNDRCIFxcdTA0M0ZcXHUwNDNFXFx1MDQzRlxcdTA0NDBcXHUwNDNFXFx1MDQzMVxcdTA0M0VcXHUwNDMyXFx1MDQzMFxcdTA0NDJcXHUwNDRDIFxcdTA0MzVcXHUwNDQ5XFx1MDQ1MSBcXHUwNDQwXFx1MDQzMFxcdTA0MzcsIFxcdTA0M0ZcXHUwNDM1XFx1MDQ0MFxcdTA0MzVcXHUwNDM3XFx1MDQzMFxcdTA0MzNcXHUwNDQwXFx1MDQ0M1xcdTA0MzdcXHUwNDM4XFx1MDQ0MlxcdTA0MzUgXFx1MDQ0MVxcdTA0NDJcXHUwNDQwXFx1MDQzMFxcdTA0M0RcXHUwNDM4XFx1MDQ0NlxcdTA0NDMuXCIgfSldIH0pIH0pXSB9KV0gfSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IE1haW47XG4iLCJpbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNYWluIGZyb20gJy4vY29udGFpbmVycy9NYWluJztcbmltcG9ydCBDaGF0UHJvdmlkZXIgZnJvbSAnQHN0b3JlL0NoYXRQcm92aWRlcic7XG5pbXBvcnQgeyBXZWJBcHBQcm92aWRlciB9IGZyb20gJ0B2a3J1Z2xpa292L3JlYWN0LXRlbGVncmFtLXdlYi1hcHAnO1xuY29uc3QgTWVtb01haW4gPSBSZWFjdC5tZW1vKE1haW4pO1xuY29uc3QgTWVtb0NoYXRQcm92aWRlciA9IFJlYWN0Lm1lbW8oQ2hhdFByb3ZpZGVyKTtcbmNvbnN0IEFwcCA9ICgpID0+IChfanN4KFdlYkFwcFByb3ZpZGVyLCB7IGNoaWxkcmVuOiBfanN4KE1lbW9DaGF0UHJvdmlkZXIsIHsgY2hpbGRyZW46IF9qc3goTWVtb01haW4sIHt9KSB9KSB9KSk7XG5leHBvcnQgZGVmYXVsdCBBcHA7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1984\n")},2228:(module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval("// extracted by mini-css-extract-plugin\n\n    if(true) {\n      (function() {\n        var localsJsonString = undefined;\n        // 1750330082793\n        var cssReload = __webpack_require__(9140)(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIyOC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNVO0FBQ1YsT0FBTyxJQUFVO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtQkFBTyxDQUFDLElBQTBFLGVBQWU7QUFDekg7QUFDQTtBQUNBLFVBQVUsVUFBVTtBQUNwQixVQUFVLFVBQVU7QUFDcEIsVUFBVSxVQUFVO0FBQ3BCO0FBQ0EsVUFBVSxVQUFVO0FBQ3BCLFVBQVU7QUFDVixVQUFVLGlCQUFpQjtBQUMzQjtBQUNBLFFBQVEsVUFBVTtBQUNsQjtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvc3R5bGVzLmNzcz81MjMxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9O1xuICAgIGlmKG1vZHVsZS5ob3QpIHtcbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxvY2Fsc0pzb25TdHJpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIDE3NTAzMzAwODI3OTNcbiAgICAgICAgdmFyIGNzc1JlbG9hZCA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9obXIvaG90TW9kdWxlUmVwbGFjZW1lbnQuanNcIikobW9kdWxlLmlkLCB7fSk7XG4gICAgICAgIC8vIG9ubHkgaW52YWxpZGF0ZSB3aGVuIGxvY2FscyBjaGFuZ2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1vZHVsZS5ob3QuZGF0YSAmJlxuICAgICAgICAgIG1vZHVsZS5ob3QuZGF0YS52YWx1ZSAmJlxuICAgICAgICAgIG1vZHVsZS5ob3QuZGF0YS52YWx1ZSAhPT0gbG9jYWxzSnNvblN0cmluZ1xuICAgICAgICApIHtcbiAgICAgICAgICBtb2R1bGUuaG90LmludmFsaWRhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2R1bGUuaG90LmFjY2VwdCgpO1xuICAgICAgICB9XG4gICAgICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgZGF0YS52YWx1ZSA9IGxvY2Fsc0pzb25TdHJpbmc7XG4gICAgICAgICAgY3NzUmVsb2FkKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSkoKTtcbiAgICB9XG4gICJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2228\n")},3011:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   U: () => (/* binding */ PROFILE_EVENTS),\n/* harmony export */   W: () => (/* binding */ Profile)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(5279);\n/* harmony import */ var _Room__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(783);\n/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1295);\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8349);\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8175);\n\n\n\n\n\n// == EVENT SYSTEM ==\nconst PROFILE_EVENTS = {\n    UPDATE_ROOM: 'updateroom',\n};\nObject.freeze(PROFILE_EVENTS);\n// == DAEMON ==\nconst ID = (0,uuid__WEBPACK_IMPORTED_MODULE_4__/* [\"default\"] */ .A)();\nconst USER = new _User__WEBPACK_IMPORTED_MODULE_1__/* .User */ .K(ID);\n(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__/* .addDebug */ .H0)('client', ID);\nlet room = new _Room__WEBPACK_IMPORTED_MODULE_0__/* .Room */ .W();\nlet chest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_2__/* .ListenerChest */ .q9();\nfunction makeRoom() {\n    room.offAll();\n    room = new _Room__WEBPACK_IMPORTED_MODULE_0__/* .Room */ .W();\n    chest.exec(PROFILE_EVENTS.UPDATE_ROOM, { room });\n}\nchest.on(PROFILE_EVENTS.UPDATE_ROOM, ({ room }) => room.addUser(USER));\nmakeRoom();\nconst Profile = {\n    ...chest,\n    get id() {\n        return ID;\n    },\n    get user() {\n        return USER;\n    },\n    get room() {\n        return room;\n    },\n    updateRoom() {\n        makeRoom();\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAxMS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBb0M7QUFDTjtBQUNBO0FBQ3NCO0FBQ2Q7QUFDdEM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5REFBTTtBQUNqQixpQkFBaUIsZ0RBQUk7QUFDckIsOERBQVE7QUFDUixlQUFlLGdEQUFJO0FBQ25CLGdCQUFnQix3RUFBYTtBQUM3QjtBQUNBO0FBQ0EsZUFBZSxnREFBSTtBQUNuQiw2Q0FBNkMsTUFBTTtBQUNuRDtBQUNBLHdDQUF3QyxNQUFNO0FBQzlDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9lbnRpdGllcy9Qcm9maWxlLnRzP2Q0ZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBSb29tIH0gZnJvbSAnLi9Sb29tJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuL1VzZXInO1xuaW1wb3J0IHsgTGlzdGVuZXJDaGVzdCB9IGZyb20gJ0BsaWIvcHByaW50ZXItdG9vbHMnO1xuaW1wb3J0IHsgYWRkRGVidWcgfSBmcm9tICdAbGliL3V0aWxzJztcbi8vID09IEVWRU5UIFNZU1RFTSA9PVxuZXhwb3J0IGNvbnN0IFBST0ZJTEVfRVZFTlRTID0ge1xuICAgIFVQREFURV9ST09NOiAndXBkYXRlcm9vbScsXG59O1xuT2JqZWN0LmZyZWV6ZShQUk9GSUxFX0VWRU5UUyk7XG4vLyA9PSBEQUVNT04gPT1cbmNvbnN0IElEID0gdXVpZHY0KCk7XG5jb25zdCBVU0VSID0gbmV3IFVzZXIoSUQpO1xuYWRkRGVidWcoJ2NsaWVudCcsIElEKTtcbmxldCByb29tID0gbmV3IFJvb20oKTtcbmxldCBjaGVzdCA9IG5ldyBMaXN0ZW5lckNoZXN0KCk7XG5mdW5jdGlvbiBtYWtlUm9vbSgpIHtcbiAgICByb29tLm9mZkFsbCgpO1xuICAgIHJvb20gPSBuZXcgUm9vbSgpO1xuICAgIGNoZXN0LmV4ZWMoUFJPRklMRV9FVkVOVFMuVVBEQVRFX1JPT00sIHsgcm9vbSB9KTtcbn1cbmNoZXN0Lm9uKFBST0ZJTEVfRVZFTlRTLlVQREFURV9ST09NLCAoeyByb29tIH0pID0+IHJvb20uYWRkVXNlcihVU0VSKSk7XG5tYWtlUm9vbSgpO1xuZXhwb3J0IGNvbnN0IFByb2ZpbGUgPSB7XG4gICAgLi4uY2hlc3QsXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gSUQ7XG4gICAgfSxcbiAgICBnZXQgdXNlcigpIHtcbiAgICAgICAgcmV0dXJuIFVTRVI7XG4gICAgfSxcbiAgICBnZXQgcm9vbSgpIHtcbiAgICAgICAgcmV0dXJuIHJvb207XG4gICAgfSxcbiAgICB1cGRhdGVSb29tKCkge1xuICAgICAgICBtYWtlUm9vbSgpO1xuICAgIH0sXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3011\n")},3396:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rE: () => (/* reexport safe */ _Peer__WEBPACK_IMPORTED_MODULE_0__.rE),\n/* harmony export */   xM: () => (/* reexport safe */ _Peer__WEBPACK_IMPORTED_MODULE_0__.xM)\n/* harmony export */ });\n/* harmony import */ var _Peer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7918);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM5Ni5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2xpYi93ZWJydGMvaW5kZXgudHM/N2VlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL1BlZXInO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3396\n")},3900:(module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval('/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4848);\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5338);\n/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1984);\n/* harmony import */ var _services_init__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5283);\n/* harmony import */ var _styles_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2228);\n\n\n\n\n\nconst root = react_dom_client__WEBPACK_IMPORTED_MODULE_1__.createRoot(document.getElementById(\'root\'));\nroot.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_App__WEBPACK_IMPORTED_MODULE_2__["default"], {}));\nif (true) {\n    module.hot.accept(1984, __WEBPACK_OUTDATED_DEPENDENCIES__ => { /* harmony import */ _App__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1984);\n(() => {\n        const NextApp = (__webpack_require__(1984)["default"]);\n        root.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NextApp, {}));\n    })(__WEBPACK_OUTDATED_DEPENDENCIES__); });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkwMC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRDtBQUNSO0FBQ2hCO0FBQ0E7QUFDRjtBQUN0QixhQUFhLHdEQUFtQjtBQUNoQyxZQUFZLHNEQUFJLENBQUMsNENBQUcsSUFBSTtBQUN4QixJQUFJLElBQVU7QUFDZCxJQUFJLGlCQUFpQixDQUFDLElBQU8sRUFBRTtBQUFBO0FBQy9CLHdCQUF3QixzQ0FBd0I7QUFDaEQsb0JBQW9CLHNEQUFJLFlBQVk7QUFDcEMsS0FBSztBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvaW5kZXgudHN4P2JkN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JztcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xuaW1wb3J0ICdAc2VydmljZXMvaW5pdCc7XG5pbXBvcnQgJy4vc3R5bGVzLmNzcyc7XG5jb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcbnJvb3QucmVuZGVyKF9qc3goQXBwLCB7fSkpO1xuaWYgKG1vZHVsZS5ob3QpIHtcbiAgICBtb2R1bGUuaG90LmFjY2VwdCgnLi9BcHAnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IE5leHRBcHAgPSByZXF1aXJlKCcuL0FwcCcpLmRlZmF1bHQ7XG4gICAgICAgIHJvb3QucmVuZGVyKF9qc3goTmV4dEFwcCwge30pKTtcbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3900\n')},3919:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   zl: () => (/* binding */ SIGNAL_ACTIONS)\n/* harmony export */ });\n/* unused harmony exports SIGNAL_ACTION_ATOM, SIGNAL_DATA_NAME */\nconst SIGNAL_ACTION_ATOM = {\n\tICE: 'ice',\n\tSDP: 'sdp',\n\tTARGET: 'target',\n};\n\nconst SIGNAL_DATA_NAME = {\n\t[SIGNAL_ACTION_ATOM.ICE]: 'ice',\n\t[SIGNAL_ACTION_ATOM.SDP]: 'sdp',\n\t[SIGNAL_ACTION_ATOM.TARGET]: 'offer',\n};\n\nconst SIGNAL_ACTIONS = {\n\tget RELAY_SDP() {\n\t\treturn this.getRelay(SIGNAL_ACTION_ATOM.SDP);\n\t},\n\tget RELAY_ICE() {\n\t\treturn this.getRelay(SIGNAL_ACTION_ATOM.ICE);\n\t},\n\tget RELAY_TARGET() {\n\t\treturn this.getRelay(SIGNAL_ACTION_ATOM.TARGET);\n\t},\n\n\tget ACCEPT_SDP() {\n\t\treturn this.getAccept(SIGNAL_ACTION_ATOM.SDP);\n\t},\n\tget ACCEPT_ICE() {\n\t\treturn this.getAccept(SIGNAL_ACTION_ATOM.ICE);\n\t},\n\tget ACCEPT_TARGET() {\n\t\treturn this.getAccept(SIGNAL_ACTION_ATOM.TARGET);\n\t},\n\n\tgetRelay(atom) {\n\t\treturn `relay${atom}`;\n\t},\n\tgetAccept(atom) {\n\t\treturn `accept${atom}`;\n\t},\n};\n\nObject.freeze(SIGNAL_ACTION_ATOM);\nObject.freeze(SIGNAL_DATA_NAME);\nObject.freeze(SIGNAL_ACTIONS);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkxOS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGlCQUFpQixLQUFLO0FBQ3RCLEVBQUU7QUFDRjtBQUNBLGtCQUFrQixLQUFLO0FBQ3ZCLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9hcGkvc29ja2V0LWFwaS5qcz85YzBjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBTSUdOQUxfQUNUSU9OX0FUT00gPSB7XG5cdElDRTogJ2ljZScsXG5cdFNEUDogJ3NkcCcsXG5cdFRBUkdFVDogJ3RhcmdldCcsXG59O1xuXG5leHBvcnQgY29uc3QgU0lHTkFMX0RBVEFfTkFNRSA9IHtcblx0W1NJR05BTF9BQ1RJT05fQVRPTS5JQ0VdOiAnaWNlJyxcblx0W1NJR05BTF9BQ1RJT05fQVRPTS5TRFBdOiAnc2RwJyxcblx0W1NJR05BTF9BQ1RJT05fQVRPTS5UQVJHRVRdOiAnb2ZmZXInLFxufTtcblxuZXhwb3J0IGNvbnN0IFNJR05BTF9BQ1RJT05TID0ge1xuXHRnZXQgUkVMQVlfU0RQKCkge1xuXHRcdHJldHVybiB0aGlzLmdldFJlbGF5KFNJR05BTF9BQ1RJT05fQVRPTS5TRFApO1xuXHR9LFxuXHRnZXQgUkVMQVlfSUNFKCkge1xuXHRcdHJldHVybiB0aGlzLmdldFJlbGF5KFNJR05BTF9BQ1RJT05fQVRPTS5JQ0UpO1xuXHR9LFxuXHRnZXQgUkVMQVlfVEFSR0VUKCkge1xuXHRcdHJldHVybiB0aGlzLmdldFJlbGF5KFNJR05BTF9BQ1RJT05fQVRPTS5UQVJHRVQpO1xuXHR9LFxuXG5cdGdldCBBQ0NFUFRfU0RQKCkge1xuXHRcdHJldHVybiB0aGlzLmdldEFjY2VwdChTSUdOQUxfQUNUSU9OX0FUT00uU0RQKTtcblx0fSxcblx0Z2V0IEFDQ0VQVF9JQ0UoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0QWNjZXB0KFNJR05BTF9BQ1RJT05fQVRPTS5JQ0UpO1xuXHR9LFxuXHRnZXQgQUNDRVBUX1RBUkdFVCgpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRBY2NlcHQoU0lHTkFMX0FDVElPTl9BVE9NLlRBUkdFVCk7XG5cdH0sXG5cblx0Z2V0UmVsYXkoYXRvbSkge1xuXHRcdHJldHVybiBgcmVsYXkke2F0b219YDtcblx0fSxcblx0Z2V0QWNjZXB0KGF0b20pIHtcblx0XHRyZXR1cm4gYGFjY2VwdCR7YXRvbX1gO1xuXHR9LFxufTtcblxuT2JqZWN0LmZyZWV6ZShTSUdOQUxfQUNUSU9OX0FUT00pO1xuT2JqZWN0LmZyZWV6ZShTSUdOQUxfREFUQV9OQU1FKTtcbk9iamVjdC5mcmVlemUoU0lHTkFMX0FDVElPTlMpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3919\n")},4391:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IL: () => (/* binding */ peerSignalBridge),\n/* harmony export */   kI: () => (/* binding */ chatPeerBridge)\n/* harmony export */ });\n/* unused harmony export CHAT_NAME */\n/* harmony import */ var _lib_webrtc_Peer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7918);\n/* harmony import */ var _Chat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1582);\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8175);\n/* harmony import */ var _Signal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(188);\n/* harmony import */ var _api_socket_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3919);\n\n\n\n\n\nconst CHAT_NAME = 'CHAT';\nfunction chatPeerBridge({ clientId: client, target, chat, peer, }) {\n    peer.addDataChannel(CHAT_NAME);\n    const peerListeners = {\n        [_lib_webrtc_Peer__WEBPACK_IMPORTED_MODULE_0__/* .PEER_EVENTS */ .rE.TEXT]: ({ data: text, label }) => {\n            if (label !== CHAT_NAME)\n                return;\n            chat.add(target, text);\n        },\n    };\n    const historyListeners = {\n        [_Chat__WEBPACK_IMPORTED_MODULE_1__/* .CHAT_EVENTS */ .N8.ADD]: ({ item: { userId, text } }) => {\n            if (userId !== client)\n                return;\n            peer.send(text, CHAT_NAME);\n        },\n    };\n    (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .listen */ .KT)(peer, peerListeners);\n    (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .listen */ .KT)(chat, historyListeners);\n    return () => {\n        (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .unlisten */ .Bo)(peer, peerListeners);\n        (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .unlisten */ .Bo)(chat, historyListeners);\n    };\n}\nfunction peerSignalBridge(peer, target) {\n    // === LISTENERS\n    const signalListeners = {\n        [_api_socket_api__WEBPACK_IMPORTED_MODULE_4__/* .SIGNAL_ACTIONS */ .zl.ACCEPT_SDP]: ({ target: id, sdp }) => {\n            if (target !== id)\n                return;\n            peer.setRemoteSdp(sdp);\n        },\n        [_api_socket_api__WEBPACK_IMPORTED_MODULE_4__/* .SIGNAL_ACTIONS */ .zl.ACCEPT_ICE]: ({ target: id, ice }) => {\n            if (target !== id)\n                return;\n            peer.addCandidate(ice);\n        },\n    };\n    const peerListeners = {\n        [_lib_webrtc_Peer__WEBPACK_IMPORTED_MODULE_0__/* .PEER_EVENTS */ .rE.SDP]: ({ sdp }) => {\n            _Signal__WEBPACK_IMPORTED_MODULE_3__/* .Signal */ .H.exec(_api_socket_api__WEBPACK_IMPORTED_MODULE_4__/* .SIGNAL_ACTIONS */ .zl.RELAY_SDP, { target, sdp });\n        },\n        [_lib_webrtc_Peer__WEBPACK_IMPORTED_MODULE_0__/* .PEER_EVENTS */ .rE.ICE]: ({ candidate }) => {\n            _Signal__WEBPACK_IMPORTED_MODULE_3__/* .Signal */ .H.exec(_api_socket_api__WEBPACK_IMPORTED_MODULE_4__/* .SIGNAL_ACTIONS */ .zl.RELAY_ICE, { target, ice: candidate });\n        },\n    };\n    // === HELPERS ===\n    const listenSignal = () => (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .listen */ .KT)(_Signal__WEBPACK_IMPORTED_MODULE_3__/* .Signal */ .H, signalListeners);\n    const unlistenSignal = () => (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .unlisten */ .Bo)(_Signal__WEBPACK_IMPORTED_MODULE_3__/* .Signal */ .H, signalListeners);\n    const listenPeer = () => (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .listen */ .KT)(peer, peerListeners);\n    const unlistenPeer = () => (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .unlisten */ .Bo)(peer, peerListeners);\n    // === EXEC ===\n    listenPeer();\n    listenSignal();\n    return () => {\n        unlistenPeer();\n        unlistenSignal();\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDM5MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStDO0FBQ1Y7QUFDUztBQUNaO0FBQ2lCO0FBQzVDO0FBQ0EsMEJBQTBCLHVDQUF1QztBQUN4RTtBQUNBO0FBQ0EsU0FBUyxtRUFBVyxXQUFXLG1CQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVMsd0RBQVcsVUFBVSxRQUFRLGdCQUFnQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxJQUFJLDREQUFNO0FBQ1YsSUFBSSw0REFBTTtBQUNWO0FBQ0EsUUFBUSw4REFBUTtBQUNoQixRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxTQUFTLHFFQUFjLGlCQUFpQixpQkFBaUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFNBQVMscUVBQWMsaUJBQWlCLGlCQUFpQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVMsbUVBQVcsVUFBVSxLQUFLO0FBQ25DLFlBQVksb0RBQU0sTUFBTSxxRUFBYyxjQUFjLGFBQWE7QUFDakUsU0FBUztBQUNULFNBQVMsbUVBQVcsVUFBVSxXQUFXO0FBQ3pDLFlBQVksb0RBQU0sTUFBTSxxRUFBYyxjQUFjLHdCQUF3QjtBQUM1RSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLCtCQUErQiw0REFBTSxDQUFDLG9EQUFNO0FBQzVDLGlDQUFpQyw4REFBUSxDQUFDLG9EQUFNO0FBQ2hELDZCQUE2Qiw0REFBTTtBQUNuQywrQkFBK0IsOERBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2VudGl0aWVzL2hlbHBlcnMudHM/MWU2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQRUVSX0VWRU5UUyB9IGZyb20gJ0BsaWIvd2VicnRjL1BlZXInO1xuaW1wb3J0IHsgQ0hBVF9FVkVOVFMgfSBmcm9tICcuL0NoYXQnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbiB9IGZyb20gJ0BsaWIvdXRpbHMnO1xuaW1wb3J0IHsgU2lnbmFsIH0gZnJvbSAnLi9TaWduYWwnO1xuaW1wb3J0IHsgU0lHTkFMX0FDVElPTlMgfSBmcm9tICcuLi9hcGkvc29ja2V0LWFwaSc7XG5leHBvcnQgY29uc3QgQ0hBVF9OQU1FID0gJ0NIQVQnO1xuZXhwb3J0IGZ1bmN0aW9uIGNoYXRQZWVyQnJpZGdlKHsgY2xpZW50SWQ6IGNsaWVudCwgdGFyZ2V0LCBjaGF0LCBwZWVyLCB9KSB7XG4gICAgcGVlci5hZGREYXRhQ2hhbm5lbChDSEFUX05BTUUpO1xuICAgIGNvbnN0IHBlZXJMaXN0ZW5lcnMgPSB7XG4gICAgICAgIFtQRUVSX0VWRU5UUy5URVhUXTogKHsgZGF0YTogdGV4dCwgbGFiZWwgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGxhYmVsICE9PSBDSEFUX05BTUUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2hhdC5hZGQodGFyZ2V0LCB0ZXh0KTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGNvbnN0IGhpc3RvcnlMaXN0ZW5lcnMgPSB7XG4gICAgICAgIFtDSEFUX0VWRU5UUy5BRERdOiAoeyBpdGVtOiB7IHVzZXJJZCwgdGV4dCB9IH0pID0+IHtcbiAgICAgICAgICAgIGlmICh1c2VySWQgIT09IGNsaWVudClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBwZWVyLnNlbmQodGV4dCwgQ0hBVF9OQU1FKTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGxpc3RlbihwZWVyLCBwZWVyTGlzdGVuZXJzKTtcbiAgICBsaXN0ZW4oY2hhdCwgaGlzdG9yeUxpc3RlbmVycyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgdW5saXN0ZW4ocGVlciwgcGVlckxpc3RlbmVycyk7XG4gICAgICAgIHVubGlzdGVuKGNoYXQsIGhpc3RvcnlMaXN0ZW5lcnMpO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcGVlclNpZ25hbEJyaWRnZShwZWVyLCB0YXJnZXQpIHtcbiAgICAvLyA9PT0gTElTVEVORVJTXG4gICAgY29uc3Qgc2lnbmFsTGlzdGVuZXJzID0ge1xuICAgICAgICBbU0lHTkFMX0FDVElPTlMuQUNDRVBUX1NEUF06ICh7IHRhcmdldDogaWQsIHNkcCB9KSA9PiB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICE9PSBpZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBwZWVyLnNldFJlbW90ZVNkcChzZHApO1xuICAgICAgICB9LFxuICAgICAgICBbU0lHTkFMX0FDVElPTlMuQUNDRVBUX0lDRV06ICh7IHRhcmdldDogaWQsIGljZSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICE9PSBpZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBwZWVyLmFkZENhbmRpZGF0ZShpY2UpO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgY29uc3QgcGVlckxpc3RlbmVycyA9IHtcbiAgICAgICAgW1BFRVJfRVZFTlRTLlNEUF06ICh7IHNkcCB9KSA9PiB7XG4gICAgICAgICAgICBTaWduYWwuZXhlYyhTSUdOQUxfQUNUSU9OUy5SRUxBWV9TRFAsIHsgdGFyZ2V0LCBzZHAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFtQRUVSX0VWRU5UUy5JQ0VdOiAoeyBjYW5kaWRhdGUgfSkgPT4ge1xuICAgICAgICAgICAgU2lnbmFsLmV4ZWMoU0lHTkFMX0FDVElPTlMuUkVMQVlfSUNFLCB7IHRhcmdldCwgaWNlOiBjYW5kaWRhdGUgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICAvLyA9PT0gSEVMUEVSUyA9PT1cbiAgICBjb25zdCBsaXN0ZW5TaWduYWwgPSAoKSA9PiBsaXN0ZW4oU2lnbmFsLCBzaWduYWxMaXN0ZW5lcnMpO1xuICAgIGNvbnN0IHVubGlzdGVuU2lnbmFsID0gKCkgPT4gdW5saXN0ZW4oU2lnbmFsLCBzaWduYWxMaXN0ZW5lcnMpO1xuICAgIGNvbnN0IGxpc3RlblBlZXIgPSAoKSA9PiBsaXN0ZW4ocGVlciwgcGVlckxpc3RlbmVycyk7XG4gICAgY29uc3QgdW5saXN0ZW5QZWVyID0gKCkgPT4gdW5saXN0ZW4ocGVlciwgcGVlckxpc3RlbmVycyk7XG4gICAgLy8gPT09IEVYRUMgPT09XG4gICAgbGlzdGVuUGVlcigpO1xuICAgIGxpc3RlblNpZ25hbCgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHVubGlzdGVuUGVlcigpO1xuICAgICAgICB1bmxpc3RlblNpZ25hbCgpO1xuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4391\n")},5283:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval("\n// EXTERNAL MODULE: ./src/lib/utils/index.ts + 3 modules\nvar utils = __webpack_require__(8175);\n// EXTERNAL MODULE: ./node_modules/socket.io-client/build/esm/index.js + 28 modules\nvar esm = __webpack_require__(3508);\n// EXTERNAL MODULE: ./src/lib/pprinter-tools/index.ts + 6 modules\nvar pprinter_tools = __webpack_require__(8349);\n// EXTERNAL MODULE: ./src/api/socket-api.js\nvar socket_api = __webpack_require__(3919);\n;// ./src/api/socket.ts\n\n\n\n\n// === GENERAL DATA ===\n(0,utils/* addDebug */.H0)('signalHost', undefined);\nconst SIGNAL_SERVER =  null ?? 'https://vde0.chat';\n// === PRIVATE FIELDS AND METHODS ===\nconst webSocket = (0,esm.io)(SIGNAL_SERVER, {\n    autoConnect: false,\n});\nconst chest = new pprinter_tools/* ListenerChest */.q9();\n// === HELPERS ===\nconst safeConnecting = (f) => {\n    if (webSocket.disconnected)\n        webSocket.connect();\n    f();\n};\n// === MAKE LISTENING ===\n(0,utils/* listen */.KT)(webSocket, {\n    [socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_ICE]: (payload) => chest.exec(socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_ICE, payload),\n    [socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_SDP]: (payload) => chest.exec(socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_SDP, payload),\n    [socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_TARGET]: (payload) => chest.exec(socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_TARGET, payload),\n});\n(0,utils/* listen */.KT)(chest, {\n    [socket_api/* SIGNAL_ACTIONS */.zl.RELAY_ICE]: (payload) => safeConnecting(() => webSocket.emit(socket_api/* SIGNAL_ACTIONS */.zl.RELAY_ICE, payload)),\n    [socket_api/* SIGNAL_ACTIONS */.zl.RELAY_SDP]: (payload) => safeConnecting(() => webSocket.emit(socket_api/* SIGNAL_ACTIONS */.zl.RELAY_SDP, payload)),\n    [socket_api/* SIGNAL_ACTIONS */.zl.RELAY_TARGET]: (payload) => safeConnecting(() => webSocket.emit(socket_api/* SIGNAL_ACTIONS */.zl.RELAY_TARGET, payload)),\n});\n\n\n// EXTERNAL MODULE: ./src/entities/Signal.ts\nvar Signal = __webpack_require__(188);\n;// ./src/services/signal.ts\n\n\n\n\n(0,utils/* listen */.KT)(chest, {\n    [socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_TARGET]: (payload) => {\n        Signal/* Signal */.H.exec(socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_TARGET, payload);\n    },\n    [socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_SDP]: (payload) => {\n        Signal/* Signal */.H.exec(socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_SDP, payload);\n    },\n    [socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_ICE]: (payload) => {\n        Signal/* Signal */.H.exec(socket_api/* SIGNAL_ACTIONS */.zl.ACCEPT_ICE, payload);\n    },\n});\n(0,utils/* listen */.KT)(Signal/* Signal */.H, {\n    [socket_api/* SIGNAL_ACTIONS */.zl.RELAY_TARGET]: (payload) => {\n        chest.exec(socket_api/* SIGNAL_ACTIONS */.zl.RELAY_TARGET, payload);\n    },\n    [socket_api/* SIGNAL_ACTIONS */.zl.RELAY_SDP]: (payload) => {\n        chest.exec(socket_api/* SIGNAL_ACTIONS */.zl.RELAY_SDP, payload);\n    },\n    [socket_api/* SIGNAL_ACTIONS */.zl.RELAY_ICE]: (payload) => {\n        chest.exec(socket_api/* SIGNAL_ACTIONS */.zl.RELAY_ICE, payload);\n    },\n});\n\n// EXTERNAL MODULE: ./src/lib/webrtc/index.ts\nvar webrtc = __webpack_require__(3396);\n// EXTERNAL MODULE: ./src/entities/PeerEntity.ts\nvar PeerEntity = __webpack_require__(9579);\n;// ./src/services/peer.ts\n\n\nlet peerFabric = () => new webrtc/* Peer */.xM();\n(0,PeerEntity/* setPeerFactory */.j)(peerFabric);\n\n// EXTERNAL MODULE: ./src/services/intents.ts\nvar intents = __webpack_require__(6986);\n// EXTERNAL MODULE: ./src/api/localMedia.ts\nvar localMedia = __webpack_require__(1978);\n// EXTERNAL MODULE: ./src/services/appAccessor.ts\nvar appAccessor = __webpack_require__(9605);\n// EXTERNAL MODULE: ./src/entities/Session.ts\nvar Session = __webpack_require__(98);\n// EXTERNAL MODULE: ./src/entities/Profile.ts\nvar Profile = __webpack_require__(3011);\n;// ./src/services/init.ts\n\n\n\n\n\n\n\n\n// == INTENT LISTENERS ==\n// START_APP\n{\n    appAccessor/* appAcessor */.Qf.when(() => {\n        intents/* DO_INTENT */.lZ[intents/* INTENT_ACTIONS */.b_.NEXT]();\n    });\n    intents/* intentChest */.w3.once(intents/* INTENT_ACTIONS */.b_.START_APP, () => {\n        (0,localMedia/* requestLocalMedia */.Ps)();\n        (0,localMedia/* whenLocalMedia */.OS)((media) => {\n            console.log('INIT LISTENER CLIENT MEDIA');\n            // Session.room\n            // \t.getUser(Session.client)!\n            // \t.once(USER_EVENTS.MEDIA, () => console.log('CLIENT MEDIA'));\n            Profile/* Profile */.W.user.setMedia(media);\n            appAccessor/* appAcessor */.Qf.set(appAccessor/* ACC_FLAGS */.sW.LOCAL_MEDIA);\n        });\n    });\n}\n// NEXT\n{\n    intents/* intentChest */.w3.on(intents/* INTENT_ACTIONS */.b_.NEXT, () => {\n        console.log('NEXT');\n        Profile/* Profile */.W.updateRoom();\n        Session/* Session */.N.next();\n    });\n}\n// == CONFIG WEB APP\n{\n    const webApp = (0,utils/* getWebApp */.C3)();\n    if (webApp)\n        try {\n            webApp.ready();\n            webApp.lockOrientation?.();\n            webApp.disableVerticalSwipes?.();\n            webApp.requestFullscreen?.();\n        }\n        catch (err) { }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTI4My5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNDO0FBQ2M7QUFDTjtBQUNBO0FBQzlDO0FBQ0EsMEJBQVEsZUFBZSxTQUFrQjtBQUNsQyxzQkFBc0IsS0FBa0I7QUFDL0M7QUFDQSxrQkFBa0IsVUFBRTtBQUNwQjtBQUNBLENBQUM7QUFDRCxrQkFBa0Isb0NBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBTTtBQUNOLEtBQUssaUNBQWMsc0NBQXNDLGlDQUFjO0FBQ3ZFLEtBQUssaUNBQWMsc0NBQXNDLGlDQUFjO0FBQ3ZFLEtBQUssaUNBQWMseUNBQXlDLGlDQUFjO0FBQzFFLENBQUM7QUFDRCx3QkFBTTtBQUNOLEtBQUssaUNBQWMsOERBQThELGlDQUFjO0FBQy9GLEtBQUssaUNBQWMsOERBQThELGlDQUFjO0FBQy9GLEtBQUssaUNBQWMsaUVBQWlFLGlDQUFjO0FBQ2xHLENBQUM7QUFDMEI7Ozs7O0FDN0JTO0FBQ0M7QUFDYztBQUNUO0FBQzFDLHdCQUFNLENBQUMsS0FBTTtBQUNiLEtBQUssaUNBQWM7QUFDbkIsUUFBUSxvQkFBTSxNQUFNLGlDQUFjO0FBQ2xDLEtBQUs7QUFDTCxLQUFLLGlDQUFjO0FBQ25CLFFBQVEsb0JBQU0sTUFBTSxpQ0FBYztBQUNsQyxLQUFLO0FBQ0wsS0FBSyxpQ0FBYztBQUNuQixRQUFRLG9CQUFNLE1BQU0saUNBQWM7QUFDbEMsS0FBSztBQUNMLENBQUM7QUFDRCx3QkFBTSxDQUFDLG9CQUFNO0FBQ2IsS0FBSyxpQ0FBYztBQUNuQixRQUFRLEtBQU0sTUFBTSxpQ0FBYztBQUNsQyxLQUFLO0FBQ0wsS0FBSyxpQ0FBYztBQUNuQixRQUFRLEtBQU0sTUFBTSxpQ0FBYztBQUNsQyxLQUFLO0FBQ0wsS0FBSyxpQ0FBYztBQUNuQixRQUFRLEtBQU0sTUFBTSxpQ0FBYztBQUNsQyxLQUFLO0FBQ0wsQ0FBQzs7Ozs7OztBQ3pCa0M7QUFDbUI7QUFDdEQsMkJBQTJCLG1CQUFJO0FBQy9CLG9DQUFjOzs7Ozs7Ozs7Ozs7O0FDSFk7QUFDRjtBQUMyQztBQUNDO0FBQ2Q7QUFDVjtBQUNMO0FBQ0s7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4QkFBVTtBQUNkLFFBQVEseUJBQVMsQ0FBQyw4QkFBYztBQUNoQyxLQUFLO0FBQ0wsSUFBSSwyQkFBVyxNQUFNLDhCQUFjO0FBQ25DLFFBQVEsd0NBQWlCO0FBQ3pCLFFBQVEscUNBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNCQUFPO0FBQ25CLFlBQVksOEJBQVUsS0FBSyw2QkFBUztBQUNwQyxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUksMkJBQVcsSUFBSSw4QkFBYztBQUNqQztBQUNBLFFBQVEsc0JBQU87QUFDZixRQUFRLHNCQUFPO0FBQ2YsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwyQkFBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9hcGkvc29ja2V0LnRzPzgxYzkiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvc2VydmljZXMvc2lnbmFsLnRzPzVkYjAiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvc2VydmljZXMvcGVlci50cz80Mzc3Iiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL3NlcnZpY2VzL2luaXQudHM/MGJmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbyB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuaW1wb3J0IHsgTGlzdGVuZXJDaGVzdCB9IGZyb20gJ0BsaWIvcHByaW50ZXItdG9vbHMnO1xuaW1wb3J0IHsgYWRkRGVidWcsIGxpc3RlbiB9IGZyb20gJ0BsaWIvdXRpbHMnO1xuaW1wb3J0IHsgU0lHTkFMX0FDVElPTlMgfSBmcm9tICcuL3NvY2tldC1hcGknO1xuLy8gPT09IEdFTkVSQUwgREFUQSA9PT1cbmFkZERlYnVnKCdzaWduYWxIb3N0JywgcHJvY2Vzcy5lbnYuU0lHTkFMKTtcbmV4cG9ydCBjb25zdCBTSUdOQUxfU0VSVkVSID0gcHJvY2Vzcy5lbnYuU0lHTkFMID8/ICdodHRwczovL3ZkZTAuY2hhdCc7XG4vLyA9PT0gUFJJVkFURSBGSUVMRFMgQU5EIE1FVEhPRFMgPT09XG5jb25zdCB3ZWJTb2NrZXQgPSBpbyhTSUdOQUxfU0VSVkVSLCB7XG4gICAgYXV0b0Nvbm5lY3Q6IGZhbHNlLFxufSk7XG5jb25zdCBjaGVzdCA9IG5ldyBMaXN0ZW5lckNoZXN0KCk7XG4vLyA9PT0gSEVMUEVSUyA9PT1cbmNvbnN0IHNhZmVDb25uZWN0aW5nID0gKGYpID0+IHtcbiAgICBpZiAod2ViU29ja2V0LmRpc2Nvbm5lY3RlZClcbiAgICAgICAgd2ViU29ja2V0LmNvbm5lY3QoKTtcbiAgICBmKCk7XG59O1xuLy8gPT09IE1BS0UgTElTVEVOSU5HID09PVxubGlzdGVuKHdlYlNvY2tldCwge1xuICAgIFtTSUdOQUxfQUNUSU9OUy5BQ0NFUFRfSUNFXTogKHBheWxvYWQpID0+IGNoZXN0LmV4ZWMoU0lHTkFMX0FDVElPTlMuQUNDRVBUX0lDRSwgcGF5bG9hZCksXG4gICAgW1NJR05BTF9BQ1RJT05TLkFDQ0VQVF9TRFBdOiAocGF5bG9hZCkgPT4gY2hlc3QuZXhlYyhTSUdOQUxfQUNUSU9OUy5BQ0NFUFRfU0RQLCBwYXlsb2FkKSxcbiAgICBbU0lHTkFMX0FDVElPTlMuQUNDRVBUX1RBUkdFVF06IChwYXlsb2FkKSA9PiBjaGVzdC5leGVjKFNJR05BTF9BQ1RJT05TLkFDQ0VQVF9UQVJHRVQsIHBheWxvYWQpLFxufSk7XG5saXN0ZW4oY2hlc3QsIHtcbiAgICBbU0lHTkFMX0FDVElPTlMuUkVMQVlfSUNFXTogKHBheWxvYWQpID0+IHNhZmVDb25uZWN0aW5nKCgpID0+IHdlYlNvY2tldC5lbWl0KFNJR05BTF9BQ1RJT05TLlJFTEFZX0lDRSwgcGF5bG9hZCkpLFxuICAgIFtTSUdOQUxfQUNUSU9OUy5SRUxBWV9TRFBdOiAocGF5bG9hZCkgPT4gc2FmZUNvbm5lY3RpbmcoKCkgPT4gd2ViU29ja2V0LmVtaXQoU0lHTkFMX0FDVElPTlMuUkVMQVlfU0RQLCBwYXlsb2FkKSksXG4gICAgW1NJR05BTF9BQ1RJT05TLlJFTEFZX1RBUkdFVF06IChwYXlsb2FkKSA9PiBzYWZlQ29ubmVjdGluZygoKSA9PiB3ZWJTb2NrZXQuZW1pdChTSUdOQUxfQUNUSU9OUy5SRUxBWV9UQVJHRVQsIHBheWxvYWQpKSxcbn0pO1xuZXhwb3J0IHsgY2hlc3QgYXMgc29ja2V0IH07XG4iLCJpbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICdAbGliL3V0aWxzJztcbmltcG9ydCB7IHNvY2tldCB9IGZyb20gJ0BhcGkvc29ja2V0JztcbmltcG9ydCB7IFNJR05BTF9BQ1RJT05TIH0gZnJvbSAnLi4vYXBpL3NvY2tldC1hcGknO1xuaW1wb3J0IHsgU2lnbmFsIH0gZnJvbSAnQGVudGl0aWVzL1NpZ25hbCc7XG5saXN0ZW4oc29ja2V0LCB7XG4gICAgW1NJR05BTF9BQ1RJT05TLkFDQ0VQVF9UQVJHRVRdOiAocGF5bG9hZCkgPT4ge1xuICAgICAgICBTaWduYWwuZXhlYyhTSUdOQUxfQUNUSU9OUy5BQ0NFUFRfVEFSR0VULCBwYXlsb2FkKTtcbiAgICB9LFxuICAgIFtTSUdOQUxfQUNUSU9OUy5BQ0NFUFRfU0RQXTogKHBheWxvYWQpID0+IHtcbiAgICAgICAgU2lnbmFsLmV4ZWMoU0lHTkFMX0FDVElPTlMuQUNDRVBUX1NEUCwgcGF5bG9hZCk7XG4gICAgfSxcbiAgICBbU0lHTkFMX0FDVElPTlMuQUNDRVBUX0lDRV06IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIFNpZ25hbC5leGVjKFNJR05BTF9BQ1RJT05TLkFDQ0VQVF9JQ0UsIHBheWxvYWQpO1xuICAgIH0sXG59KTtcbmxpc3RlbihTaWduYWwsIHtcbiAgICBbU0lHTkFMX0FDVElPTlMuUkVMQVlfVEFSR0VUXTogKHBheWxvYWQpID0+IHtcbiAgICAgICAgc29ja2V0LmV4ZWMoU0lHTkFMX0FDVElPTlMuUkVMQVlfVEFSR0VULCBwYXlsb2FkKTtcbiAgICB9LFxuICAgIFtTSUdOQUxfQUNUSU9OUy5SRUxBWV9TRFBdOiAocGF5bG9hZCkgPT4ge1xuICAgICAgICBzb2NrZXQuZXhlYyhTSUdOQUxfQUNUSU9OUy5SRUxBWV9TRFAsIHBheWxvYWQpO1xuICAgIH0sXG4gICAgW1NJR05BTF9BQ1RJT05TLlJFTEFZX0lDRV06IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIHNvY2tldC5leGVjKFNJR05BTF9BQ1RJT05TLlJFTEFZX0lDRSwgcGF5bG9hZCk7XG4gICAgfSxcbn0pO1xuIiwiaW1wb3J0IHsgUGVlciB9IGZyb20gJ0BsaWIvd2VicnRjJztcbmltcG9ydCB7IHNldFBlZXJGYWN0b3J5IH0gZnJvbSAnQGVudGl0aWVzL1BlZXJFbnRpdHknO1xubGV0IHBlZXJGYWJyaWMgPSAoKSA9PiBuZXcgUGVlcigpO1xuc2V0UGVlckZhY3RvcnkocGVlckZhYnJpYyk7XG4iLCJpbXBvcnQgJ0BzZXJ2aWNlcy9zaWduYWwnO1xuaW1wb3J0ICdAc2VydmljZXMvcGVlcic7XG5pbXBvcnQgeyBET19JTlRFTlQsIElOVEVOVF9BQ1RJT05TLCBpbnRlbnRDaGVzdCB9IGZyb20gJy4vaW50ZW50cyc7XG5pbXBvcnQgeyByZXF1ZXN0TG9jYWxNZWRpYSwgd2hlbkxvY2FsTWVkaWEgfSBmcm9tICdAYXBpL2xvY2FsTWVkaWEnO1xuaW1wb3J0IHsgQUNDX0ZMQUdTLCBhcHBBY2Vzc29yIH0gZnJvbSAnLi9hcHBBY2Nlc3Nvcic7XG5pbXBvcnQgeyBTZXNzaW9uIH0gZnJvbSAnQGVudGl0aWVzL1Nlc3Npb24nO1xuaW1wb3J0IHsgZ2V0V2ViQXBwIH0gZnJvbSAnQGxpYi91dGlscyc7XG5pbXBvcnQgeyBQcm9maWxlIH0gZnJvbSAnQGVudGl0aWVzL1Byb2ZpbGUnO1xuLy8gPT0gSU5URU5UIExJU1RFTkVSUyA9PVxuLy8gU1RBUlRfQVBQXG57XG4gICAgYXBwQWNlc3Nvci53aGVuKCgpID0+IHtcbiAgICAgICAgRE9fSU5URU5UW0lOVEVOVF9BQ1RJT05TLk5FWFRdKCk7XG4gICAgfSk7XG4gICAgaW50ZW50Q2hlc3Qub25jZShJTlRFTlRfQUNUSU9OUy5TVEFSVF9BUFAsICgpID0+IHtcbiAgICAgICAgcmVxdWVzdExvY2FsTWVkaWEoKTtcbiAgICAgICAgd2hlbkxvY2FsTWVkaWEoKG1lZGlhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSU5JVCBMSVNURU5FUiBDTElFTlQgTUVESUEnKTtcbiAgICAgICAgICAgIC8vIFNlc3Npb24ucm9vbVxuICAgICAgICAgICAgLy8gXHQuZ2V0VXNlcihTZXNzaW9uLmNsaWVudCkhXG4gICAgICAgICAgICAvLyBcdC5vbmNlKFVTRVJfRVZFTlRTLk1FRElBLCAoKSA9PiBjb25zb2xlLmxvZygnQ0xJRU5UIE1FRElBJykpO1xuICAgICAgICAgICAgUHJvZmlsZS51c2VyLnNldE1lZGlhKG1lZGlhKTtcbiAgICAgICAgICAgIGFwcEFjZXNzb3Iuc2V0KEFDQ19GTEFHUy5MT0NBTF9NRURJQSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8gTkVYVFxue1xuICAgIGludGVudENoZXN0Lm9uKElOVEVOVF9BQ1RJT05TLk5FWFQsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ05FWFQnKTtcbiAgICAgICAgUHJvZmlsZS51cGRhdGVSb29tKCk7XG4gICAgICAgIFNlc3Npb24ubmV4dCgpO1xuICAgIH0pO1xufVxuLy8gPT0gQ09ORklHIFdFQiBBUFBcbntcbiAgICBjb25zdCB3ZWJBcHAgPSBnZXRXZWJBcHAoKTtcbiAgICBpZiAod2ViQXBwKVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2ViQXBwLnJlYWR5KCk7XG4gICAgICAgICAgICB3ZWJBcHAubG9ja09yaWVudGF0aW9uPy4oKTtcbiAgICAgICAgICAgIHdlYkFwcC5kaXNhYmxlVmVydGljYWxTd2lwZXM/LigpO1xuICAgICAgICAgICAgd2ViQXBwLnJlcXVlc3RGdWxsc2NyZWVuPy4oKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7IH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5283\n")},5788:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   J: () => (/* binding */ CONNECTION_EVENTS),\n/* harmony export */   N: () => (/* binding */ Connection)\n/* harmony export */ });\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8175);\n/* harmony import */ var _lib_webrtc_Peer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7918);\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8349);\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4391);\n/* harmony import */ var _PeerEntity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9579);\n\n\n\n\n\n// === STATIC DATA ===\nconst CONTROL_NAME = 'CONTROL';\nconst CONNECTION_EVENTS = {\n    STATE_UPDATED: 'stateupdated',\n    PEER_UPDATER: 'peerupdater',\n};\nconst stateGraph = {\n    new: ['connecting', 'closed'],\n    connecting: ['connected', 'reconnecting', 'closed'],\n    connected: ['reconnecting', 'closed'],\n    reconnecting: ['connected', 'closed'],\n    closed: [],\n};\nconst Connection = function ({ target, offer }, media) {\n    // === FIELDS ===\n    let peer;\n    let unsubFromSignal;\n    const stateLeader = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_2__/* .StateLeader */ .Dw('new', stateGraph);\n    const chest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_2__/* .ListenerChest */ .q9();\n    // === DEV ===\n    (0,_lib_utils__WEBPACK_IMPORTED_MODULE_0__/* .addDebug */ .H0)('peer', peer);\n    // === HANDLERS ===\n    const peerStopHandler = ({ label }) => {\n        if (label !== CONTROL_NAME)\n            return;\n        updateState('closed');\n        stopPeer();\n    };\n    const peerUpdatedHandler = ({ state: peerState }) => {\n        switch (peerState) {\n            case 'connected':\n                updateState('connected');\n                break;\n            case 'disconnected':\n            case 'closed':\n            case 'failed':\n                if (stateIs('closed'))\n                    break;\n                updateState('reconnecting');\n                setPeer();\n                startPeer();\n                break;\n        }\n    };\n    // === EXEC ===\n    setPeer();\n    // === HELPERS ===\n    // state manipulates\n    function updateState(nextState) {\n        if (stateIs(nextState))\n            return;\n        if (!stateLeader.move(nextState))\n            throw Error(`'${nextState}' is not able next [Connection] state for current '${getState()}' state.`);\n        chest.exec(CONNECTION_EVENTS.STATE_UPDATED, { state: stateLeader.get() });\n    }\n    function getState() {\n        return stateLeader.get();\n    }\n    function stateIs(isState) {\n        return stateLeader.is(isState);\n    }\n    // Peer manipulates\n    function setPeer() {\n        peer = new _PeerEntity__WEBPACK_IMPORTED_MODULE_4__/* .PeerEntity */ .a();\n        peer.addDataChannel(CONTROL_NAME);\n        media.getTracks().forEach((track) => peer.addMediaTrack(track, media));\n        peer.on(_lib_webrtc_Peer__WEBPACK_IMPORTED_MODULE_1__/* .PEER_EVENTS */ .rE.TEXT, peerStopHandler);\n        peer.on(_lib_webrtc_Peer__WEBPACK_IMPORTED_MODULE_1__/* .PEER_EVENTS */ .rE.UPDATED, peerUpdatedHandler);\n        unsubFromSignal?.();\n        unsubFromSignal = (0,_helpers__WEBPACK_IMPORTED_MODULE_3__/* .peerSignalBridge */ .IL)(peer, target);\n        chest.exec(CONNECTION_EVENTS.PEER_UPDATER, { peer });\n    }\n    function startPeer() {\n        peer.start();\n    }\n    function stopPeer() {\n        peer.stop();\n    }\n    function sendStop() {\n        peer.send('stop', CONTROL_NAME);\n    }\n    // === API ===\n    function connect() {\n        if (!stateIs('new')) {\n            return console.warn('[Connect].connect() is not able for used instance.');\n        }\n        updateState('connecting');\n        offer && peer.start();\n    }\n    function close() {\n        if (stateIs('closed')) {\n            return console.warn('[Connect].close() is not able for closed instance.');\n        }\n        updateState('closed');\n        sendStop();\n        unsubFromSignal();\n    }\n    function getPeer() {\n        return peer;\n    }\n    // getState -> [=== HELPERS ===] : [Peer manipulates]\n    return {\n        ...chest,\n        getPeer,\n        getState,\n        connect,\n        close,\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTc4OC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBc0M7QUFDVztBQUNpQjtBQUNyQjtBQUNIO0FBQzFDO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sK0JBQStCLGVBQWU7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNFQUFXO0FBQ3ZDLHNCQUFzQix3RUFBYTtBQUNuQztBQUNBLElBQUksOERBQVE7QUFDWjtBQUNBLCtCQUErQixPQUFPO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0JBQWtCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVSxxREFBcUQsV0FBVztBQUN0RyxzREFBc0QsMEJBQTBCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw0REFBVTtBQUM3QjtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFXO0FBQzNCLGdCQUFnQixtRUFBVztBQUMzQjtBQUNBLDBCQUEwQixvRUFBZ0I7QUFDMUMscURBQXFELE1BQU07QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2VudGl0aWVzL0Nvbm5lY3Rpb24udHM/YWU2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhZGREZWJ1ZyB9IGZyb20gJ0BsaWIvdXRpbHMnO1xuaW1wb3J0IHsgUEVFUl9FVkVOVFMgfSBmcm9tICcuLi9saWIvd2VicnRjL1BlZXInO1xuaW1wb3J0IHsgTGlzdGVuZXJDaGVzdCwgU3RhdGVMZWFkZXIsIH0gZnJvbSAnQGxpYi9wcHJpbnRlci10b29scyc7XG5pbXBvcnQgeyBwZWVyU2lnbmFsQnJpZGdlIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IFBlZXJFbnRpdHkgfSBmcm9tICcuL1BlZXJFbnRpdHknO1xuLy8gPT09IFNUQVRJQyBEQVRBID09PVxuY29uc3QgQ09OVFJPTF9OQU1FID0gJ0NPTlRST0wnO1xuZXhwb3J0IGNvbnN0IENPTk5FQ1RJT05fRVZFTlRTID0ge1xuICAgIFNUQVRFX1VQREFURUQ6ICdzdGF0ZXVwZGF0ZWQnLFxuICAgIFBFRVJfVVBEQVRFUjogJ3BlZXJ1cGRhdGVyJyxcbn07XG5jb25zdCBzdGF0ZUdyYXBoID0ge1xuICAgIG5ldzogWydjb25uZWN0aW5nJywgJ2Nsb3NlZCddLFxuICAgIGNvbm5lY3Rpbmc6IFsnY29ubmVjdGVkJywgJ3JlY29ubmVjdGluZycsICdjbG9zZWQnXSxcbiAgICBjb25uZWN0ZWQ6IFsncmVjb25uZWN0aW5nJywgJ2Nsb3NlZCddLFxuICAgIHJlY29ubmVjdGluZzogWydjb25uZWN0ZWQnLCAnY2xvc2VkJ10sXG4gICAgY2xvc2VkOiBbXSxcbn07XG5leHBvcnQgY29uc3QgQ29ubmVjdGlvbiA9IGZ1bmN0aW9uICh7IHRhcmdldCwgb2ZmZXIgfSwgbWVkaWEpIHtcbiAgICAvLyA9PT0gRklFTERTID09PVxuICAgIGxldCBwZWVyO1xuICAgIGxldCB1bnN1YkZyb21TaWduYWw7XG4gICAgY29uc3Qgc3RhdGVMZWFkZXIgPSBuZXcgU3RhdGVMZWFkZXIoJ25ldycsIHN0YXRlR3JhcGgpO1xuICAgIGNvbnN0IGNoZXN0ID0gbmV3IExpc3RlbmVyQ2hlc3QoKTtcbiAgICAvLyA9PT0gREVWID09PVxuICAgIGFkZERlYnVnKCdwZWVyJywgcGVlcik7XG4gICAgLy8gPT09IEhBTkRMRVJTID09PVxuICAgIGNvbnN0IHBlZXJTdG9wSGFuZGxlciA9ICh7IGxhYmVsIH0pID0+IHtcbiAgICAgICAgaWYgKGxhYmVsICE9PSBDT05UUk9MX05BTUUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHVwZGF0ZVN0YXRlKCdjbG9zZWQnKTtcbiAgICAgICAgc3RvcFBlZXIoKTtcbiAgICB9O1xuICAgIGNvbnN0IHBlZXJVcGRhdGVkSGFuZGxlciA9ICh7IHN0YXRlOiBwZWVyU3RhdGUgfSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKHBlZXJTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSAnY29ubmVjdGVkJzpcbiAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSgnY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkaXNjb25uZWN0ZWQnOlxuICAgICAgICAgICAgY2FzZSAnY2xvc2VkJzpcbiAgICAgICAgICAgIGNhc2UgJ2ZhaWxlZCc6XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlSXMoJ2Nsb3NlZCcpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSgncmVjb25uZWN0aW5nJyk7XG4gICAgICAgICAgICAgICAgc2V0UGVlcigpO1xuICAgICAgICAgICAgICAgIHN0YXJ0UGVlcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyA9PT0gRVhFQyA9PT1cbiAgICBzZXRQZWVyKCk7XG4gICAgLy8gPT09IEhFTFBFUlMgPT09XG4gICAgLy8gc3RhdGUgbWFuaXB1bGF0ZXNcbiAgICBmdW5jdGlvbiB1cGRhdGVTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlSXMobmV4dFN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFzdGF0ZUxlYWRlci5tb3ZlKG5leHRTdGF0ZSkpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgJyR7bmV4dFN0YXRlfScgaXMgbm90IGFibGUgbmV4dCBbQ29ubmVjdGlvbl0gc3RhdGUgZm9yIGN1cnJlbnQgJyR7Z2V0U3RhdGUoKX0nIHN0YXRlLmApO1xuICAgICAgICBjaGVzdC5leGVjKENPTk5FQ1RJT05fRVZFTlRTLlNUQVRFX1VQREFURUQsIHsgc3RhdGU6IHN0YXRlTGVhZGVyLmdldCgpIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlTGVhZGVyLmdldCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdGF0ZUlzKGlzU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlTGVhZGVyLmlzKGlzU3RhdGUpO1xuICAgIH1cbiAgICAvLyBQZWVyIG1hbmlwdWxhdGVzXG4gICAgZnVuY3Rpb24gc2V0UGVlcigpIHtcbiAgICAgICAgcGVlciA9IG5ldyBQZWVyRW50aXR5KCk7XG4gICAgICAgIHBlZXIuYWRkRGF0YUNoYW5uZWwoQ09OVFJPTF9OQU1FKTtcbiAgICAgICAgbWVkaWEuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHBlZXIuYWRkTWVkaWFUcmFjayh0cmFjaywgbWVkaWEpKTtcbiAgICAgICAgcGVlci5vbihQRUVSX0VWRU5UUy5URVhULCBwZWVyU3RvcEhhbmRsZXIpO1xuICAgICAgICBwZWVyLm9uKFBFRVJfRVZFTlRTLlVQREFURUQsIHBlZXJVcGRhdGVkSGFuZGxlcik7XG4gICAgICAgIHVuc3ViRnJvbVNpZ25hbD8uKCk7XG4gICAgICAgIHVuc3ViRnJvbVNpZ25hbCA9IHBlZXJTaWduYWxCcmlkZ2UocGVlciwgdGFyZ2V0KTtcbiAgICAgICAgY2hlc3QuZXhlYyhDT05ORUNUSU9OX0VWRU5UUy5QRUVSX1VQREFURVIsIHsgcGVlciB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc3RhcnRQZWVyKCkge1xuICAgICAgICBwZWVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0b3BQZWVyKCkge1xuICAgICAgICBwZWVyLnN0b3AoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2VuZFN0b3AoKSB7XG4gICAgICAgIHBlZXIuc2VuZCgnc3RvcCcsIENPTlRST0xfTkFNRSk7XG4gICAgfVxuICAgIC8vID09PSBBUEkgPT09XG4gICAgZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKCFzdGF0ZUlzKCduZXcnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybignW0Nvbm5lY3RdLmNvbm5lY3QoKSBpcyBub3QgYWJsZSBmb3IgdXNlZCBpbnN0YW5jZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVTdGF0ZSgnY29ubmVjdGluZycpO1xuICAgICAgICBvZmZlciAmJiBwZWVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICBpZiAoc3RhdGVJcygnY2xvc2VkJykpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oJ1tDb25uZWN0XS5jbG9zZSgpIGlzIG5vdCBhYmxlIGZvciBjbG9zZWQgaW5zdGFuY2UuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlU3RhdGUoJ2Nsb3NlZCcpO1xuICAgICAgICBzZW5kU3RvcCgpO1xuICAgICAgICB1bnN1YkZyb21TaWduYWwoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0UGVlcigpIHtcbiAgICAgICAgcmV0dXJuIHBlZXI7XG4gICAgfVxuICAgIC8vIGdldFN0YXRlIC0+IFs9PT0gSEVMUEVSUyA9PT1dIDogW1BlZXIgbWFuaXB1bGF0ZXNdXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY2hlc3QsXG4gICAgICAgIGdldFBlZXIsXG4gICAgICAgIGdldFN0YXRlLFxuICAgICAgICBjb25uZWN0LFxuICAgICAgICBjbG9zZSxcbiAgICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5788\n")},6986:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   b_: () => (/* binding */ INTENT_ACTIONS),\n/* harmony export */   lZ: () => (/* binding */ DO_INTENT),\n/* harmony export */   w3: () => (/* binding */ intentChest)\n/* harmony export */ });\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8349);\n\nconst intentChest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__/* .ListenerChest */ .q9();\nconst orig = {};\ndenie('exec');\ndenie('offAll');\nconst INTENT_ACTIONS = {\n    NEXT: 'next',\n    TOGGLE_CHAT: 'togglechat',\n    ADD_USER: 'adduser',\n    START_APP: 'startapp',\n    SEND_MESSAGE: 'sendmessage',\n};\nconst DO_INTENT = (() => {\n    const result = {};\n    Object.values(INTENT_ACTIONS).forEach((intentName) => {\n        result[intentName] = (payload) => {\n            orig.exec(intentName, payload);\n        };\n    });\n    return result;\n})();\nfunction denie(prop) {\n    orig[prop] = intentChest[prop].bind(intentChest);\n    intentChest[prop] = new Proxy(intentChest[prop], {\n        apply() {\n            throw Error('Denied access for call of intentChest.' + prop);\n        },\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjk4Ni5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDN0Msd0JBQXdCLHdFQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvc2VydmljZXMvaW50ZW50cy50cz85ZjI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExpc3RlbmVyQ2hlc3QgfSBmcm9tICdAbGliL3BwcmludGVyLXRvb2xzJztcbmV4cG9ydCBjb25zdCBpbnRlbnRDaGVzdCA9IG5ldyBMaXN0ZW5lckNoZXN0KCk7XG5jb25zdCBvcmlnID0ge307XG5kZW5pZSgnZXhlYycpO1xuZGVuaWUoJ29mZkFsbCcpO1xuZXhwb3J0IGNvbnN0IElOVEVOVF9BQ1RJT05TID0ge1xuICAgIE5FWFQ6ICduZXh0JyxcbiAgICBUT0dHTEVfQ0hBVDogJ3RvZ2dsZWNoYXQnLFxuICAgIEFERF9VU0VSOiAnYWRkdXNlcicsXG4gICAgU1RBUlRfQVBQOiAnc3RhcnRhcHAnLFxuICAgIFNFTkRfTUVTU0FHRTogJ3NlbmRtZXNzYWdlJyxcbn07XG5leHBvcnQgY29uc3QgRE9fSU5URU5UID0gKCgpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBPYmplY3QudmFsdWVzKElOVEVOVF9BQ1RJT05TKS5mb3JFYWNoKChpbnRlbnROYW1lKSA9PiB7XG4gICAgICAgIHJlc3VsdFtpbnRlbnROYW1lXSA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBvcmlnLmV4ZWMoaW50ZW50TmFtZSwgcGF5bG9hZCk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn0pKCk7XG5mdW5jdGlvbiBkZW5pZShwcm9wKSB7XG4gICAgb3JpZ1twcm9wXSA9IGludGVudENoZXN0W3Byb3BdLmJpbmQoaW50ZW50Q2hlc3QpO1xuICAgIGludGVudENoZXN0W3Byb3BdID0gbmV3IFByb3h5KGludGVudENoZXN0W3Byb3BdLCB7XG4gICAgICAgIGFwcGx5KCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0RlbmllZCBhY2Nlc3MgZm9yIGNhbGwgb2YgaW50ZW50Q2hlc3QuJyArIHByb3ApO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6986\n")},7918:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rE: () => (/* binding */ PEER_EVENTS),\n/* harmony export */   xM: () => (/* binding */ Peer)\n/* harmony export */ });\n/* unused harmony export DEFAULT_CONFIG */\n/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7630);\n/* harmony import */ var freeice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(150);\n/* harmony import */ var freeice__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(freeice__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8349);\n/* harmony import */ var sdp_transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7363);\n\n\n\n\n// === MODULE VARS / STATIC FIELDS ===\nconst DEFAULT_CONFIG = {\n    iceServers: [\n        ...freeice__WEBPACK_IMPORTED_MODULE_1___default()(),\n        // Metered.ca  TURN (  ,    /)\n        {\n            urls: 'turn:global.relay.metered.ca:443',\n            username: 'openrelayproject',\n            credential: 'openrelayproject',\n        },\n        {\n            urls: 'turn:relay.metered.ca:80',\n            username: 'openrelayproject',\n            credential: 'openrelayproject',\n        },\n        // Backup TURN (anon.turn.ovh)  ,   \n        {\n            urls: 'turn:turn.anyfirewall.com:443?transport=tcp',\n            username: 'webrtc',\n            credential: 'webrtc',\n        },\n    ],\n    iceTransportPolicy: 'all',\n};\nconst PEER_EVENTS = {\n    CLOSED: 'closed',\n    CONNECTED: 'connected',\n    CONNECTING: 'connecting',\n    DISCONNECTED: 'disconnected',\n    FAILED: 'failed',\n    NEW: 'new',\n    UPDATED: 'updated',\n    START: 'start',\n    STOP: 'stop',\n    MEDIA: 'media',\n    TEXT: 'text',\n    SDP: 'sdp',\n    ICE: 'ice',\n};\n// === LOCKING ===\nObject.freeze(DEFAULT_CONFIG);\nObject.freeze(PEER_EVENTS);\n// === CONSTRUCTOR ===\nconst Peer = function (config = DEFAULT_CONFIG) {\n    // === PRIVATE FIELDS ===\n    const rtc = new RTCPeerConnection(config);\n    const chest = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_2__/* .ListenerChest */ .q9();\n    let isStarted = false;\n    let dataChannels = new Map();\n    let mediaTracks = new Map();\n    let mediaStreams = new Map();\n    const candidateBuffer = [];\n    // === LOCAL HELPERS / PRIVATE METHODS ===\n    function initDataChannel(dc) {\n        const label = dc.label;\n        dc.onmessage = (ev) => chest.exec(PEER_EVENTS.TEXT, {\n            label,\n            data: ev.data,\n        });\n        dataChannels.set(label, dc);\n    }\n    function initMediaTrack(track) {\n        mediaTracks.set(track.id, track);\n    }\n    function initMediaStream(stream) {\n        mediaStreams.set(stream.id, stream);\n        chest.exec(PEER_EVENTS.MEDIA, { media: stream });\n    }\n    function doCandidateBuffer() {\n        try {\n            candidateBuffer.forEach((candidate) => rtc.addIceCandidate(candidate));\n        }\n        catch (err) {\n            console.warn('ICE candidate failed:', err.message);\n        }\n        candidateBuffer.length = 0;\n    }\n    function execUpdateState() {\n        chest.exec(PEER_EVENTS.UPDATED, { state: rtc.connectionState });\n        chest.exec(rtc.connectionState);\n    }\n    // === EXEC CODE ===\n    rtc.onicecandidate = (ev) => chest.exec(PEER_EVENTS.ICE, ev);\n    rtc.onconnectionstatechange = () => {\n        if (rtc.connectionState === 'closed')\n            return;\n        execUpdateState();\n    };\n    rtc.ondatachannel = (ev) => {\n        initDataChannel(ev.channel);\n    };\n    rtc.ontrack = (ev) => {\n        initMediaTrack(ev.track);\n        ev.streams.forEach((stream) => initMediaStream(stream));\n    };\n    // === INSTANCE ===\n    const peerInstance = {\n        // === LISTENERS CONTROLLING ===\n        ...chest,\n        // === RTC OBJECT ===\n        rtc,\n        getState() {\n            return rtc.connectionState;\n        },\n        // === CONNECT CONTROLLING ===\n        async start() {\n            if (isStarted)\n                return;\n            isStarted = true;\n            chest.exec('start');\n            try {\n                const offer = await rtc.createOffer();\n                if (offer.sdp) {\n                    const res = sdp_transform__WEBPACK_IMPORTED_MODULE_3__/* .parse */ .qg(offer.sdp);\n                    const videoMedia = res.media.find((m) => m.type === 'video');\n                    if (videoMedia) {\n                        videoMedia.rtp = videoMedia.rtp.filter((rtpItem) => rtpItem.codec === 'H264');\n                        const videoPayloads = videoMedia.rtp.map((rtpItem) => rtpItem.payload);\n                        videoMedia.payloads = videoPayloads.join(' ');\n                        videoMedia.fmtp =\n                            videoMedia.fmtp?.filter((fmtpItem) => videoPayloads.includes(fmtpItem.payload)) ?? [];\n                        videoMedia.rtcpFb =\n                            videoMedia.rtcpFb?.filter((rtcpFbItem) => videoPayloads.includes(rtcpFbItem.payload)) ?? [];\n                    }\n                    offer.sdp = sdp_transform__WEBPACK_IMPORTED_MODULE_3__/* .write */ .M9(res);\n                }\n                await rtc.setLocalDescription(offer);\n                chest.exec(PEER_EVENTS.SDP, { sdp: offer });\n            }\n            catch (err) {\n                console.error('Error of offer generating:', err.message);\n            }\n        },\n        stop() {\n            if (!isStarted)\n                return;\n            chest.exec('stop');\n            chest.once(PEER_EVENTS.CLOSED, () => chest.offAll());\n            rtc.close();\n            execUpdateState();\n        },\n        async setRemoteSdp(sdp) {\n            await rtc.setRemoteDescription(sdp);\n            doCandidateBuffer();\n            if (isStarted)\n                return;\n            try {\n                const answer = await rtc.createAnswer();\n                await rtc.setLocalDescription(answer);\n                chest.exec(PEER_EVENTS.SDP, { sdp: answer });\n            }\n            catch (err) {\n                console.error('Error of answer generating:', err.message);\n            }\n        },\n        addCandidate(ice) {\n            candidateBuffer.push(ice);\n        },\n        // === DATA CONTROLLING ===\n        send(msgText, name) {\n            dataChannels.get(name)?.send(msgText);\n        },\n        addDataChannel(name, config) {\n            if (isStarted)\n                return false;\n            chest.on('start', () => initDataChannel(rtc.createDataChannel(name, config)));\n            return true;\n        },\n        addMediaTrack(track, stream) {\n            if (isStarted)\n                return false;\n            rtc.addTrack(track, stream);\n            return true;\n        },\n        // === GET ITEM ===\n        getMediaStream(id) {\n            return mediaStreams.get(id) ?? null;\n        },\n        getMediaTrack(id) {\n            return mediaTracks.get(id) ?? null;\n        },\n        getDataChannel(label) {\n            return dataChannels.get(label) ?? null;\n        },\n        // === GET COLLECTION OF KEYS ===\n        getMediaTrackIds() {\n            return Array.from(mediaTracks.keys());\n        },\n        getMediaStreamIds() {\n            return Array.from(mediaStreams.keys());\n        },\n        getDataChannelLabels() {\n            return Array.from(dataChannels.keys());\n        },\n    };\n    return peerInstance;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzkxOC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdCO0FBQ007QUFDc0I7QUFDTjtBQUM5QztBQUNPO0FBQ1A7QUFDQSxXQUFXLDhDQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHNCQUFzQix3RUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGVBQWU7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyw0QkFBNEI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywwREFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMERBQWtCO0FBQ2xEO0FBQ0E7QUFDQSw4Q0FBOEMsWUFBWTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGFBQWE7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9saWIvd2VicnRjL1BlZXIudHM/NzFiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ3dlYnJ0Yy1hZGFwdGVyJztcbmltcG9ydCBmcmVlaWNlIGZyb20gJ2ZyZWVpY2UnO1xuaW1wb3J0IHsgTGlzdGVuZXJDaGVzdCB9IGZyb20gJ0BsaWIvcHByaW50ZXItdG9vbHMnO1xuaW1wb3J0ICogYXMgc2RwVHJhbnNmb3JtIGZyb20gJ3NkcC10cmFuc2Zvcm0nO1xuLy8gPT09IE1PRFVMRSBWQVJTIC8gU1RBVElDIEZJRUxEUyA9PT1cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTkZJRyA9IHtcbiAgICBpY2VTZXJ2ZXJzOiBbXG4gICAgICAgIC4uLmZyZWVpY2UoKSxcbiAgICAgICAgLy8gTWV0ZXJlZC5jYSDigJQgVFVSTiAo0LHQtdGB0L/Qu9Cw0YLQtdC9INC00LvRjyDRgtC10YHRgtC+0LIsINGC0YDQtdCx0YPQtdGCINC+0LPRgNCw0L3QuNGH0LXQvdC40Lkg0L/QviDRgtGA0LDRhNC40LrRgy/Rh9Cw0YHRgtC+0YLQtSlcbiAgICAgICAge1xuICAgICAgICAgICAgdXJsczogJ3R1cm46Z2xvYmFsLnJlbGF5Lm1ldGVyZWQuY2E6NDQzJyxcbiAgICAgICAgICAgIHVzZXJuYW1lOiAnb3BlbnJlbGF5cHJvamVjdCcsXG4gICAgICAgICAgICBjcmVkZW50aWFsOiAnb3BlbnJlbGF5cHJvamVjdCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVybHM6ICd0dXJuOnJlbGF5Lm1ldGVyZWQuY2E6ODAnLFxuICAgICAgICAgICAgdXNlcm5hbWU6ICdvcGVucmVsYXlwcm9qZWN0JyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWw6ICdvcGVucmVsYXlwcm9qZWN0JyxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQmFja3VwIFRVUk4gKGFub24udHVybi5vdmgpIOKAlCDQvdC10YHRgtCw0LHQuNC70YzQvdC+LCDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0YEg0L7RgdGC0L7RgNC+0LbQvdC+0YHRgtGM0Y5cbiAgICAgICAge1xuICAgICAgICAgICAgdXJsczogJ3R1cm46dHVybi5hbnlmaXJld2FsbC5jb206NDQzP3RyYW5zcG9ydD10Y3AnLFxuICAgICAgICAgICAgdXNlcm5hbWU6ICd3ZWJydGMnLFxuICAgICAgICAgICAgY3JlZGVudGlhbDogJ3dlYnJ0YycsXG4gICAgICAgIH0sXG4gICAgXSxcbiAgICBpY2VUcmFuc3BvcnRQb2xpY3k6ICdhbGwnLFxufTtcbmV4cG9ydCBjb25zdCBQRUVSX0VWRU5UUyA9IHtcbiAgICBDTE9TRUQ6ICdjbG9zZWQnLFxuICAgIENPTk5FQ1RFRDogJ2Nvbm5lY3RlZCcsXG4gICAgQ09OTkVDVElORzogJ2Nvbm5lY3RpbmcnLFxuICAgIERJU0NPTk5FQ1RFRDogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgRkFJTEVEOiAnZmFpbGVkJyxcbiAgICBORVc6ICduZXcnLFxuICAgIFVQREFURUQ6ICd1cGRhdGVkJyxcbiAgICBTVEFSVDogJ3N0YXJ0JyxcbiAgICBTVE9QOiAnc3RvcCcsXG4gICAgTUVESUE6ICdtZWRpYScsXG4gICAgVEVYVDogJ3RleHQnLFxuICAgIFNEUDogJ3NkcCcsXG4gICAgSUNFOiAnaWNlJyxcbn07XG4vLyA9PT0gTE9DS0lORyA9PT1cbk9iamVjdC5mcmVlemUoREVGQVVMVF9DT05GSUcpO1xuT2JqZWN0LmZyZWV6ZShQRUVSX0VWRU5UUyk7XG4vLyA9PT0gQ09OU1RSVUNUT1IgPT09XG5leHBvcnQgY29uc3QgUGVlciA9IGZ1bmN0aW9uIChjb25maWcgPSBERUZBVUxUX0NPTkZJRykge1xuICAgIC8vID09PSBQUklWQVRFIEZJRUxEUyA9PT1cbiAgICBjb25zdCBydGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oY29uZmlnKTtcbiAgICBjb25zdCBjaGVzdCA9IG5ldyBMaXN0ZW5lckNoZXN0KCk7XG4gICAgbGV0IGlzU3RhcnRlZCA9IGZhbHNlO1xuICAgIGxldCBkYXRhQ2hhbm5lbHMgPSBuZXcgTWFwKCk7XG4gICAgbGV0IG1lZGlhVHJhY2tzID0gbmV3IE1hcCgpO1xuICAgIGxldCBtZWRpYVN0cmVhbXMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgY2FuZGlkYXRlQnVmZmVyID0gW107XG4gICAgLy8gPT09IExPQ0FMIEhFTFBFUlMgLyBQUklWQVRFIE1FVEhPRFMgPT09XG4gICAgZnVuY3Rpb24gaW5pdERhdGFDaGFubmVsKGRjKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gZGMubGFiZWw7XG4gICAgICAgIGRjLm9ubWVzc2FnZSA9IChldikgPT4gY2hlc3QuZXhlYyhQRUVSX0VWRU5UUy5URVhULCB7XG4gICAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICAgIGRhdGE6IGV2LmRhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICBkYXRhQ2hhbm5lbHMuc2V0KGxhYmVsLCBkYyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluaXRNZWRpYVRyYWNrKHRyYWNrKSB7XG4gICAgICAgIG1lZGlhVHJhY2tzLnNldCh0cmFjay5pZCwgdHJhY2spO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0TWVkaWFTdHJlYW0oc3RyZWFtKSB7XG4gICAgICAgIG1lZGlhU3RyZWFtcy5zZXQoc3RyZWFtLmlkLCBzdHJlYW0pO1xuICAgICAgICBjaGVzdC5leGVjKFBFRVJfRVZFTlRTLk1FRElBLCB7IG1lZGlhOiBzdHJlYW0gfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvQ2FuZGlkYXRlQnVmZmVyKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2FuZGlkYXRlQnVmZmVyLmZvckVhY2goKGNhbmRpZGF0ZSkgPT4gcnRjLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0lDRSBjYW5kaWRhdGUgZmFpbGVkOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjYW5kaWRhdGVCdWZmZXIubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXhlY1VwZGF0ZVN0YXRlKCkge1xuICAgICAgICBjaGVzdC5leGVjKFBFRVJfRVZFTlRTLlVQREFURUQsIHsgc3RhdGU6IHJ0Yy5jb25uZWN0aW9uU3RhdGUgfSk7XG4gICAgICAgIGNoZXN0LmV4ZWMocnRjLmNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgfVxuICAgIC8vID09PSBFWEVDIENPREUgPT09XG4gICAgcnRjLm9uaWNlY2FuZGlkYXRlID0gKGV2KSA9PiBjaGVzdC5leGVjKFBFRVJfRVZFTlRTLklDRSwgZXYpO1xuICAgIHJ0Yy5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJ0Yy5jb25uZWN0aW9uU3RhdGUgPT09ICdjbG9zZWQnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBleGVjVXBkYXRlU3RhdGUoKTtcbiAgICB9O1xuICAgIHJ0Yy5vbmRhdGFjaGFubmVsID0gKGV2KSA9PiB7XG4gICAgICAgIGluaXREYXRhQ2hhbm5lbChldi5jaGFubmVsKTtcbiAgICB9O1xuICAgIHJ0Yy5vbnRyYWNrID0gKGV2KSA9PiB7XG4gICAgICAgIGluaXRNZWRpYVRyYWNrKGV2LnRyYWNrKTtcbiAgICAgICAgZXYuc3RyZWFtcy5mb3JFYWNoKChzdHJlYW0pID0+IGluaXRNZWRpYVN0cmVhbShzdHJlYW0pKTtcbiAgICB9O1xuICAgIC8vID09PSBJTlNUQU5DRSA9PT1cbiAgICBjb25zdCBwZWVySW5zdGFuY2UgPSB7XG4gICAgICAgIC8vID09PSBMSVNURU5FUlMgQ09OVFJPTExJTkcgPT09XG4gICAgICAgIC4uLmNoZXN0LFxuICAgICAgICAvLyA9PT0gUlRDIE9CSkVDVCA9PT1cbiAgICAgICAgcnRjLFxuICAgICAgICBnZXRTdGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBydGMuY29ubmVjdGlvblN0YXRlO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT0gQ09OTkVDVCBDT05UUk9MTElORyA9PT1cbiAgICAgICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgICAgICBpZiAoaXNTdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlzU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBjaGVzdC5leGVjKCdzdGFydCcpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHJ0Yy5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgICAgIGlmIChvZmZlci5zZHApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gc2RwVHJhbnNmb3JtLnBhcnNlKG9mZmVyLnNkcCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvTWVkaWEgPSByZXMubWVkaWEuZmluZCgobSkgPT4gbS50eXBlID09PSAndmlkZW8nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpZGVvTWVkaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvTWVkaWEucnRwID0gdmlkZW9NZWRpYS5ydHAuZmlsdGVyKChydHBJdGVtKSA9PiBydHBJdGVtLmNvZGVjID09PSAnSDI2NCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlkZW9QYXlsb2FkcyA9IHZpZGVvTWVkaWEucnRwLm1hcCgocnRwSXRlbSkgPT4gcnRwSXRlbS5wYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvTWVkaWEucGF5bG9hZHMgPSB2aWRlb1BheWxvYWRzLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvTWVkaWEuZm10cCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9NZWRpYS5mbXRwPy5maWx0ZXIoKGZtdHBJdGVtKSA9PiB2aWRlb1BheWxvYWRzLmluY2x1ZGVzKGZtdHBJdGVtLnBheWxvYWQpKSA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvTWVkaWEucnRjcEZiID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb01lZGlhLnJ0Y3BGYj8uZmlsdGVyKChydGNwRmJJdGVtKSA9PiB2aWRlb1BheWxvYWRzLmluY2x1ZGVzKHJ0Y3BGYkl0ZW0ucGF5bG9hZCkpID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9mZmVyLnNkcCA9IHNkcFRyYW5zZm9ybS53cml0ZShyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBydGMuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgY2hlc3QuZXhlYyhQRUVSX0VWRU5UUy5TRFAsIHsgc2RwOiBvZmZlciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvZiBvZmZlciBnZW5lcmF0aW5nOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3RvcCgpIHtcbiAgICAgICAgICAgIGlmICghaXNTdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNoZXN0LmV4ZWMoJ3N0b3AnKTtcbiAgICAgICAgICAgIGNoZXN0Lm9uY2UoUEVFUl9FVkVOVFMuQ0xPU0VELCAoKSA9PiBjaGVzdC5vZmZBbGwoKSk7XG4gICAgICAgICAgICBydGMuY2xvc2UoKTtcbiAgICAgICAgICAgIGV4ZWNVcGRhdGVTdGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBzZXRSZW1vdGVTZHAoc2RwKSB7XG4gICAgICAgICAgICBhd2FpdCBydGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oc2RwKTtcbiAgICAgICAgICAgIGRvQ2FuZGlkYXRlQnVmZmVyKCk7XG4gICAgICAgICAgICBpZiAoaXNTdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgcnRjLmNyZWF0ZUFuc3dlcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJ0Yy5zZXRMb2NhbERlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICAgICAgY2hlc3QuZXhlYyhQRUVSX0VWRU5UUy5TRFAsIHsgc2RwOiBhbnN3ZXIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb2YgYW5zd2VyIGdlbmVyYXRpbmc6JywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhZGRDYW5kaWRhdGUoaWNlKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVCdWZmZXIucHVzaChpY2UpO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT0gREFUQSBDT05UUk9MTElORyA9PT1cbiAgICAgICAgc2VuZChtc2dUZXh0LCBuYW1lKSB7XG4gICAgICAgICAgICBkYXRhQ2hhbm5lbHMuZ2V0KG5hbWUpPy5zZW5kKG1zZ1RleHQpO1xuICAgICAgICB9LFxuICAgICAgICBhZGREYXRhQ2hhbm5lbChuYW1lLCBjb25maWcpIHtcbiAgICAgICAgICAgIGlmIChpc1N0YXJ0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2hlc3Qub24oJ3N0YXJ0JywgKCkgPT4gaW5pdERhdGFDaGFubmVsKHJ0Yy5jcmVhdGVEYXRhQ2hhbm5lbChuYW1lLCBjb25maWcpKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkTWVkaWFUcmFjayh0cmFjaywgc3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoaXNTdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJ0Yy5hZGRUcmFjayh0cmFjaywgc3RyZWFtKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT0gR0VUIElURU0gPT09XG4gICAgICAgIGdldE1lZGlhU3RyZWFtKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVkaWFTdHJlYW1zLmdldChpZCkgPz8gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0TWVkaWFUcmFjayhpZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1lZGlhVHJhY2tzLmdldChpZCkgPz8gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0RGF0YUNoYW5uZWwobGFiZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhQ2hhbm5lbHMuZ2V0KGxhYmVsKSA/PyBudWxsO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT0gR0VUIENPTExFQ1RJT04gT0YgS0VZUyA9PT1cbiAgICAgICAgZ2V0TWVkaWFUcmFja0lkcygpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG1lZGlhVHJhY2tzLmtleXMoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldE1lZGlhU3RyZWFtSWRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obWVkaWFTdHJlYW1zLmtleXMoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldERhdGFDaGFubmVsTGFiZWxzKCkge1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZGF0YUNoYW5uZWxzLmtleXMoKSk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gcGVlckluc3RhbmNlO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7918\n")},8175:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  H0: () => (/* reexport */ addDebug),\n  Ku: () => (/* reexport */ bindProps),\n  C3: () => (/* reexport */ getWebApp),\n  KT: () => (/* reexport */ listen),\n  Bo: () => (/* reexport */ unlisten)\n});\n\n// UNUSED EXPORTS: deepCopy, deepCopyArr, deepCopyDict, listenOnce, manageListeners, once, wait\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(4848);\n;// ./src/lib/utils/bindProps.tsx\n\nconst bindProps = (Comp, boundProps) => {\n    return (props) => (0,jsx_runtime.jsx)(Comp, { ...props, ...boundProps });\n};\n\n\n;// ./src/lib/utils/jsUtils.ts\nfunction deepCopyDict(dict, { copyDict = true, copyArray = false, depth = 3, underGround = false } = {}) {\n    return deepCopy(dict, { copyDict, copyArray, depth, underGround });\n}\nfunction deepCopyArr(arr, { copyDict = false, copyArray = true, depth = 3, underGround = false } = {}) {\n    return deepCopy(arr, { copyDict, copyArray, depth, underGround });\n}\nfunction deepCopy(obj, { copyDict = true, copyArray = true, depth = 3, underGround = false } = {}, memo = new Map()) {\n    const isArray = Array.isArray(obj);\n    // Depth Checking\n    // if -1 -> Full depth\n    if (depth === 0) {\n        if (underGround)\n            return obj;\n        return isArray ? [] : {};\n    }\n    // Memo Checking\n    if (memo.has(obj))\n        return memo.get(obj);\n    // Check for ban to copy the Object type\n    if ((isArray && !copyArray) || (!isArray && !copyDict))\n        return obj;\n    const resultObj = isArray ? [] : {};\n    memo.set(obj, resultObj);\n    const options = { copyArray, copyDict, depth: depth - 1, underGround };\n    for (let [key, val] of Object.entries(obj)) {\n        if (typeof val === 'object' && val !== null) {\n            resultObj[key] = deepCopy(val, options, memo);\n            continue;\n        }\n        resultObj[key] = val;\n    }\n    return resultObj;\n}\nconst wait = async (ms) => {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n};\nfunction addDebug(prop, val) {\n    if (!window.debug)\n        window.debug = {};\n    window.debug[prop] = val;\n}\nfunction once(callback) {\n    let called = false;\n    return (...args) => {\n        if (called)\n            return false;\n        called = true;\n        callback(...args);\n        return true;\n    };\n}\nfunction manageListeners(master, listeners, toolName) {\n    if (typeof master?.[toolName] !== 'function') {\n        console.error(`Method \"${toolName}\" is not found on:`, master);\n        return;\n    }\n    for (let event in listeners) {\n        if (typeof listeners[event] !== 'function')\n            continue;\n        master[toolName](event, listeners[event]);\n    }\n}\nfunction listen(master, listeners, toolName = 'on') {\n    manageListeners(master, listeners, toolName);\n}\nfunction listenOnce(master, listeners, toolName = 'once') {\n    manageListeners(master, listeners, toolName);\n}\nfunction unlisten(master, listeners, toolName = 'off') {\n    manageListeners(master, listeners, toolName);\n}\n\n;// ./src/lib/utils/tg.ts\n\nfunction getWebApp() {\n    return window.Telegram?.WebApp ?? null;\n}\n\n;// ./src/lib/utils/index.ts\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODE3NS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDaEQ7QUFDQSxzQkFBc0IsbUJBQUksU0FBUyx5QkFBeUI7QUFDNUQ7QUFDcUI7OztBQ0pkLDhCQUE4QixxRUFBcUUsSUFBSTtBQUM5Ryw0QkFBNEIseUNBQXlDO0FBQ3JFO0FBQ08sNEJBQTRCLHFFQUFxRSxJQUFJO0FBQzVHLDJCQUEyQix5Q0FBeUM7QUFDcEU7QUFDTyx5QkFBeUIsb0VBQW9FLElBQUk7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGlDQUFpQyxTQUFTO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7OztBQ3RFcUI7QUFDckI7QUFDQTtBQUNBOzs7QUNINEI7QUFDRjtBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvbGliL3V0aWxzL2JpbmRQcm9wcy50c3g/YjZiMiIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9saWIvdXRpbHMvanNVdGlscy50cz8xNTliIiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2xpYi91dGlscy90Zy50cz8zNmY1Iiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2xpYi91dGlscy9pbmRleC50cz9kMDcyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5jb25zdCBiaW5kUHJvcHMgPSAoQ29tcCwgYm91bmRQcm9wcykgPT4ge1xuICAgIHJldHVybiAocHJvcHMpID0+IF9qc3goQ29tcCwgeyAuLi5wcm9wcywgLi4uYm91bmRQcm9wcyB9KTtcbn07XG5leHBvcnQgeyBiaW5kUHJvcHMgfTtcbiIsImV4cG9ydCBmdW5jdGlvbiBkZWVwQ29weURpY3QoZGljdCwgeyBjb3B5RGljdCA9IHRydWUsIGNvcHlBcnJheSA9IGZhbHNlLCBkZXB0aCA9IDMsIHVuZGVyR3JvdW5kID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgcmV0dXJuIGRlZXBDb3B5KGRpY3QsIHsgY29weURpY3QsIGNvcHlBcnJheSwgZGVwdGgsIHVuZGVyR3JvdW5kIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBDb3B5QXJyKGFyciwgeyBjb3B5RGljdCA9IGZhbHNlLCBjb3B5QXJyYXkgPSB0cnVlLCBkZXB0aCA9IDMsIHVuZGVyR3JvdW5kID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgcmV0dXJuIGRlZXBDb3B5KGFyciwgeyBjb3B5RGljdCwgY29weUFycmF5LCBkZXB0aCwgdW5kZXJHcm91bmQgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVlcENvcHkob2JqLCB7IGNvcHlEaWN0ID0gdHJ1ZSwgY29weUFycmF5ID0gdHJ1ZSwgZGVwdGggPSAzLCB1bmRlckdyb3VuZCA9IGZhbHNlIH0gPSB7fSwgbWVtbyA9IG5ldyBNYXAoKSkge1xuICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KG9iaik7XG4gICAgLy8gRGVwdGggQ2hlY2tpbmdcbiAgICAvLyBpZiAtMSAtPiBGdWxsIGRlcHRoXG4gICAgaWYgKGRlcHRoID09PSAwKSB7XG4gICAgICAgIGlmICh1bmRlckdyb3VuZClcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIHJldHVybiBpc0FycmF5ID8gW10gOiB7fTtcbiAgICB9XG4gICAgLy8gTWVtbyBDaGVja2luZ1xuICAgIGlmIChtZW1vLmhhcyhvYmopKVxuICAgICAgICByZXR1cm4gbWVtby5nZXQob2JqKTtcbiAgICAvLyBDaGVjayBmb3IgYmFuIHRvIGNvcHkgdGhlIE9iamVjdCB0eXBlXG4gICAgaWYgKChpc0FycmF5ICYmICFjb3B5QXJyYXkpIHx8ICghaXNBcnJheSAmJiAhY29weURpY3QpKVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIGNvbnN0IHJlc3VsdE9iaiA9IGlzQXJyYXkgPyBbXSA6IHt9O1xuICAgIG1lbW8uc2V0KG9iaiwgcmVzdWx0T2JqKTtcbiAgICBjb25zdCBvcHRpb25zID0geyBjb3B5QXJyYXksIGNvcHlEaWN0LCBkZXB0aDogZGVwdGggLSAxLCB1bmRlckdyb3VuZCB9O1xuICAgIGZvciAobGV0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXN1bHRPYmpba2V5XSA9IGRlZXBDb3B5KHZhbCwgb3B0aW9ucywgbWVtbyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRPYmpba2V5XSA9IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdE9iajtcbn1cbmV4cG9ydCBjb25zdCB3YWl0ID0gYXN5bmMgKG1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGFkZERlYnVnKHByb3AsIHZhbCkge1xuICAgIGlmICghd2luZG93LmRlYnVnKVxuICAgICAgICB3aW5kb3cuZGVidWcgPSB7fTtcbiAgICB3aW5kb3cuZGVidWdbcHJvcF0gPSB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gb25jZShjYWxsYmFjaykge1xuICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGNhbGxlZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbWFuYWdlTGlzdGVuZXJzKG1hc3RlciwgbGlzdGVuZXJzLCB0b29sTmFtZSkge1xuICAgIGlmICh0eXBlb2YgbWFzdGVyPy5bdG9vbE5hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYE1ldGhvZCBcIiR7dG9vbE5hbWV9XCIgaXMgbm90IGZvdW5kIG9uOmAsIG1hc3Rlcik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChsZXQgZXZlbnQgaW4gbGlzdGVuZXJzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXJzW2V2ZW50XSAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBtYXN0ZXJbdG9vbE5hbWVdKGV2ZW50LCBsaXN0ZW5lcnNbZXZlbnRdKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuKG1hc3RlciwgbGlzdGVuZXJzLCB0b29sTmFtZSA9ICdvbicpIHtcbiAgICBtYW5hZ2VMaXN0ZW5lcnMobWFzdGVyLCBsaXN0ZW5lcnMsIHRvb2xOYW1lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKG1hc3RlciwgbGlzdGVuZXJzLCB0b29sTmFtZSA9ICdvbmNlJykge1xuICAgIG1hbmFnZUxpc3RlbmVycyhtYXN0ZXIsIGxpc3RlbmVycywgdG9vbE5hbWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVubGlzdGVuKG1hc3RlciwgbGlzdGVuZXJzLCB0b29sTmFtZSA9ICdvZmYnKSB7XG4gICAgbWFuYWdlTGlzdGVuZXJzKG1hc3RlciwgbGlzdGVuZXJzLCB0b29sTmFtZSk7XG59XG4iLCJleHBvcnQgeyBnZXRXZWJBcHAgfTtcbmZ1bmN0aW9uIGdldFdlYkFwcCgpIHtcbiAgICByZXR1cm4gd2luZG93LlRlbGVncmFtPy5XZWJBcHAgPz8gbnVsbDtcbn1cbiIsImV4cG9ydCAqIGZyb20gJy4vYmluZFByb3BzJztcbmV4cG9ydCAqIGZyb20gJy4vanNVdGlscyc7XG5leHBvcnQgKiBmcm9tICcuL3RnJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8175\n")},8349:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  Cd: () => (/* reexport */ Accessor),\n  q9: () => (/* reexport */ ListenerChest),\n  Dw: () => (/* reexport */ StateLeader),\n  jd: () => (/* reexport */ When)\n});\n\n// UNUSED EXPORTS: ACCESSOR_EVENTS, LISTENER_CHEST_API, PrivateContext, WHEN_API, checkForPropertyKey, doApi\n\n;// ./src/lib/pprinter-tools/helpers.ts\nfunction checkForPropertyKey(key) {\n    return typeof key === 'string' || typeof key === 'symbol' || typeof key === 'number';\n}\nfunction doApi(target, api, bind, apiKeys) {\n    for (let methodName of apiKeys) {\n        if (typeof api[methodName] === 'function') {\n            target[methodName] = bind ? api[methodName].bind(api) : api[methodName];\n        }\n    }\n}\n\n;// ./src/lib/pprinter-tools/PrivateContext.ts\n\n// === PRIVATE DATA ===\nconst context = new WeakMap();\n// === Make-util OF FABRIC PATTERN ===\nclass PrivateContext {\n    set(obj, propOrProps, value) {\n        if (!context.has(obj))\n            context.set(obj, {});\n        const privatePlace = context.get(obj);\n        const [prop, props] = [propOrProps, propOrProps];\n        if (checkForPropertyKey(prop)) {\n            if (value === undefined)\n                throw Error(\"'value' arg is undefined\");\n            if (typeof value === 'function')\n                value = value.bind(obj);\n            privatePlace[prop] = value;\n            return;\n        }\n        if (typeof props === 'object') {\n            for (let methodName in props) {\n                if (typeof props[methodName] === 'function') {\n                    props[methodName] = props[methodName].bind(obj);\n                }\n            }\n            Object.assign(privatePlace, props);\n            return;\n        }\n    }\n    get(obj, propOrPropNames) {\n        const privatePlace = context.get(obj);\n        if (!privatePlace)\n            throw Error(\"'obj' did not set for its PrivateContext\");\n        const [prop, propNames] = [propOrPropNames, propOrPropNames];\n        if (typeof propOrPropNames === 'undefined')\n            return { ...privatePlace };\n        if (checkForPropertyKey(prop))\n            return privatePlace[prop];\n        if (typeof propNames === 'object') {\n            if (!Array.isArray(propNames))\n                throw Error(\"'propNames' arg must be array\");\n            const result = {};\n            propNames.forEach((propName) => (result[propName] = privatePlace[propName]));\n            return result;\n        }\n        throw TypeError(`'prop' (string) or 'propNames' (string[]) arg: ${typeof propOrPropNames} has incorrect type`);\n    }\n    has(obj, prop) {\n        const privatePlace = context.get(obj);\n        return privatePlace ? prop in privatePlace : false;\n    }\n    delete(obj, prop) {\n        const privatePlace = context.get(obj);\n        if (!privatePlace)\n            return false;\n        return delete privatePlace[prop];\n    }\n}\n\n;// ./src/lib/pprinter-tools/ListenerChest.ts\n\n\nconst LISTENER_CHEST_API = [\n    'on',\n    'off',\n    'once',\n    'offAll',\n    'exec',\n];\nObject.freeze(LISTENER_CHEST_API);\n// === PRIVATE CONTEXT ===\nconst privateContext = new PrivateContext();\n// === CLASS DEFINITION ===\nclass ListenerChest {\n    static implementTo(obj, api) {\n        doApi(obj, api, false, LISTENER_CHEST_API);\n    }\n    constructor(api) {\n        if (!api) {\n            const privateProps = {\n                onceSet: new Set(),\n                listenerDict: {},\n            };\n            privateContext.set(this, privateProps);\n        }\n        doApi(this, api ? api : this, api ? false : true, LISTENER_CHEST_API);\n    }\n    // === API FRAGMENT ===\n    on(event, listener) {\n        const listenerDict = privateContext.get(this, 'listenerDict');\n        if (listenerDict[event] === undefined)\n            listenerDict[event] = new Set();\n        listenerDict[event].add(listener);\n    }\n    off(event, listener) {\n        const listenerDict = privateContext.get(this, 'listenerDict');\n        const onceSet = privateContext.get(this, 'onceSet');\n        if (listenerDict[event] === undefined)\n            return;\n        listenerDict[event].delete(listener);\n        onceSet.delete(listener);\n        if (listenerDict[event].size === 0) {\n            delete listenerDict[event];\n        }\n    }\n    once(event, listener) {\n        const onceSet = privateContext.get(this, 'onceSet');\n        this.on(event, listener);\n        onceSet.add(listener);\n    }\n    offAll() {\n        privateContext.set(this, 'listenerDict', {});\n        privateContext.get(this, 'onceSet').clear();\n    }\n    exec(event, data) {\n        const listenerDict = privateContext.get(this, 'listenerDict');\n        const onceSet = privateContext.get(this, 'onceSet');\n        listenerDict[event]?.forEach((listener) => {\n            listener(data);\n            if (onceSet.has(listener))\n                this.off(event, listener);\n        });\n    }\n}\n\n;// ./src/lib/pprinter-tools/Accessor.ts\n\n\nconst ACCESSOR_EVENTS = {\n    ACCESS: 'access',\n    DENIED: 'denied',\n};\nObject.freeze(ACCESSOR_EVENTS);\nconst Accessor_privateContext = new PrivateContext();\nclass Accessor {\n    constructor(flagList) {\n        const privatePlace = {\n            rest: new Set(flagList),\n            flagSet: new Set(flagList),\n            state: false,\n            chest: new ListenerChest(),\n            checkFlagName(flagName) {\n                if (typeof flagName !== 'string')\n                    throw TypeError('flagName must be string');\n                const flagSet = Accessor_privateContext.get(this, 'flagSet');\n                if (!flagSet.has(flagName)) {\n                    console.error(`flagName (=${flagName}) isn't exist for Accessor`);\n                    return false;\n                }\n                return true;\n            },\n            updateAccess() {\n                const rest = Accessor_privateContext.get(this, 'rest');\n                const state = Accessor_privateContext.get(this, 'state');\n                const chest = Accessor_privateContext.get(this, 'chest');\n                if (rest.size === 0 && state === false) {\n                    Accessor_privateContext.set(this, 'state', true);\n                    chest.exec(ACCESSOR_EVENTS.ACCESS);\n                    return true;\n                }\n                else if (rest.size !== 0 && state === true) {\n                    Accessor_privateContext.set(this, 'state', false);\n                    chest.exec(ACCESSOR_EVENTS.DENIED);\n                    return true;\n                }\n                return false;\n            },\n        };\n        Accessor_privateContext.set(this, privatePlace);\n    }\n    get on() {\n        return Accessor_privateContext.get(this, 'chest').on;\n    }\n    get off() {\n        return Accessor_privateContext.get(this, 'chest').off;\n    }\n    get once() {\n        return Accessor_privateContext.get(this, 'chest').once;\n    }\n    get offAll() {\n        return Accessor_privateContext.get(this, 'chest').offAll;\n    }\n    get exec() {\n        return Accessor_privateContext.get(this, 'chest').exec;\n    }\n    set(flagName) {\n        const checkFlagName = Accessor_privateContext.get(this, 'checkFlagName');\n        const updateAccess = Accessor_privateContext.get(this, 'updateAccess');\n        const rest = Accessor_privateContext.get(this, 'rest');\n        if (!checkFlagName(flagName))\n            return false;\n        rest.delete(flagName);\n        return updateAccess();\n    }\n    reset(flagName) {\n        const checkFlagName = Accessor_privateContext.get(this, 'checkFlagName');\n        const updateAccess = Accessor_privateContext.get(this, 'updateAccess');\n        const rest = Accessor_privateContext.get(this, 'rest');\n        if (!checkFlagName(flagName))\n            return false;\n        rest.add(flagName);\n        return updateAccess();\n    }\n    getState() {\n        return Accessor_privateContext.get(this, 'state');\n    }\n}\n\n;// ./src/lib/pprinter-tools/StateLeader.ts\n\nconst StateLeader_privateContext = new PrivateContext();\nclass StateLeader {\n    constructor(initState, stateGraph) {\n        const stateMap = {};\n        StateLeader_privateContext.set(this, 'state', initState);\n        StateLeader_privateContext.set(this, 'stateMap', stateMap);\n        for (let state in stateGraph) {\n            if (!Array.isArray(stateGraph[state]))\n                continue;\n            stateMap[state] = new Set(stateGraph[state]);\n        }\n    }\n    is(isState) {\n        const state = StateLeader_privateContext.get(this, 'state');\n        return state === isState;\n    }\n    set(state, next) {\n        const stateMap = StateLeader_privateContext.get(this, 'stateMap');\n        if (next === undefined || !Array.isArray(next) || next.length === 0)\n            delete stateMap[state];\n        stateMap[state] = new Set(next);\n    }\n    get() {\n        const state = StateLeader_privateContext.get(this, 'state');\n        return state;\n    }\n    move(nextState) {\n        if (!this.canMove(nextState))\n            return false;\n        StateLeader_privateContext.set(this, 'state', nextState);\n        return true;\n    }\n    canMove(nextState) {\n        const stateMap = StateLeader_privateContext.get(this, 'stateMap');\n        const state = StateLeader_privateContext.get(this, 'state');\n        if (!stateMap[state] || !stateMap[state].has(nextState)) {\n            return false;\n        }\n        return true;\n    }\n}\n\n;// ./src/lib/pprinter-tools/When.ts\n\n\nconst WHEN_API = ['occur', 'when'];\nObject.freeze(WHEN_API);\nconst When_privateContext = new PrivateContext();\nclass When {\n    static implementTo(obj, api) {\n        doApi(obj, api, false, WHEN_API);\n    }\n    constructor(stateDict = {}) {\n        const initSet = new Set();\n        for (let stateKey in stateDict)\n            initSet.add(stateKey);\n        When_privateContext.set(this, 'stateDict', stateDict);\n        When_privateContext.set(this, 'initSet', initSet);\n        When_privateContext.set(this, 'listenerDict', {});\n        const api = 'occur';\n        this[api];\n        doApi(this, this, true, WHEN_API);\n    }\n    occur(stateName, state) {\n        const listenerDict = When_privateContext.get(this, 'listenerDict');\n        const stateDict = When_privateContext.get(this, 'stateDict');\n        const initSet = When_privateContext.get(this, 'initSet');\n        if (state !== undefined)\n            stateDict[stateName] = state;\n        if (!initSet.has(stateName)) {\n            initSet.add(stateName);\n            listenerDict[stateName]?.forEach((listener) => listener(state));\n            delete listenerDict[stateName];\n        }\n    }\n    when(stateName, listener) {\n        const listenerDict = When_privateContext.get(this, 'listenerDict');\n        const stateDict = When_privateContext.get(this, 'stateDict');\n        const initSet = When_privateContext.get(this, 'initSet');\n        if (!listener)\n            return stateDict[stateName];\n        if (initSet.has(stateName))\n            listener(stateDict[stateName]);\n        else {\n            listenerDict[stateName] ??= new Set();\n            listenerDict[stateName].add(listener);\n        }\n        return stateDict[stateName];\n    }\n    unwhen(stateName, listener) {\n        const listenerDict = When_privateContext.get(this, 'listenerDict');\n        if (!listenerDict[stateName])\n            return;\n        listenerDict[stateName].delete(listener);\n        listenerDict[stateName].size === 0 && delete listenerDict[stateName];\n    }\n}\n\n;// ./src/lib/pprinter-tools/index.ts\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsMEJBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBCQUFjO0FBQ3ZDLHNCQUFzQiwwQkFBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pDa0M7QUFDZ0I7QUFDM0M7QUFDUDtBQUNBLE1BQU0sbUJBQWMsT0FBTyxjQUFjO0FBQ2xDO0FBQ1A7QUFDQSxRQUFRLEtBQUs7QUFDYjtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1CQUFjO0FBQ3RCLFFBQVEsbUJBQWM7QUFDdEIsUUFBUSxtQkFBYyw2QkFBNkI7QUFDbkQ7QUFDQTtBQUNBLFFBQVEsS0FBSztBQUNiO0FBQ0E7QUFDQSw2QkFBNkIsbUJBQWM7QUFDM0MsMEJBQTBCLG1CQUFjO0FBQ3hDLHdCQUF3QixtQkFBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUJBQWM7QUFDM0MsMEJBQTBCLG1CQUFjO0FBQ3hDLHdCQUF3QixtQkFBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1CQUFjO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDckQyQjtBQUNLO0FBQ0M7QUFDSDtBQUNQO0FBQ0c7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2xpYi9wcHJpbnRlci10b29scy9oZWxwZXJzLnRzPzM3NjMiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvbGliL3BwcmludGVyLXRvb2xzL1ByaXZhdGVDb250ZXh0LnRzPzNlNTkiLCJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvbGliL3BwcmludGVyLXRvb2xzL0xpc3RlbmVyQ2hlc3QudHM/YjYwYyIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9saWIvcHByaW50ZXItdG9vbHMvQWNjZXNzb3IudHM/YzJhYSIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9saWIvcHByaW50ZXItdG9vbHMvU3RhdGVMZWFkZXIudHM/ZDFhMiIsIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9saWIvcHByaW50ZXItdG9vbHMvV2hlbi50cz9jMzc3Iiwid2VicGFjazovL3ZkZTAuZ2l0aHViLmlvLy4vc3JjL2xpYi9wcHJpbnRlci10b29scy9pbmRleC50cz9hOWUxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBjaGVja0ZvclByb3BlcnR5S2V5KGtleSkge1xuICAgIHJldHVybiB0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyB8fCB0eXBlb2Yga2V5ID09PSAnc3ltYm9sJyB8fCB0eXBlb2Yga2V5ID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBkb0FwaSh0YXJnZXQsIGFwaSwgYmluZCwgYXBpS2V5cykge1xuICAgIGZvciAobGV0IG1ldGhvZE5hbWUgb2YgYXBpS2V5cykge1xuICAgICAgICBpZiAodHlwZW9mIGFwaVttZXRob2ROYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGFyZ2V0W21ldGhvZE5hbWVdID0gYmluZCA/IGFwaVttZXRob2ROYW1lXS5iaW5kKGFwaSkgOiBhcGlbbWV0aG9kTmFtZV07XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjaGVja0ZvclByb3BlcnR5S2V5IH0gZnJvbSAnLi9oZWxwZXJzJztcbi8vID09PSBQUklWQVRFIERBVEEgPT09XG5jb25zdCBjb250ZXh0ID0gbmV3IFdlYWtNYXAoKTtcbi8vID09PSBNYWtlLXV0aWwgT0YgRkFCUklDIFBBVFRFUk4gPT09XG5leHBvcnQgY2xhc3MgUHJpdmF0ZUNvbnRleHQge1xuICAgIHNldChvYmosIHByb3BPclByb3BzLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWNvbnRleHQuaGFzKG9iaikpXG4gICAgICAgICAgICBjb250ZXh0LnNldChvYmosIHt9KTtcbiAgICAgICAgY29uc3QgcHJpdmF0ZVBsYWNlID0gY29udGV4dC5nZXQob2JqKTtcbiAgICAgICAgY29uc3QgW3Byb3AsIHByb3BzXSA9IFtwcm9wT3JQcm9wcywgcHJvcE9yUHJvcHNdO1xuICAgICAgICBpZiAoY2hlY2tGb3JQcm9wZXJ0eUtleShwcm9wKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCIndmFsdWUnIGFyZyBpcyB1bmRlZmluZWRcIik7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuYmluZChvYmopO1xuICAgICAgICAgICAgcHJpdmF0ZVBsYWNlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IG1ldGhvZE5hbWUgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BzW21ldGhvZE5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzW21ldGhvZE5hbWVdID0gcHJvcHNbbWV0aG9kTmFtZV0uYmluZChvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJpdmF0ZVBsYWNlLCBwcm9wcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0KG9iaiwgcHJvcE9yUHJvcE5hbWVzKSB7XG4gICAgICAgIGNvbnN0IHByaXZhdGVQbGFjZSA9IGNvbnRleHQuZ2V0KG9iaik7XG4gICAgICAgIGlmICghcHJpdmF0ZVBsYWNlKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCInb2JqJyBkaWQgbm90IHNldCBmb3IgaXRzIFByaXZhdGVDb250ZXh0XCIpO1xuICAgICAgICBjb25zdCBbcHJvcCwgcHJvcE5hbWVzXSA9IFtwcm9wT3JQcm9wTmFtZXMsIHByb3BPclByb3BOYW1lc107XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcE9yUHJvcE5hbWVzID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnByaXZhdGVQbGFjZSB9O1xuICAgICAgICBpZiAoY2hlY2tGb3JQcm9wZXJ0eUtleShwcm9wKSlcbiAgICAgICAgICAgIHJldHVybiBwcml2YXRlUGxhY2VbcHJvcF07XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcE5hbWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHByb3BOYW1lcykpXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCIncHJvcE5hbWVzJyBhcmcgbXVzdCBiZSBhcnJheVwiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICAgICAgcHJvcE5hbWVzLmZvckVhY2goKHByb3BOYW1lKSA9PiAocmVzdWx0W3Byb3BOYW1lXSA9IHByaXZhdGVQbGFjZVtwcm9wTmFtZV0pKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKGAncHJvcCcgKHN0cmluZykgb3IgJ3Byb3BOYW1lcycgKHN0cmluZ1tdKSBhcmc6ICR7dHlwZW9mIHByb3BPclByb3BOYW1lc30gaGFzIGluY29ycmVjdCB0eXBlYCk7XG4gICAgfVxuICAgIGhhcyhvYmosIHByb3ApIHtcbiAgICAgICAgY29uc3QgcHJpdmF0ZVBsYWNlID0gY29udGV4dC5nZXQob2JqKTtcbiAgICAgICAgcmV0dXJuIHByaXZhdGVQbGFjZSA/IHByb3AgaW4gcHJpdmF0ZVBsYWNlIDogZmFsc2U7XG4gICAgfVxuICAgIGRlbGV0ZShvYmosIHByb3ApIHtcbiAgICAgICAgY29uc3QgcHJpdmF0ZVBsYWNlID0gY29udGV4dC5nZXQob2JqKTtcbiAgICAgICAgaWYgKCFwcml2YXRlUGxhY2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBkZWxldGUgcHJpdmF0ZVBsYWNlW3Byb3BdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGRvQXBpIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IFByaXZhdGVDb250ZXh0IH0gZnJvbSAnLi9Qcml2YXRlQ29udGV4dCc7XG5leHBvcnQgY29uc3QgTElTVEVORVJfQ0hFU1RfQVBJID0gW1xuICAgICdvbicsXG4gICAgJ29mZicsXG4gICAgJ29uY2UnLFxuICAgICdvZmZBbGwnLFxuICAgICdleGVjJyxcbl07XG5PYmplY3QuZnJlZXplKExJU1RFTkVSX0NIRVNUX0FQSSk7XG4vLyA9PT0gUFJJVkFURSBDT05URVhUID09PVxuY29uc3QgcHJpdmF0ZUNvbnRleHQgPSBuZXcgUHJpdmF0ZUNvbnRleHQoKTtcbi8vID09PSBDTEFTUyBERUZJTklUSU9OID09PVxuZXhwb3J0IGNsYXNzIExpc3RlbmVyQ2hlc3Qge1xuICAgIHN0YXRpYyBpbXBsZW1lbnRUbyhvYmosIGFwaSkge1xuICAgICAgICBkb0FwaShvYmosIGFwaSwgZmFsc2UsIExJU1RFTkVSX0NIRVNUX0FQSSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgICAgICBpZiAoIWFwaSkge1xuICAgICAgICAgICAgY29uc3QgcHJpdmF0ZVByb3BzID0ge1xuICAgICAgICAgICAgICAgIG9uY2VTZXQ6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW5lckRpY3Q6IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHByaXZhdGVDb250ZXh0LnNldCh0aGlzLCBwcml2YXRlUHJvcHMpO1xuICAgICAgICB9XG4gICAgICAgIGRvQXBpKHRoaXMsIGFwaSA/IGFwaSA6IHRoaXMsIGFwaSA/IGZhbHNlIDogdHJ1ZSwgTElTVEVORVJfQ0hFU1RfQVBJKTtcbiAgICB9XG4gICAgLy8gPT09IEFQSSBGUkFHTUVOVCA9PT1cbiAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJEaWN0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdsaXN0ZW5lckRpY3QnKTtcbiAgICAgICAgaWYgKGxpc3RlbmVyRGljdFtldmVudF0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGxpc3RlbmVyRGljdFtldmVudF0gPSBuZXcgU2V0KCk7XG4gICAgICAgIGxpc3RlbmVyRGljdFtldmVudF0uYWRkKGxpc3RlbmVyKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBsaXN0ZW5lckRpY3QgPSBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ2xpc3RlbmVyRGljdCcpO1xuICAgICAgICBjb25zdCBvbmNlU2V0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdvbmNlU2V0Jyk7XG4gICAgICAgIGlmIChsaXN0ZW5lckRpY3RbZXZlbnRdID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxpc3RlbmVyRGljdFtldmVudF0uZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgICAgb25jZVNldC5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICBpZiAobGlzdGVuZXJEaWN0W2V2ZW50XS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBkZWxldGUgbGlzdGVuZXJEaWN0W2V2ZW50XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBvbmNlU2V0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdvbmNlU2V0Jyk7XG4gICAgICAgIHRoaXMub24oZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgb25jZVNldC5hZGQobGlzdGVuZXIpO1xuICAgIH1cbiAgICBvZmZBbGwoKSB7XG4gICAgICAgIHByaXZhdGVDb250ZXh0LnNldCh0aGlzLCAnbGlzdGVuZXJEaWN0Jywge30pO1xuICAgICAgICBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ29uY2VTZXQnKS5jbGVhcigpO1xuICAgIH1cbiAgICBleGVjKGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyRGljdCA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnbGlzdGVuZXJEaWN0Jyk7XG4gICAgICAgIGNvbnN0IG9uY2VTZXQgPSBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ29uY2VTZXQnKTtcbiAgICAgICAgbGlzdGVuZXJEaWN0W2V2ZW50XT8uZm9yRWFjaCgobGlzdGVuZXIpID0+IHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGRhdGEpO1xuICAgICAgICAgICAgaWYgKG9uY2VTZXQuaGFzKGxpc3RlbmVyKSlcbiAgICAgICAgICAgICAgICB0aGlzLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMaXN0ZW5lckNoZXN0IH0gZnJvbSAnLi9MaXN0ZW5lckNoZXN0JztcbmltcG9ydCB7IFByaXZhdGVDb250ZXh0IH0gZnJvbSAnLi9Qcml2YXRlQ29udGV4dCc7XG5leHBvcnQgY29uc3QgQUNDRVNTT1JfRVZFTlRTID0ge1xuICAgIEFDQ0VTUzogJ2FjY2VzcycsXG4gICAgREVOSUVEOiAnZGVuaWVkJyxcbn07XG5PYmplY3QuZnJlZXplKEFDQ0VTU09SX0VWRU5UUyk7XG5jb25zdCBwcml2YXRlQ29udGV4dCA9IG5ldyBQcml2YXRlQ29udGV4dCgpO1xuZXhwb3J0IGNsYXNzIEFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcihmbGFnTGlzdCkge1xuICAgICAgICBjb25zdCBwcml2YXRlUGxhY2UgPSB7XG4gICAgICAgICAgICByZXN0OiBuZXcgU2V0KGZsYWdMaXN0KSxcbiAgICAgICAgICAgIGZsYWdTZXQ6IG5ldyBTZXQoZmxhZ0xpc3QpLFxuICAgICAgICAgICAgc3RhdGU6IGZhbHNlLFxuICAgICAgICAgICAgY2hlc3Q6IG5ldyBMaXN0ZW5lckNoZXN0KCksXG4gICAgICAgICAgICBjaGVja0ZsYWdOYW1lKGZsYWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmbGFnTmFtZSAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcignZmxhZ05hbWUgbXVzdCBiZSBzdHJpbmcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbGFnU2V0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdmbGFnU2V0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKCFmbGFnU2V0LmhhcyhmbGFnTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgZmxhZ05hbWUgKD0ke2ZsYWdOYW1lfSkgaXNuJ3QgZXhpc3QgZm9yIEFjY2Vzc29yYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlQWNjZXNzKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3QgPSBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ3Jlc3QnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnc3RhdGUnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVzdCA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnY2hlc3QnKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdC5zaXplID09PSAwICYmIHN0YXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBwcml2YXRlQ29udGV4dC5zZXQodGhpcywgJ3N0YXRlJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNoZXN0LmV4ZWMoQUNDRVNTT1JfRVZFTlRTLkFDQ0VTUyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN0LnNpemUgIT09IDAgJiYgc3RhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZUNvbnRleHQuc2V0KHRoaXMsICdzdGF0ZScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlc3QuZXhlYyhBQ0NFU1NPUl9FVkVOVFMuREVOSUVEKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHByaXZhdGVDb250ZXh0LnNldCh0aGlzLCBwcml2YXRlUGxhY2UpO1xuICAgIH1cbiAgICBnZXQgb24oKSB7XG4gICAgICAgIHJldHVybiBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ2NoZXN0Jykub247XG4gICAgfVxuICAgIGdldCBvZmYoKSB7XG4gICAgICAgIHJldHVybiBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ2NoZXN0Jykub2ZmO1xuICAgIH1cbiAgICBnZXQgb25jZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnY2hlc3QnKS5vbmNlO1xuICAgIH1cbiAgICBnZXQgb2ZmQWxsKCkge1xuICAgICAgICByZXR1cm4gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdjaGVzdCcpLm9mZkFsbDtcbiAgICB9XG4gICAgZ2V0IGV4ZWMoKSB7XG4gICAgICAgIHJldHVybiBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ2NoZXN0JykuZXhlYztcbiAgICB9XG4gICAgc2V0KGZsYWdOYW1lKSB7XG4gICAgICAgIGNvbnN0IGNoZWNrRmxhZ05hbWUgPSBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ2NoZWNrRmxhZ05hbWUnKTtcbiAgICAgICAgY29uc3QgdXBkYXRlQWNjZXNzID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICd1cGRhdGVBY2Nlc3MnKTtcbiAgICAgICAgY29uc3QgcmVzdCA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAncmVzdCcpO1xuICAgICAgICBpZiAoIWNoZWNrRmxhZ05hbWUoZmxhZ05hbWUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXN0LmRlbGV0ZShmbGFnTmFtZSk7XG4gICAgICAgIHJldHVybiB1cGRhdGVBY2Nlc3MoKTtcbiAgICB9XG4gICAgcmVzZXQoZmxhZ05hbWUpIHtcbiAgICAgICAgY29uc3QgY2hlY2tGbGFnTmFtZSA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnY2hlY2tGbGFnTmFtZScpO1xuICAgICAgICBjb25zdCB1cGRhdGVBY2Nlc3MgPSBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ3VwZGF0ZUFjY2VzcycpO1xuICAgICAgICBjb25zdCByZXN0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdyZXN0Jyk7XG4gICAgICAgIGlmICghY2hlY2tGbGFnTmFtZShmbGFnTmFtZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJlc3QuYWRkKGZsYWdOYW1lKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUFjY2VzcygpO1xuICAgIH1cbiAgICBnZXRTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnc3RhdGUnKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQcml2YXRlQ29udGV4dCB9IGZyb20gJy4vUHJpdmF0ZUNvbnRleHQnO1xuY29uc3QgcHJpdmF0ZUNvbnRleHQgPSBuZXcgUHJpdmF0ZUNvbnRleHQoKTtcbmV4cG9ydCBjbGFzcyBTdGF0ZUxlYWRlciB7XG4gICAgY29uc3RydWN0b3IoaW5pdFN0YXRlLCBzdGF0ZUdyYXBoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlTWFwID0ge307XG4gICAgICAgIHByaXZhdGVDb250ZXh0LnNldCh0aGlzLCAnc3RhdGUnLCBpbml0U3RhdGUpO1xuICAgICAgICBwcml2YXRlQ29udGV4dC5zZXQodGhpcywgJ3N0YXRlTWFwJywgc3RhdGVNYXApO1xuICAgICAgICBmb3IgKGxldCBzdGF0ZSBpbiBzdGF0ZUdyYXBoKSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3RhdGVHcmFwaFtzdGF0ZV0pKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgc3RhdGVNYXBbc3RhdGVdID0gbmV3IFNldChzdGF0ZUdyYXBoW3N0YXRlXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXMoaXNTdGF0ZSkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnc3RhdGUnKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlID09PSBpc1N0YXRlO1xuICAgIH1cbiAgICBzZXQoc3RhdGUsIG5leHQpIHtcbiAgICAgICAgY29uc3Qgc3RhdGVNYXAgPSBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ3N0YXRlTWFwJyk7XG4gICAgICAgIGlmIChuZXh0ID09PSB1bmRlZmluZWQgfHwgIUFycmF5LmlzQXJyYXkobmV4dCkgfHwgbmV4dC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICBkZWxldGUgc3RhdGVNYXBbc3RhdGVdO1xuICAgICAgICBzdGF0ZU1hcFtzdGF0ZV0gPSBuZXcgU2V0KG5leHQpO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdzdGF0ZScpO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIG1vdmUobmV4dFN0YXRlKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5Nb3ZlKG5leHRTdGF0ZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHByaXZhdGVDb250ZXh0LnNldCh0aGlzLCAnc3RhdGUnLCBuZXh0U3RhdGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2FuTW92ZShuZXh0U3RhdGUpIHtcbiAgICAgICAgY29uc3Qgc3RhdGVNYXAgPSBwcml2YXRlQ29udGV4dC5nZXQodGhpcywgJ3N0YXRlTWFwJyk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdzdGF0ZScpO1xuICAgICAgICBpZiAoIXN0YXRlTWFwW3N0YXRlXSB8fCAhc3RhdGVNYXBbc3RhdGVdLmhhcyhuZXh0U3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZG9BcGkgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgUHJpdmF0ZUNvbnRleHQgfSBmcm9tICcuL1ByaXZhdGVDb250ZXh0JztcbmV4cG9ydCBjb25zdCBXSEVOX0FQSSA9IFsnb2NjdXInLCAnd2hlbiddO1xuT2JqZWN0LmZyZWV6ZShXSEVOX0FQSSk7XG5jb25zdCBwcml2YXRlQ29udGV4dCA9IG5ldyBQcml2YXRlQ29udGV4dCgpO1xuZXhwb3J0IGNsYXNzIFdoZW4ge1xuICAgIHN0YXRpYyBpbXBsZW1lbnRUbyhvYmosIGFwaSkge1xuICAgICAgICBkb0FwaShvYmosIGFwaSwgZmFsc2UsIFdIRU5fQVBJKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Ioc3RhdGVEaWN0ID0ge30pIHtcbiAgICAgICAgY29uc3QgaW5pdFNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChsZXQgc3RhdGVLZXkgaW4gc3RhdGVEaWN0KVxuICAgICAgICAgICAgaW5pdFNldC5hZGQoc3RhdGVLZXkpO1xuICAgICAgICBwcml2YXRlQ29udGV4dC5zZXQodGhpcywgJ3N0YXRlRGljdCcsIHN0YXRlRGljdCk7XG4gICAgICAgIHByaXZhdGVDb250ZXh0LnNldCh0aGlzLCAnaW5pdFNldCcsIGluaXRTZXQpO1xuICAgICAgICBwcml2YXRlQ29udGV4dC5zZXQodGhpcywgJ2xpc3RlbmVyRGljdCcsIHt9KTtcbiAgICAgICAgY29uc3QgYXBpID0gJ29jY3VyJztcbiAgICAgICAgdGhpc1thcGldO1xuICAgICAgICBkb0FwaSh0aGlzLCB0aGlzLCB0cnVlLCBXSEVOX0FQSSk7XG4gICAgfVxuICAgIG9jY3VyKHN0YXRlTmFtZSwgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJEaWN0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdsaXN0ZW5lckRpY3QnKTtcbiAgICAgICAgY29uc3Qgc3RhdGVEaWN0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdzdGF0ZURpY3QnKTtcbiAgICAgICAgY29uc3QgaW5pdFNldCA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnaW5pdFNldCcpO1xuICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHN0YXRlRGljdFtzdGF0ZU5hbWVdID0gc3RhdGU7XG4gICAgICAgIGlmICghaW5pdFNldC5oYXMoc3RhdGVOYW1lKSkge1xuICAgICAgICAgICAgaW5pdFNldC5hZGQoc3RhdGVOYW1lKTtcbiAgICAgICAgICAgIGxpc3RlbmVyRGljdFtzdGF0ZU5hbWVdPy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoc3RhdGUpKTtcbiAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lckRpY3Rbc3RhdGVOYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aGVuKHN0YXRlTmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJEaWN0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdsaXN0ZW5lckRpY3QnKTtcbiAgICAgICAgY29uc3Qgc3RhdGVEaWN0ID0gcHJpdmF0ZUNvbnRleHQuZ2V0KHRoaXMsICdzdGF0ZURpY3QnKTtcbiAgICAgICAgY29uc3QgaW5pdFNldCA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnaW5pdFNldCcpO1xuICAgICAgICBpZiAoIWxpc3RlbmVyKVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlRGljdFtzdGF0ZU5hbWVdO1xuICAgICAgICBpZiAoaW5pdFNldC5oYXMoc3RhdGVOYW1lKSlcbiAgICAgICAgICAgIGxpc3RlbmVyKHN0YXRlRGljdFtzdGF0ZU5hbWVdKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsaXN0ZW5lckRpY3Rbc3RhdGVOYW1lXSA/Pz0gbmV3IFNldCgpO1xuICAgICAgICAgICAgbGlzdGVuZXJEaWN0W3N0YXRlTmFtZV0uYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGVEaWN0W3N0YXRlTmFtZV07XG4gICAgfVxuICAgIHVud2hlbihzdGF0ZU5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyRGljdCA9IHByaXZhdGVDb250ZXh0LmdldCh0aGlzLCAnbGlzdGVuZXJEaWN0Jyk7XG4gICAgICAgIGlmICghbGlzdGVuZXJEaWN0W3N0YXRlTmFtZV0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxpc3RlbmVyRGljdFtzdGF0ZU5hbWVdLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgICAgIGxpc3RlbmVyRGljdFtzdGF0ZU5hbWVdLnNpemUgPT09IDAgJiYgZGVsZXRlIGxpc3RlbmVyRGljdFtzdGF0ZU5hbWVdO1xuICAgIH1cbn1cbiIsImV4cG9ydCAqIGZyb20gJy4vQWNjZXNzb3InO1xuZXhwb3J0ICogZnJvbSAnLi9MaXN0ZW5lckNoZXN0JztcbmV4cG9ydCAqIGZyb20gJy4vUHJpdmF0ZUNvbnRleHQnO1xuZXhwb3J0ICogZnJvbSAnLi9TdGF0ZUxlYWRlcic7XG5leHBvcnQgKiBmcm9tICcuL1doZW4nO1xuZXhwb3J0ICogZnJvbSAnLi9nZW5lcmFsJztcbmV4cG9ydCAqIGZyb20gJy4vaGVscGVycyc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8349\n")},9579:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ PeerEntity),\n/* harmony export */   j: () => (/* binding */ setPeerFactory)\n/* harmony export */ });\nlet createPeer = null;\nfunction setPeerFactory(peerFactory) {\n    createPeer = peerFactory;\n}\nconst PeerEntity = function () {\n    if (createPeer === null)\n        throw Error('`peerFactory` is not defined.');\n    return createPeer();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTU3OS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmRlMC5naXRodWIuaW8vLi9zcmMvZW50aXRpZXMvUGVlckVudGl0eS50cz9lYmJjIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBjcmVhdGVQZWVyID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBzZXRQZWVyRmFjdG9yeShwZWVyRmFjdG9yeSkge1xuICAgIGNyZWF0ZVBlZXIgPSBwZWVyRmFjdG9yeTtcbn1cbmV4cG9ydCBjb25zdCBQZWVyRW50aXR5ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChjcmVhdGVQZWVyID09PSBudWxsKVxuICAgICAgICB0aHJvdyBFcnJvcignYHBlZXJGYWN0b3J5YCBpcyBub3QgZGVmaW5lZC4nKTtcbiAgICByZXR1cm4gY3JlYXRlUGVlcigpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9579\n")},9605:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Qf: () => (/* binding */ appAcessor),\n/* harmony export */   sW: () => (/* binding */ ACC_FLAGS)\n/* harmony export */ });\n/* unused harmony export WHEN_READY_FLAG */\n/* harmony import */ var _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8349);\n\nconst ACC_FLAGS = {\n    LOCAL_MEDIA: 'localmedia',\n    PLAY_REMOTE_VIDEO: 'playremotevideo',\n};\nObject.freeze(ACC_FLAGS);\nconst WHEN_READY_FLAG = 'ready';\nlet state = 'unaccess';\nconst accessor = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__/* .Accessor */ .Cd(Object.values(ACC_FLAGS));\nconst whenAccess = new _lib_pprinter_tools__WEBPACK_IMPORTED_MODULE_0__/* .When */ .jd();\naccessor.on('access', () => {\n    whenAccess.occur('ready');\n});\nwhenAccess.when('ready', () => {\n    state = 'access';\n});\n// == API ==\nconst getAccess = () => state === 'access';\nconst set = accessor.set.bind(accessor);\nconst when = whenAccess.when.bind(whenAccess, 'ready');\nconst appAcessor = {\n    getAccess,\n    set,\n    when,\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTYwNS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDOUM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxxQkFBcUIsbUVBQVE7QUFDN0IsdUJBQXVCLCtEQUFJO0FBQzNCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZGUwLmdpdGh1Yi5pby8uL3NyYy9zZXJ2aWNlcy9hcHBBY2Nlc3Nvci50cz8yNzBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjY2Vzc29yLCBXaGVuIH0gZnJvbSAnQGxpYi9wcHJpbnRlci10b29scyc7XG5leHBvcnQgY29uc3QgQUNDX0ZMQUdTID0ge1xuICAgIExPQ0FMX01FRElBOiAnbG9jYWxtZWRpYScsXG4gICAgUExBWV9SRU1PVEVfVklERU86ICdwbGF5cmVtb3RldmlkZW8nLFxufTtcbk9iamVjdC5mcmVlemUoQUNDX0ZMQUdTKTtcbmV4cG9ydCBjb25zdCBXSEVOX1JFQURZX0ZMQUcgPSAncmVhZHknO1xubGV0IHN0YXRlID0gJ3VuYWNjZXNzJztcbmNvbnN0IGFjY2Vzc29yID0gbmV3IEFjY2Vzc29yKE9iamVjdC52YWx1ZXMoQUNDX0ZMQUdTKSk7XG5jb25zdCB3aGVuQWNjZXNzID0gbmV3IFdoZW4oKTtcbmFjY2Vzc29yLm9uKCdhY2Nlc3MnLCAoKSA9PiB7XG4gICAgd2hlbkFjY2Vzcy5vY2N1cigncmVhZHknKTtcbn0pO1xud2hlbkFjY2Vzcy53aGVuKCdyZWFkeScsICgpID0+IHtcbiAgICBzdGF0ZSA9ICdhY2Nlc3MnO1xufSk7XG4vLyA9PSBBUEkgPT1cbmNvbnN0IGdldEFjY2VzcyA9ICgpID0+IHN0YXRlID09PSAnYWNjZXNzJztcbmNvbnN0IHNldCA9IGFjY2Vzc29yLnNldC5iaW5kKGFjY2Vzc29yKTtcbmNvbnN0IHdoZW4gPSB3aGVuQWNjZXNzLndoZW4uYmluZCh3aGVuQWNjZXNzLCAncmVhZHknKTtcbmV4cG9ydCBjb25zdCBhcHBBY2Vzc29yID0ge1xuICAgIGdldEFjY2VzcyxcbiAgICBzZXQsXG4gICAgd2hlbixcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9605\n")}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var I=__webpack_module_cache__[e];if(void 0!==I){if(void 0!==I.error)throw I.error;return I.exports}var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};try{var g={id:e,module:n,factory:__webpack_modules__[e],require:__webpack_require__};__webpack_require__.i.forEach((function(e){e(g)})),n=g.module,g.factory.call(n.exports,n,n.exports,g.require)}catch(e){throw n.error=e,e}return n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.c=__webpack_module_cache__,__webpack_require__.i=[],deferred=[],__webpack_require__.O=(e,I,n,g)=>{if(!I){var t=1/0;for(Q=0;Q<deferred.length;Q++){for(var[I,n,g]=deferred[Q],c=!0,C=0;C<I.length;C++)(!1&g||t>=g)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](I[C])))?I.splice(C--,1):(c=!1,g<t&&(t=g));if(c){deferred.splice(Q--,1);var B=n();void 0!==B&&(e=B)}}return e}g=g||0;for(var Q=deferred.length;Q>0&&deferred[Q-1][2]>g;Q--)deferred[Q]=deferred[Q-1];deferred[Q]=[I,n,g]},__webpack_require__.n=e=>{var I=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(I,{a:I}),I},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,I){if(1&I&&(e=this(e)),8&I)return e;if("object"==typeof e&&e){if(4&I&&e.__esModule)return e;if(16&I&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var g={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var t=2&I&&e;"object"==typeof t&&!~leafPrototypes.indexOf(t);t=getProto(t))Object.getOwnPropertyNames(t).forEach((I=>g[I]=()=>e[I]));return g.default=()=>e,__webpack_require__.d(n,g),n},__webpack_require__.d=(e,I)=>{for(var n in I)__webpack_require__.o(I,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:I[n]})},__webpack_require__.hu=e=>e+"."+__webpack_require__.h()+".hot-update.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.hmrF=()=>"main."+__webpack_require__.h()+".hot-update.json",__webpack_require__.h=()=>"90412e94d45ef8e05c90",__webpack_require__.o=(e,I)=>Object.prototype.hasOwnProperty.call(e,I),inProgress={},dataWebpackPrefix="vde0.github.io:",__webpack_require__.l=(e,I,n,g)=>{if(inProgress[e])inProgress[e].push(I);else{var t,c;if(void 0!==n)for(var C=document.getElementsByTagName("script"),B=0;B<C.length;B++){var Q=C[B];if(Q.getAttribute("src")==e||Q.getAttribute("data-webpack")==dataWebpackPrefix+n){t=Q;break}}t||(c=!0,(t=document.createElement("script")).charset="utf-8",t.timeout=120,__webpack_require__.nc&&t.setAttribute("nonce",__webpack_require__.nc),t.setAttribute("data-webpack",dataWebpackPrefix+n),t.src=e),inProgress[e]=[I];var A=(I,n)=>{t.onerror=t.onload=null,clearTimeout(l);var g=inProgress[e];if(delete inProgress[e],t.parentNode&&t.parentNode.removeChild(t),g&&g.forEach((e=>e(n))),I)return I(n)},l=setTimeout(A.bind(null,void 0,{type:"timeout",target:t}),12e4);t.onerror=A.bind(null,t.onerror),t.onload=A.bind(null,t.onload),c&&document.head.appendChild(t)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e,I,n,g={},t=__webpack_require__.c,c=[],C=[],B="idle",Q=0,A=[];function l(e){B=e;for(var I=[],n=0;n<C.length;n++)I[n]=C[n].call(null,e);return Promise.all(I).then((function(){}))}function s(){0==--Q&&l("ready").then((function(){if(0===Q){var e=A;A=[];for(var I=0;I<e.length;I++)e[I]()}}))}function d(e){if("idle"!==B)throw new Error("check() is only allowed in idle status");return l("check").then(__webpack_require__.hmrM).then((function(n){return n?l("prepare").then((function(){var g=[];return I=[],Promise.all(Object.keys(__webpack_require__.hmrC).reduce((function(e,t){return __webpack_require__.hmrC[t](n.c,n.r,n.m,e,I,g),e}),[])).then((function(){return I=function(){return e?a(e):l("ready").then((function(){return g}))},0===Q?I():new Promise((function(e){A.push((function(){e(I())}))}));var I}))})):l(r()?"ready":"idle").then((function(){return null}))}))}function i(e){return"ready"!==B?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+B+")")})):a(e)}function a(e){e=e||{},r();var g=I.map((function(I){return I(e)}));I=void 0;var t=g.map((function(e){return e.error})).filter(Boolean);if(t.length>0)return l("abort").then((function(){throw t[0]}));var c=l("dispose");g.forEach((function(e){e.dispose&&e.dispose()}));var C,B=l("apply"),Q=function(e){C||(C=e)},A=[];return g.forEach((function(e){if(e.apply){var I=e.apply(Q);if(I)for(var n=0;n<I.length;n++)A.push(I[n])}})),Promise.all([c,B]).then((function(){return C?l("fail").then((function(){throw C})):n?a(e).then((function(e){return A.forEach((function(I){e.indexOf(I)<0&&e.push(I)})),e})):l("idle").then((function(){return A}))}))}function r(){if(n)return I||(I=[]),Object.keys(__webpack_require__.hmrI).forEach((function(e){n.forEach((function(n){__webpack_require__.hmrI[e](n,I)}))})),n=void 0,!0}__webpack_require__.hmrD=g,__webpack_require__.i.push((function(A){var a,r,b,F,o=A.module,U=function(I,n){var g=t[n];if(!g)return I;var C=function(C){if(g.hot.active){if(t[C]){var B=t[C].parents;-1===B.indexOf(n)&&B.push(n)}else c=[n],e=C;-1===g.children.indexOf(C)&&g.children.push(C)}else console.warn("[HMR] unexpected require("+C+") from disposed module "+n),c=[];return I(C)},A=function(e){return{configurable:!0,enumerable:!0,get:function(){return I[e]},set:function(n){I[e]=n}}};for(var d in I)Object.prototype.hasOwnProperty.call(I,d)&&"e"!==d&&Object.defineProperty(C,d,A(d));return C.e=function(e,n){return function(e){switch(B){case"ready":l("prepare");case"prepare":return Q++,e.then(s,s),e;default:return e}}(I.e(e,n))},C}(A.require,A.id);o.hot=(a=A.id,r=o,F={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:b=e!==a,_requireSelf:function(){c=r.parents.slice(),e=b?void 0:a,__webpack_require__(a)},active:!0,accept:function(e,I,n){if(void 0===e)F._selfAccepted=!0;else if("function"==typeof e)F._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var g=0;g<e.length;g++)F._acceptedDependencies[e[g]]=I||function(){},F._acceptedErrorHandlers[e[g]]=n;else F._acceptedDependencies[e]=I||function(){},F._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)F._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var I=0;I<e.length;I++)F._declinedDependencies[e[I]]=!0;else F._declinedDependencies[e]=!0},dispose:function(e){F._disposeHandlers.push(e)},addDisposeHandler:function(e){F._disposeHandlers.push(e)},removeDisposeHandler:function(e){var I=F._disposeHandlers.indexOf(e);I>=0&&F._disposeHandlers.splice(I,1)},invalidate:function(){switch(this._selfInvalidated=!0,B){case"idle":I=[],Object.keys(__webpack_require__.hmrI).forEach((function(e){__webpack_require__.hmrI[e](a,I)})),l("ready");break;case"ready":Object.keys(__webpack_require__.hmrI).forEach((function(e){__webpack_require__.hmrI[e](a,I)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(a)}},check:d,apply:i,status:function(e){if(!e)return B;C.push(e)},addStatusHandler:function(e){C.push(e)},removeStatusHandler:function(e){var I=C.indexOf(e);I>=0&&C.splice(I,1)},data:g[a]},e=void 0,F),o.parents=c,o.children=[],c=[],A.require=U})),__webpack_require__.hmrC={},__webpack_require__.hmrI={}})(),__webpack_require__.p="/",(()=>{if("undefined"!=typeof document){var e=[],I=[],n=n=>({dispose:()=>{for(var I=0;I<e.length;I++){var n=e[I];n.parentNode&&n.parentNode.removeChild(n)}e.length=0},apply:()=>{for(var e=0;e<I.length;e++)I[e].rel="stylesheet";I.length=0}});__webpack_require__.hmrC.miniCss=(g,t,c,C,B,Q)=>{B.push(n),g.forEach((n=>{var g=__webpack_require__.miniCssF(n),t=__webpack_require__.p+g,c=((e,I)=>{for(var n=document.getElementsByTagName("link"),g=0;g<n.length;g++){var t=(C=n[g]).getAttribute("data-href")||C.getAttribute("href");if("stylesheet"===C.rel&&(t===e||t===I))return C}var c=document.getElementsByTagName("style");for(g=0;g<c.length;g++){var C;if((t=(C=c[g]).getAttribute("data-href"))===e||t===I)return C}})(g,t);c&&C.push(new Promise(((g,C)=>{var B=((e,I,n,g,t)=>{var c=document.createElement("link");return c.rel="stylesheet",c.type="text/css",__webpack_require__.nc&&(c.nonce=__webpack_require__.nc),c.onerror=c.onload=n=>{if(c.onerror=c.onload=null,"load"===n.type)g();else{var C=n&&n.type,B=n&&n.target&&n.target.href||I,Q=new Error("Loading CSS chunk "+e+" failed.\n("+C+": "+B+")");Q.name="ChunkLoadError",Q.code="CSS_CHUNK_LOAD_FAILED",Q.type=C,Q.request=B,c.parentNode&&c.parentNode.removeChild(c),t(Q)}},c.href=I,n?n.parentNode.insertBefore(c,n.nextSibling):document.head.appendChild(c),c})(n,t,c,(()=>{B.as="style",B.rel="preload",g()}),C);e.push(c),I.push(B)})))}))}}})(),(()=>{var e,I,n,g,t,c=__webpack_require__.hmrS_jsonp=__webpack_require__.hmrS_jsonp||{792:0},C={};function B(I,n){return e=n,new Promise(((e,n)=>{C[I]=e;var g=__webpack_require__.p+__webpack_require__.hu(I),t=new Error;__webpack_require__.l(g,(e=>{if(C[I]){C[I]=void 0;var g=e&&("load"===e.type?"missing":e.type),c=e&&e.target&&e.target.src;t.message="Loading hot update chunk "+I+" failed.\n("+g+": "+c+")",t.name="ChunkLoadError",t.type=g,t.request=c,n(t)}}))}))}function Q(e){function C(e){for(var I=[e],n={},g=I.map((function(e){return{chain:[e],id:e}}));g.length>0;){var t=g.pop(),c=t.id,C=t.chain,Q=__webpack_require__.c[c];if(Q&&(!Q.hot._selfAccepted||Q.hot._selfInvalidated)){if(Q.hot._selfDeclined)return{type:"self-declined",chain:C,moduleId:c};if(Q.hot._main)return{type:"unaccepted",chain:C,moduleId:c};for(var A=0;A<Q.parents.length;A++){var l=Q.parents[A],s=__webpack_require__.c[l];if(s){if(s.hot._declinedDependencies[c])return{type:"declined",chain:C.concat([l]),moduleId:c,parentId:l};-1===I.indexOf(l)&&(s.hot._acceptedDependencies[c]?(n[l]||(n[l]=[]),B(n[l],[c])):(delete n[l],I.push(l),g.push({chain:C.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:I,outdatedDependencies:n}}function B(e,I){for(var n=0;n<I.length;n++){var g=I[n];-1===e.indexOf(g)&&e.push(g)}}__webpack_require__.f&&delete __webpack_require__.f.jsonpHmr,I=void 0;var Q={},A=[],l={},s=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var d in n)if(__webpack_require__.o(n,d)){var i=n[d],a=i?C(d):{type:"disposed",moduleId:d},r=!1,b=!1,F=!1,o="";switch(a.chain&&(o="\nUpdate propagation: "+a.chain.join(" -> ")),a.type){case"self-declined":e.onDeclined&&e.onDeclined(a),e.ignoreDeclined||(r=new Error("Aborted because of self decline: "+a.moduleId+o));break;case"declined":e.onDeclined&&e.onDeclined(a),e.ignoreDeclined||(r=new Error("Aborted because of declined dependency: "+a.moduleId+" in "+a.parentId+o));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(a),e.ignoreUnaccepted||(r=new Error("Aborted because "+d+" is not accepted"+o));break;case"accepted":e.onAccepted&&e.onAccepted(a),b=!0;break;case"disposed":e.onDisposed&&e.onDisposed(a),F=!0;break;default:throw new Error("Unexception type "+a.type)}if(r)return{error:r};if(b)for(d in l[d]=i,B(A,a.outdatedModules),a.outdatedDependencies)__webpack_require__.o(a.outdatedDependencies,d)&&(Q[d]||(Q[d]=[]),B(Q[d],a.outdatedDependencies[d]));F&&(B(A,[a.moduleId]),l[d]=s)}n=void 0;for(var U,u=[],G=0;G<A.length;G++){var Z=A[G],V=__webpack_require__.c[Z];V&&(V.hot._selfAccepted||V.hot._main)&&l[Z]!==s&&!V.hot._selfInvalidated&&u.push({module:Z,require:V.hot._requireSelf,errorHandler:V.hot._selfAccepted})}return{dispose:function(){var e;g.forEach((function(e){delete c[e]})),g=void 0;for(var I,n=A.slice();n.length>0;){var t=n.pop(),C=__webpack_require__.c[t];if(C){var B={},l=C.hot._disposeHandlers;for(G=0;G<l.length;G++)l[G].call(null,B);for(__webpack_require__.hmrD[t]=B,C.hot.active=!1,delete __webpack_require__.c[t],delete Q[t],G=0;G<C.children.length;G++){var s=__webpack_require__.c[C.children[G]];s&&(e=s.parents.indexOf(t))>=0&&s.parents.splice(e,1)}}}for(var d in Q)if(__webpack_require__.o(Q,d)&&(C=__webpack_require__.c[d]))for(U=Q[d],G=0;G<U.length;G++)I=U[G],(e=C.children.indexOf(I))>=0&&C.children.splice(e,1)},apply:function(I){for(var n in l)__webpack_require__.o(l,n)&&(__webpack_require__.m[n]=l[n]);for(var g=0;g<t.length;g++)t[g](__webpack_require__);for(var c in Q)if(__webpack_require__.o(Q,c)){var C=__webpack_require__.c[c];if(C){U=Q[c];for(var B=[],s=[],d=[],i=0;i<U.length;i++){var a=U[i],r=C.hot._acceptedDependencies[a],b=C.hot._acceptedErrorHandlers[a];if(r){if(-1!==B.indexOf(r))continue;B.push(r),s.push(b),d.push(a)}}for(var F=0;F<B.length;F++)try{B[F].call(null,U)}catch(n){if("function"==typeof s[F])try{s[F](n,{moduleId:c,dependencyId:d[F]})}catch(g){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:c,dependencyId:d[F],error:g,originalError:n}),e.ignoreErrored||(I(g),I(n))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:c,dependencyId:d[F],error:n}),e.ignoreErrored||I(n)}}}for(var o=0;o<u.length;o++){var G=u[o],Z=G.module;try{G.require(Z)}catch(n){if("function"==typeof G.errorHandler)try{G.errorHandler(n,{moduleId:Z,module:__webpack_require__.c[Z]})}catch(g){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:Z,error:g,originalError:n}),e.ignoreErrored||(I(g),I(n))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:Z,error:n}),e.ignoreErrored||I(n)}}return A}}}self.webpackHotUpdatevde0_github_io=(I,g,c)=>{for(var B in g)__webpack_require__.o(g,B)&&(n[B]=g[B],e&&e.push(B));c&&t.push(c),C[I]&&(C[I](),C[I]=void 0)},__webpack_require__.hmrI.jsonp=function(e,I){n||(n={},t=[],g=[],I.push(Q)),__webpack_require__.o(n,e)||(n[e]=__webpack_require__.m[e])},__webpack_require__.hmrC.jsonp=function(e,C,A,l,s,d){s.push(Q),I={},g=C,n=A.reduce((function(e,I){return e[I]=!1,e}),{}),t=[],e.forEach((function(e){__webpack_require__.o(c,e)&&void 0!==c[e]?(l.push(B(e,d)),I[e]=!0):I[e]=!1})),__webpack_require__.f&&(__webpack_require__.f.jsonpHmr=function(e,n){I&&__webpack_require__.o(I,e)&&!I[e]&&(n.push(B(e)),I[e]=!0)})},__webpack_require__.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(__webpack_require__.p+__webpack_require__.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))},__webpack_require__.O.j=e=>0===c[e];var A=(e,I)=>{var n,g,[t,C,B]=I,Q=0;if(t.some((e=>0!==c[e]))){for(n in C)__webpack_require__.o(C,n)&&(__webpack_require__.m[n]=C[n]);if(B)var A=B(__webpack_require__)}for(e&&e(I);Q<t.length;Q++)g=t[Q],__webpack_require__.o(c,g)&&c[g]&&c[g][0](),c[g]=0;return __webpack_require__.O(A)},l=self.webpackChunkvde0_github_io=self.webpackChunkvde0_github_io||[];l.forEach(A.bind(null,0)),l.push=A.bind(null,l.push.bind(l))})(),__webpack_require__.O(void 0,[230],(()=>__webpack_require__(1742)));var __webpack_exports__=__webpack_require__.O(void 0,[230],(()=>__webpack_require__(3900)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();