# Компоненты приложения

## Цель и задача

### Цель

**Цель** записи помочь разрабротчикам приложения в повышении качества кода и повышении объёма выполнения **ПОЛЕЗНОЙ** работы за единицу времени, благодаря преждевременному планированию, тщательному продумыванию логики работы функциональных компонентов, составлению их задач и ограничений, а также принципа взаимодействия между отдельными компонентами. Выше обозначенная концепция должна в итоге сформировать чёткое видение у разработчика итоговой картины разрабатываемого приложения, а также сам по себе план будет служить справочником в процессе разработки, на который постоянно можно будет опереться в своих размышлениях, свериться либо внести свои собственные правки.

### Задача

**Задача** настоящего документа заключается в планировании и разработке концептов функциональных компонентов и их работы с точки зрения опыта пользователя, что очень важно при реализации компонентов в коде от лица разработчика, ведь позволяет надёжно понимать, какой именно функционал от компонента требуется.


## Список компонентов

Компоненты:
+ [TextChatForm](#textchatform)
+ [TextChatBtnOfInterface](#textchatbtnofinterface)
+ [AddUserBtn](#adduserbtn)
+ [NextBtn](#nextbtn)
+ [VideoChat](#videochat)
+ [TextChat](#textchat)
+ [Interface](#interface)


## Состояния приложения

В процессе описания логики работы компонентов выявилась необходимость в определении некоторых состояний, служащих для правильной работы компонентов.

Список состояний:
1. isMobile: boolean - открыто приложение на компьютере либо смартфоне
2. unreadMsgAmount: number - количество непрочитанных пользователем сообщений
3. MobileKeyboard: boolean - вызвана ли клавиатура на мобильном устройстве
4. textChatMsg: string - сообщение текстового чата
5. msgs: string[] - список сообщений


## TextChatForm

Этот компонент представляет из себя форму отправки сообщений в рамках [TextChat](#textchat), состоит из поля ввода и кнопки отправки. Думаю, является очевидным, что при использовании кнопки отправки, содержимое поля ввода должно отправляться в текстовый чат от лица пользователя, а содержимое поля очищаться.

TextChatForm не может никогда быть показан на экрана без фокуса на его поле ввода. Как только фокус с поля ввода спадает, то [TextChat](#textchat) должен быть закрыт.
Фокус не должен пропадать при скроллинге текстового чата.

Набранный текст в поле ввода, даже при закрытии [TextChat](#textchat), должен сохраняться и отображаться при следующем открытии текстового чата.


## TextChatBtnOfInterface

Кнопка для контроля отображения и скрытия текстового чата [TextChat](#textchat), находится в рамках компонента [Interface](#interface). Работает как переключатель: если компонент [TextChat](#textchat) закрыт, то при использовании кнопки он откроется, а если же изначально открыт, то закроется.

В качестве бэджа у кнопки должно отображаться количество непрочитанных текстовых сообщений от своего собеседника.


## AddUserBtn


## NextBtn

Сбрасывает текущего собеседеника и ищет запускает поиск следующего собеседника, с которым приложение выполняет соединения.

Сбрасывается текстовый чат [TextChat](#textchat). Текстовый чат [TextChat](#textchat) закрывается.


## VideoChat

Является компонентом для отображения видео с видеокамеры пользователя или его собеседника.

Присутствует в презентации приложения в количестве двух штук: для собеседника и для пользователя.
Пока что планируется, что согласно опыту использования при отображении текстового чата [TextChat](#textchat) в приложение, оно должен собой заменять компонент видео-чата, отображающий видео пользователя. И так же обратно: при закрытии [TextChat](#textchat) видео-чат на стороне пользователя должен занять освободившееся пространство.


## TextChat

Отображается на месте [VideoChat](#videochat) со стороны пользователя, заменяя тот компонент собой. При закрытии чата [VideoChat](#videochat) возвращается на вновь предоставленное ему место.

Открывается и закрывается при использовании элемента управления [TextChatBtnOfInterface](#textchatbtnofinterface). Также должен закрываться при клике/нажатии вне поля себя как компонента.

При открытии чата чат должен отображать последнее актуальное прочитанние сообщения, мб одно новое непрочитанное из всего спика непрочитанных, если таковые имеются.

Чат должен явно отделять сообщения пользователя от сообщения собеседника.

При отправке сообщения при помощи [TextChatForm](#textchatform) чат должен скроллиться в самый низ, делая все непрочитанные сообщения прочитанными, и отображая последнее отправленное пользователем.

Набранный текст в поле ввода, даже при закрытии текстового чата, должен сохраняться и отображаться при следующем его открытии.


## Interface

Представляет из себя массив элементов управления, а в данном проекте лишь кнопок, открывающих пользователю доступ к различному функционалу приложения, собранных компактно в рамках данного компонента. Каждый элемент управления отвечает строго за одну задачу.

В мобильной версии приложения при взаимодействии с текстовым чатом [TextChat](#textchat) должен уступать пространство для формы набора сообщения [TextChatForm](#textchatform), скрываясь с экрана пользователя, и при закрытии [TextChat](#textchat) должно возвращаться на своё место.
В десктопной версии приложения [TextChatForm](#textchatform) и интерфейс не конфликтуют из-за пространства.
